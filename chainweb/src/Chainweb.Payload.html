<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE BangPatterns #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE ConstraintKinds #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DataKinds #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE DeriveAnyClass #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE DeriveGeneric #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE DerivingStrategies #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE GeneralizedNewtypeDeriving #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE RecordWildCards #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies #-}</span><span>
</span><span id="line-13"></span><span>
</span><span id="line-14"></span><span class="hs-comment">-- TODO KeySet NFData in Pact</span><span>
</span><span id="line-15"></span><span class="hs-pragma">{-# OPTIONS_GHC -fno-warn-orphans #-}</span><span>
</span><span id="line-16"></span><span>
</span><span id="line-17"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-18"></span><span class="hs-comment">-- Module: Chainweb.Payload</span><span>
</span><span id="line-19"></span><span class="hs-comment">-- Copyright: Copyright &#169; 2019 Kadena LLC.</span><span>
</span><span id="line-20"></span><span class="hs-comment">-- License: MIT</span><span>
</span><span id="line-21"></span><span class="hs-comment">-- Maintainer: Lars Kuhtz &lt;lars@kadena.io&gt;</span><span>
</span><span id="line-22"></span><span class="hs-comment">-- Stability: experimental</span><span>
</span><span id="line-23"></span><span class="hs-comment">--</span><span>
</span><span id="line-24"></span><span class="hs-comment">-- TODO</span><span>
</span><span id="line-25"></span><span class="hs-comment">--</span><span>
</span><span id="line-26"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Chainweb.Payload</span><span>
</span><span id="line-27"></span><span class="hs-special">(</span><span>
</span><span id="line-28"></span><span class="annot"><span class="hs-comment">-- * Block Chain Data</span></span><span>
</span><span id="line-29"></span><span>
</span><span id="line-30"></span><span>  </span><span class="annot"><a href="Chainweb.Payload.html#Transaction"><span class="hs-identifier">Transaction</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#TransactionOutput"><span class="hs-identifier">TransactionOutput</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-32"></span><span>
</span><span id="line-33"></span><span class="annot"><span class="hs-comment">-- * Hashes</span></span><span>
</span><span id="line-34"></span><span>
</span><span id="line-35"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockPayloadHash"><span class="hs-identifier">BlockPayloadHash</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#encodeBlockPayloadHash"><span class="hs-identifier">encodeBlockPayloadHash</span></a></span><span>
</span><span id="line-37"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#decodeBlockPayloadHash"><span class="hs-identifier">decodeBlockPayloadHash</span></a></span><span>
</span><span id="line-38"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockTransactionsHash"><span class="hs-identifier">BlockTransactionsHash</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#encodeBlockTransactionsHash"><span class="hs-identifier">encodeBlockTransactionsHash</span></a></span><span>
</span><span id="line-40"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#decodeBlockTransactionsHash"><span class="hs-identifier">decodeBlockTransactionsHash</span></a></span><span>
</span><span id="line-41"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockOutputsHash"><span class="hs-identifier">BlockOutputsHash</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#encodeBlockOutputsHash"><span class="hs-identifier">encodeBlockOutputsHash</span></a></span><span>
</span><span id="line-43"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#decodeBlockOutputsHash"><span class="hs-identifier">decodeBlockOutputsHash</span></a></span><span>
</span><span id="line-44"></span><span>
</span><span id="line-45"></span><span class="annot"><span class="hs-comment">-- * Authoritative Data</span></span><span>
</span><span id="line-46"></span><span>
</span><span id="line-47"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockPayload"><span class="hs-identifier">BlockPayload</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-48"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockTransactions"><span class="hs-identifier">BlockTransactions</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span>
</span><span id="line-50"></span><span class="annot"><span class="hs-comment">-- * Redundant Data / Caches</span></span><span>
</span><span id="line-51"></span><span>
</span><span id="line-52"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockOutputs"><span class="hs-identifier">BlockOutputs</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-53"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#TransactionTree"><span class="hs-identifier">TransactionTree</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-54"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#OutputTree"><span class="hs-identifier">OutputTree</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span>
</span><span id="line-56"></span><span class="annot"><span class="hs-comment">-- * Create Data</span></span><span>
</span><span id="line-57"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockTransactionsLog"><span class="hs-identifier">BlockTransactionsLog</span></a></span><span>
</span><span id="line-58"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#newTransactionLog"><span class="hs-identifier">newTransactionLog</span></a></span><span>
</span><span id="line-59"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#newBlockTransactions"><span class="hs-identifier">newBlockTransactions</span></a></span><span>
</span><span id="line-60"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#transactionLog"><span class="hs-identifier">transactionLog</span></a></span><span>
</span><span id="line-61"></span><span>
</span><span id="line-62"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#MinerData"><span class="hs-identifier">MinerData</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-63"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#CoinbaseOutput"><span class="hs-identifier">CoinbaseOutput</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span>
</span><span id="line-65"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockOutputsLog"><span class="hs-identifier">BlockOutputsLog</span></a></span><span>
</span><span id="line-66"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#newBlockOutputLog"><span class="hs-identifier">newBlockOutputLog</span></a></span><span>
</span><span id="line-67"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#newBlockOutputs"><span class="hs-identifier">newBlockOutputs</span></a></span><span>
</span><span id="line-68"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#blockOutputLog"><span class="hs-identifier">blockOutputLog</span></a></span><span>
</span><span id="line-69"></span><span>
</span><span id="line-70"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#blockPayload"><span class="hs-identifier">blockPayload</span></a></span><span>
</span><span id="line-71"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#newBlockPayload"><span class="hs-identifier">newBlockPayload</span></a></span><span>
</span><span id="line-72"></span><span>
</span><span id="line-73"></span><span class="annot"><span class="hs-comment">-- * API Payload Data</span></span><span>
</span><span id="line-74"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#PayloadData"><span class="hs-identifier">PayloadData</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#payloadData"><span class="hs-identifier">payloadData</span></a></span><span>
</span><span id="line-76"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#newPayloadData"><span class="hs-identifier">newPayloadData</span></a></span><span>
</span><span id="line-77"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#PayloadDataCas"><span class="hs-identifier">PayloadDataCas</span></a></span><span>
</span><span id="line-78"></span><span>
</span><span id="line-79"></span><span class="annot"><span class="hs-comment">-- * All Payload Data in a Single Structure</span></span><span>
</span><span id="line-80"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#PayloadWithOutputs"><span class="hs-identifier">PayloadWithOutputs</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-81"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#payloadWithOutputs"><span class="hs-identifier">payloadWithOutputs</span></a></span><span>
</span><span id="line-82"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#newPayloadWithOutputs"><span class="hs-identifier">newPayloadWithOutputs</span></a></span><span>
</span><span id="line-83"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#payloadWithOutputsToBlockObjects"><span class="hs-identifier">payloadWithOutputsToBlockObjects</span></a></span><span>
</span><span id="line-84"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#payloadWithOutputsToPayloadData"><span class="hs-identifier">payloadWithOutputsToPayloadData</span></a></span><span>
</span><span id="line-85"></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-86"></span><span>
</span><span id="line-87"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.DeepSeq</span></span><span>
</span><span id="line-88"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(&lt;$!&gt;)</span></span><span class="hs-special">)</span><span>
</span><span id="line-89"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Catch</span></span><span>
</span><span id="line-90"></span><span>
</span><span id="line-91"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Crypto.Hash.Algorithms</span></span><span>
</span><span id="line-92"></span><span>
</span><span id="line-93"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson</span></span><span>
</span><span id="line-94"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson.Types</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">A</span></span><span>
</span><span id="line-95"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteArray</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BA</span></span><span>
</span><span id="line-96"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Bytes.Get</span></span><span>
</span><span id="line-97"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Bytes.Put</span></span><span>
</span><span id="line-98"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">B</span></span><span>
</span><span id="line-99"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Hashable</span></span><span>
</span><span id="line-100"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.MerkleLog</span></span><span>
</span><span id="line-101"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-102"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Vector</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">V</span></span><span>
</span><span id="line-103"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Void</span></span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Generics</span></span><span>
</span><span id="line-106"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Stack</span></span><span>
</span><span id="line-107"></span><span>
</span><span id="line-108"></span><span class="hs-comment">-- internal modules</span><span>
</span><span id="line-109"></span><span>
</span><span id="line-110"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Chainweb.Crypto.MerkleLog.html"><span class="hs-identifier">Chainweb.Crypto.MerkleLog</span></a></span><span>
</span><span id="line-111"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Chainweb.MerkleLogHash.html"><span class="hs-identifier">Chainweb.MerkleLogHash</span></a></span><span>
</span><span id="line-112"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Chainweb.MerkleUniverse.html"><span class="hs-identifier">Chainweb.MerkleUniverse</span></a></span><span>
</span><span id="line-113"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Chainweb.Utils.html"><span class="hs-identifier">Chainweb.Utils</span></a></span><span>
</span><span id="line-114"></span><span>
</span><span id="line-115"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.CAS</span></span><span>
</span><span id="line-116"></span><span>
</span><span id="line-117"></span><span class="hs-comment">-- -------------------------------------------------------------------------- --</span><span>
</span><span id="line-118"></span><span class="hs-comment">-- Block Transactions Hash</span><span>
</span><span id="line-119"></span><span>
</span><span id="line-120"></span><span id="local-6989586621681470078"><span id="local-6989586621681470079"></span></span><span class="hs-keyword">newtype</span><span> </span><span id="BlockTransactionsHash"><span class="annot"><a href="Chainweb.Payload.html#BlockTransactionsHash"><span class="hs-identifier hs-var">BlockTransactionsHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="BlockTransactionsHash"><span class="annot"><a href="Chainweb.Payload.html#BlockTransactionsHash"><span class="hs-identifier hs-var">BlockTransactionsHash</span></a></span></span><span> </span><span class="annot"><a href="Chainweb.MerkleLogHash.html#MerkleLogHash"><span class="hs-identifier hs-type">MerkleLogHash</span></a></span><span>
</span><span id="line-121"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681470071"><span id="local-6989586621681470073"><span id="local-6989586621681470075"><span class="annot"><span class="annottext">Int -&gt; BlockTransactionsHash -&gt; ShowS
[BlockTransactionsHash] -&gt; ShowS
BlockTransactionsHash -&gt; String
(Int -&gt; BlockTransactionsHash -&gt; ShowS)
-&gt; (BlockTransactionsHash -&gt; String)
-&gt; ([BlockTransactionsHash] -&gt; ShowS)
-&gt; Show BlockTransactionsHash
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [BlockTransactionsHash] -&gt; ShowS
$cshowList :: [BlockTransactionsHash] -&gt; ShowS
show :: BlockTransactionsHash -&gt; String
$cshow :: BlockTransactionsHash -&gt; String
showsPrec :: Int -&gt; BlockTransactionsHash -&gt; ShowS
$cshowsPrec :: Int -&gt; BlockTransactionsHash -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681470066"><span id="local-6989586621681470068"><span class="annot"><span class="annottext">BlockTransactionsHash -&gt; BlockTransactionsHash -&gt; Bool
(BlockTransactionsHash -&gt; BlockTransactionsHash -&gt; Bool)
-&gt; (BlockTransactionsHash -&gt; BlockTransactionsHash -&gt; Bool)
-&gt; Eq BlockTransactionsHash
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: BlockTransactionsHash -&gt; BlockTransactionsHash -&gt; Bool
$c/= :: BlockTransactionsHash -&gt; BlockTransactionsHash -&gt; Bool
== :: BlockTransactionsHash -&gt; BlockTransactionsHash -&gt; Bool
$c== :: BlockTransactionsHash -&gt; BlockTransactionsHash -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681470050"><span id="local-6989586621681470052"><span id="local-6989586621681470054"><span id="local-6989586621681470056"><span id="local-6989586621681470058"><span id="local-6989586621681470060"><span id="local-6989586621681470062"><span class="annot"><span class="annottext">Eq BlockTransactionsHash
Eq BlockTransactionsHash =&gt;
(BlockTransactionsHash -&gt; BlockTransactionsHash -&gt; Ordering)
-&gt; (BlockTransactionsHash -&gt; BlockTransactionsHash -&gt; Bool)
-&gt; (BlockTransactionsHash -&gt; BlockTransactionsHash -&gt; Bool)
-&gt; (BlockTransactionsHash -&gt; BlockTransactionsHash -&gt; Bool)
-&gt; (BlockTransactionsHash -&gt; BlockTransactionsHash -&gt; Bool)
-&gt; (BlockTransactionsHash
    -&gt; BlockTransactionsHash -&gt; BlockTransactionsHash)
-&gt; (BlockTransactionsHash
    -&gt; BlockTransactionsHash -&gt; BlockTransactionsHash)
-&gt; Ord BlockTransactionsHash
BlockTransactionsHash -&gt; BlockTransactionsHash -&gt; Bool
BlockTransactionsHash -&gt; BlockTransactionsHash -&gt; Ordering
BlockTransactionsHash
-&gt; BlockTransactionsHash -&gt; BlockTransactionsHash
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: BlockTransactionsHash
-&gt; BlockTransactionsHash -&gt; BlockTransactionsHash
$cmin :: BlockTransactionsHash
-&gt; BlockTransactionsHash -&gt; BlockTransactionsHash
max :: BlockTransactionsHash
-&gt; BlockTransactionsHash -&gt; BlockTransactionsHash
$cmax :: BlockTransactionsHash
-&gt; BlockTransactionsHash -&gt; BlockTransactionsHash
&gt;= :: BlockTransactionsHash -&gt; BlockTransactionsHash -&gt; Bool
$c&gt;= :: BlockTransactionsHash -&gt; BlockTransactionsHash -&gt; Bool
&gt; :: BlockTransactionsHash -&gt; BlockTransactionsHash -&gt; Bool
$c&gt; :: BlockTransactionsHash -&gt; BlockTransactionsHash -&gt; Bool
&lt;= :: BlockTransactionsHash -&gt; BlockTransactionsHash -&gt; Bool
$c&lt;= :: BlockTransactionsHash -&gt; BlockTransactionsHash -&gt; Bool
&lt; :: BlockTransactionsHash -&gt; BlockTransactionsHash -&gt; Bool
$c&lt; :: BlockTransactionsHash -&gt; BlockTransactionsHash -&gt; Bool
compare :: BlockTransactionsHash -&gt; BlockTransactionsHash -&gt; Ordering
$ccompare :: BlockTransactionsHash -&gt; BlockTransactionsHash -&gt; Ordering
$cp1Ord :: Eq BlockTransactionsHash
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. BlockTransactionsHash -&gt; Rep BlockTransactionsHash x)
-&gt; (forall x. Rep BlockTransactionsHash x -&gt; BlockTransactionsHash)
-&gt; Generic BlockTransactionsHash
forall x. Rep BlockTransactionsHash x -&gt; BlockTransactionsHash
forall x. BlockTransactionsHash -&gt; Rep BlockTransactionsHash x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep BlockTransactionsHash x -&gt; BlockTransactionsHash
$cfrom :: forall x. BlockTransactionsHash -&gt; Rep BlockTransactionsHash x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-122"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681470044"><span class="annot"><span class="annottext">BlockTransactionsHash -&gt; ()
(BlockTransactionsHash -&gt; ()) -&gt; NFData BlockTransactionsHash
forall a. (a -&gt; ()) -&gt; NFData a
rnf :: BlockTransactionsHash -&gt; ()
$crnf :: BlockTransactionsHash -&gt; ()
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></span></span><span class="hs-special">)</span><span>
</span><span id="line-123"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681470037"><span id="local-6989586621681470039"><span id="local-6989586621681470041"><span class="annot"><span class="annottext">BlockTransactionsHash -&gt; Int
BlockTransactionsHash -&gt; Ptr p -&gt; IO ()
BlockTransactionsHash -&gt; (Ptr p -&gt; IO a) -&gt; IO a
(BlockTransactionsHash -&gt; Int)
-&gt; (forall p a. BlockTransactionsHash -&gt; (Ptr p -&gt; IO a) -&gt; IO a)
-&gt; (forall p. BlockTransactionsHash -&gt; Ptr p -&gt; IO ())
-&gt; ByteArrayAccess BlockTransactionsHash
forall p. BlockTransactionsHash -&gt; Ptr p -&gt; IO ()
forall ba.
(ba -&gt; Int)
-&gt; (forall p a. ba -&gt; (Ptr p -&gt; IO a) -&gt; IO a)
-&gt; (forall p. ba -&gt; Ptr p -&gt; IO ())
-&gt; ByteArrayAccess ba
forall p a. BlockTransactionsHash -&gt; (Ptr p -&gt; IO a) -&gt; IO a
copyByteArrayToPtr :: BlockTransactionsHash -&gt; Ptr p -&gt; IO ()
$ccopyByteArrayToPtr :: forall p. BlockTransactionsHash -&gt; Ptr p -&gt; IO ()
withByteArray :: BlockTransactionsHash -&gt; (Ptr p -&gt; IO a) -&gt; IO a
$cwithByteArray :: forall p a. BlockTransactionsHash -&gt; (Ptr p -&gt; IO a) -&gt; IO a
length :: BlockTransactionsHash -&gt; Int
$clength :: BlockTransactionsHash -&gt; Int
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">BA.ByteArrayAccess</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-124"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681470032"><span id="local-6989586621681470034"><span class="annot"><span class="annottext">Int -&gt; BlockTransactionsHash -&gt; Int
BlockTransactionsHash -&gt; Int
(Int -&gt; BlockTransactionsHash -&gt; Int)
-&gt; (BlockTransactionsHash -&gt; Int) -&gt; Hashable BlockTransactionsHash
forall a. (Int -&gt; a -&gt; Int) -&gt; (a -&gt; Int) -&gt; Hashable a
hash :: BlockTransactionsHash -&gt; Int
$chash :: BlockTransactionsHash -&gt; Int
hashWithSalt :: Int -&gt; BlockTransactionsHash -&gt; Int
$chashWithSalt :: Int -&gt; BlockTransactionsHash -&gt; Int
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Hashable</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681470023"><span id="local-6989586621681470025"><span id="local-6989586621681470027"><span id="local-6989586621681470029"><span class="annot"><span class="annottext">[BlockTransactionsHash] -&gt; Encoding
[BlockTransactionsHash] -&gt; Value
BlockTransactionsHash -&gt; Encoding
BlockTransactionsHash -&gt; Value
(BlockTransactionsHash -&gt; Value)
-&gt; (BlockTransactionsHash -&gt; Encoding)
-&gt; ([BlockTransactionsHash] -&gt; Value)
-&gt; ([BlockTransactionsHash] -&gt; Encoding)
-&gt; ToJSON BlockTransactionsHash
forall a.
(a -&gt; Value)
-&gt; (a -&gt; Encoding)
-&gt; ([a] -&gt; Value)
-&gt; ([a] -&gt; Encoding)
-&gt; ToJSON a
toEncodingList :: [BlockTransactionsHash] -&gt; Encoding
$ctoEncodingList :: [BlockTransactionsHash] -&gt; Encoding
toJSONList :: [BlockTransactionsHash] -&gt; Value
$ctoJSONList :: [BlockTransactionsHash] -&gt; Value
toEncoding :: BlockTransactionsHash -&gt; Encoding
$ctoEncoding :: BlockTransactionsHash -&gt; Encoding
toJSON :: BlockTransactionsHash -&gt; Value
$ctoJSON :: BlockTransactionsHash -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">ToJSON</span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681470018"><span id="local-6989586621681470020"><span class="annot"><span class="annottext">Value -&gt; Parser [BlockTransactionsHash]
Value -&gt; Parser BlockTransactionsHash
(Value -&gt; Parser BlockTransactionsHash)
-&gt; (Value -&gt; Parser [BlockTransactionsHash])
-&gt; FromJSON BlockTransactionsHash
forall a.
(Value -&gt; Parser a) -&gt; (Value -&gt; Parser [a]) -&gt; FromJSON a
parseJSONList :: Value -&gt; Parser [BlockTransactionsHash]
$cparseJSONList :: Value -&gt; Parser [BlockTransactionsHash]
parseJSON :: Value -&gt; Parser BlockTransactionsHash
$cparseJSON :: Value -&gt; Parser BlockTransactionsHash
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">FromJSON</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-125"></span><span>
</span><span id="line-126"></span><span id="local-6989586621681470016"><span class="annot"><a href="Chainweb.Payload.html#encodeBlockTransactionsHash"><span class="hs-identifier hs-type">encodeBlockTransactionsHash</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadPut</span></span><span> </span><span class="annot"><a href="#local-6989586621681470016"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockTransactionsHash"><span class="hs-identifier hs-type">BlockTransactionsHash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681470016"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-127"></span><span id="encodeBlockTransactionsHash"><span class="annot"><span class="annottext">encodeBlockTransactionsHash :: BlockTransactionsHash -&gt; m ()
</span><a href="Chainweb.Payload.html#encodeBlockTransactionsHash"><span class="hs-identifier hs-var hs-var">encodeBlockTransactionsHash</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Chainweb.Payload.html#BlockTransactionsHash"><span class="hs-identifier hs-type">BlockTransactionsHash</span></a></span><span> </span><span id="local-6989586621681470015"><span class="annot"><span class="annottext">w :: MerkleLogHash
</span><a href="#local-6989586621681470015"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MerkleLogHash -&gt; m ()
forall (m :: * -&gt; *). MonadPut m =&gt; MerkleLogHash -&gt; m ()
</span><a href="Chainweb.MerkleLogHash.html#encodeMerkleLogHash"><span class="hs-identifier hs-var">encodeMerkleLogHash</span></a></span><span> </span><span class="annot"><span class="annottext">MerkleLogHash
</span><a href="#local-6989586621681470015"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-128"></span><span>
</span><span id="line-129"></span><span id="local-6989586621681470013"><span class="annot"><a href="Chainweb.Payload.html#decodeBlockTransactionsHash"><span class="hs-identifier hs-type">decodeBlockTransactionsHash</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadGet</span></span><span> </span><span class="annot"><a href="#local-6989586621681470013"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681470013"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockTransactionsHash"><span class="hs-identifier hs-type">BlockTransactionsHash</span></a></span></span><span>
</span><span id="line-130"></span><span id="decodeBlockTransactionsHash"><span class="annot"><span class="annottext">decodeBlockTransactionsHash :: m BlockTransactionsHash
</span><a href="Chainweb.Payload.html#decodeBlockTransactionsHash"><span class="hs-identifier hs-var hs-var">decodeBlockTransactionsHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MerkleLogHash -&gt; BlockTransactionsHash
</span><a href="Chainweb.Payload.html#BlockTransactionsHash"><span class="hs-identifier hs-var">BlockTransactionsHash</span></a></span><span> </span><span class="annot"><span class="annottext">(MerkleLogHash -&gt; BlockTransactionsHash)
-&gt; m MerkleLogHash -&gt; m BlockTransactionsHash
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">&lt;$!&gt;</span></span><span> </span><span class="annot"><span class="annottext">m MerkleLogHash
forall (m :: * -&gt; *). MonadGet m =&gt; m MerkleLogHash
</span><a href="Chainweb.MerkleLogHash.html#decodeMerkleLogHash"><span class="hs-identifier hs-var">decodeMerkleLogHash</span></a></span><span>
</span><span id="line-131"></span><span>
</span><span id="line-132"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Chainweb.Crypto.MerkleLog.html#IsMerkleLogEntry"><span class="hs-identifier hs-type">IsMerkleLogEntry</span></a></span><span> </span><span class="annot"><a href="Chainweb.MerkleUniverse.html#ChainwebHashTag"><span class="hs-identifier hs-type">ChainwebHashTag</span></a></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockTransactionsHash"><span class="hs-identifier hs-type">BlockTransactionsHash</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-133"></span><span>    </span><span class="hs-keyword">type</span><span> </span><span id="Tag"><span class="annot"><a href="Chainweb.Crypto.MerkleLog.html#Tag"><span class="hs-identifier hs-var">Tag</span></a></span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockTransactionsHash"><span class="hs-identifier hs-type">BlockTransactionsHash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Chainweb.MerkleUniverse.html#BlockTransactionsHashTag"><span class="hs-identifier hs-type">BlockTransactionsHashTag</span></a></span><span>
</span><span id="line-134"></span><span>    </span><span id="local-6989586621681470006"><span class="annot"><span class="annottext">toMerkleNode :: BlockTransactionsHash
-&gt; MerkleNodeType (HashAlg ChainwebHashTag) ByteString
</span><a href="Chainweb.Crypto.MerkleLog.html#toMerkleNode"><span class="hs-identifier hs-var hs-var hs-var hs-var">toMerkleNode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockTransactionsHash
-&gt; MerkleNodeType (HashAlg ChainwebHashTag) ByteString
forall a alg x.
Coercible a (MerkleRoot alg) =&gt;
a -&gt; MerkleNodeType alg x
</span><a href="Chainweb.Crypto.MerkleLog.html#encodeMerkleTreeNode"><span class="hs-identifier hs-var">encodeMerkleTreeNode</span></a></span><span>
</span><span id="line-135"></span><span>    </span><span id="local-6989586621681470003"><span class="annot"><span class="annottext">fromMerkleNode :: MerkleNodeType (HashAlg ChainwebHashTag) ByteString
-&gt; Either SomeException BlockTransactionsHash
</span><a href="Chainweb.Crypto.MerkleLog.html#fromMerkleNode"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromMerkleNode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MerkleNodeType (HashAlg ChainwebHashTag) ByteString
-&gt; Either SomeException BlockTransactionsHash
forall (m :: * -&gt; *) alg a x.
(MonadThrow m, Coercible (MerkleRoot alg) a) =&gt;
MerkleNodeType alg x -&gt; m a
</span><a href="Chainweb.Crypto.MerkleLog.html#decodeMerkleTreeNode"><span class="hs-identifier hs-var">decodeMerkleTreeNode</span></a></span><span>
</span><span id="line-136"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Chainweb.Crypto.MerkleLog.html#toMerkleNode"><span class="hs-pragma hs-type">toMerkleNode</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-137"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Chainweb.Crypto.MerkleLog.html#fromMerkleNode"><span class="hs-pragma hs-type">fromMerkleNode</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-138"></span><span>
</span><span id="line-139"></span><span class="hs-comment">-- -------------------------------------------------------------------------- --</span><span>
</span><span id="line-140"></span><span class="hs-comment">-- Block Outputs Hash</span><span>
</span><span id="line-141"></span><span>
</span><span id="line-142"></span><span id="local-6989586621681469999"><span id="local-6989586621681470000"></span></span><span class="hs-keyword">newtype</span><span> </span><span id="BlockOutputsHash"><span class="annot"><a href="Chainweb.Payload.html#BlockOutputsHash"><span class="hs-identifier hs-var">BlockOutputsHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="BlockOutputsHash"><span class="annot"><a href="Chainweb.Payload.html#BlockOutputsHash"><span class="hs-identifier hs-var">BlockOutputsHash</span></a></span></span><span> </span><span class="annot"><a href="Chainweb.MerkleLogHash.html#MerkleLogHash"><span class="hs-identifier hs-type">MerkleLogHash</span></a></span><span>
</span><span id="line-143"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681469992"><span id="local-6989586621681469994"><span id="local-6989586621681469996"><span class="annot"><span class="annottext">Int -&gt; BlockOutputsHash -&gt; ShowS
[BlockOutputsHash] -&gt; ShowS
BlockOutputsHash -&gt; String
(Int -&gt; BlockOutputsHash -&gt; ShowS)
-&gt; (BlockOutputsHash -&gt; String)
-&gt; ([BlockOutputsHash] -&gt; ShowS)
-&gt; Show BlockOutputsHash
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [BlockOutputsHash] -&gt; ShowS
$cshowList :: [BlockOutputsHash] -&gt; ShowS
show :: BlockOutputsHash -&gt; String
$cshow :: BlockOutputsHash -&gt; String
showsPrec :: Int -&gt; BlockOutputsHash -&gt; ShowS
$cshowsPrec :: Int -&gt; BlockOutputsHash -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681469988"><span id="local-6989586621681469990"><span class="annot"><span class="annottext">BlockOutputsHash -&gt; BlockOutputsHash -&gt; Bool
(BlockOutputsHash -&gt; BlockOutputsHash -&gt; Bool)
-&gt; (BlockOutputsHash -&gt; BlockOutputsHash -&gt; Bool)
-&gt; Eq BlockOutputsHash
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: BlockOutputsHash -&gt; BlockOutputsHash -&gt; Bool
$c/= :: BlockOutputsHash -&gt; BlockOutputsHash -&gt; Bool
== :: BlockOutputsHash -&gt; BlockOutputsHash -&gt; Bool
$c== :: BlockOutputsHash -&gt; BlockOutputsHash -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681469973"><span id="local-6989586621681469975"><span id="local-6989586621681469977"><span id="local-6989586621681469979"><span id="local-6989586621681469981"><span id="local-6989586621681469983"><span id="local-6989586621681469985"><span class="annot"><span class="annottext">Eq BlockOutputsHash
Eq BlockOutputsHash =&gt;
(BlockOutputsHash -&gt; BlockOutputsHash -&gt; Ordering)
-&gt; (BlockOutputsHash -&gt; BlockOutputsHash -&gt; Bool)
-&gt; (BlockOutputsHash -&gt; BlockOutputsHash -&gt; Bool)
-&gt; (BlockOutputsHash -&gt; BlockOutputsHash -&gt; Bool)
-&gt; (BlockOutputsHash -&gt; BlockOutputsHash -&gt; Bool)
-&gt; (BlockOutputsHash -&gt; BlockOutputsHash -&gt; BlockOutputsHash)
-&gt; (BlockOutputsHash -&gt; BlockOutputsHash -&gt; BlockOutputsHash)
-&gt; Ord BlockOutputsHash
BlockOutputsHash -&gt; BlockOutputsHash -&gt; Bool
BlockOutputsHash -&gt; BlockOutputsHash -&gt; Ordering
BlockOutputsHash -&gt; BlockOutputsHash -&gt; BlockOutputsHash
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: BlockOutputsHash -&gt; BlockOutputsHash -&gt; BlockOutputsHash
$cmin :: BlockOutputsHash -&gt; BlockOutputsHash -&gt; BlockOutputsHash
max :: BlockOutputsHash -&gt; BlockOutputsHash -&gt; BlockOutputsHash
$cmax :: BlockOutputsHash -&gt; BlockOutputsHash -&gt; BlockOutputsHash
&gt;= :: BlockOutputsHash -&gt; BlockOutputsHash -&gt; Bool
$c&gt;= :: BlockOutputsHash -&gt; BlockOutputsHash -&gt; Bool
&gt; :: BlockOutputsHash -&gt; BlockOutputsHash -&gt; Bool
$c&gt; :: BlockOutputsHash -&gt; BlockOutputsHash -&gt; Bool
&lt;= :: BlockOutputsHash -&gt; BlockOutputsHash -&gt; Bool
$c&lt;= :: BlockOutputsHash -&gt; BlockOutputsHash -&gt; Bool
&lt; :: BlockOutputsHash -&gt; BlockOutputsHash -&gt; Bool
$c&lt; :: BlockOutputsHash -&gt; BlockOutputsHash -&gt; Bool
compare :: BlockOutputsHash -&gt; BlockOutputsHash -&gt; Ordering
$ccompare :: BlockOutputsHash -&gt; BlockOutputsHash -&gt; Ordering
$cp1Ord :: Eq BlockOutputsHash
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. BlockOutputsHash -&gt; Rep BlockOutputsHash x)
-&gt; (forall x. Rep BlockOutputsHash x -&gt; BlockOutputsHash)
-&gt; Generic BlockOutputsHash
forall x. Rep BlockOutputsHash x -&gt; BlockOutputsHash
forall x. BlockOutputsHash -&gt; Rep BlockOutputsHash x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep BlockOutputsHash x -&gt; BlockOutputsHash
$cfrom :: forall x. BlockOutputsHash -&gt; Rep BlockOutputsHash x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-144"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681469969"><span class="annot"><span class="annottext">BlockOutputsHash -&gt; ()
(BlockOutputsHash -&gt; ()) -&gt; NFData BlockOutputsHash
forall a. (a -&gt; ()) -&gt; NFData a
rnf :: BlockOutputsHash -&gt; ()
$crnf :: BlockOutputsHash -&gt; ()
</span><a href="#local-6989586621681469969"><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-145"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681469963"><span id="local-6989586621681469965"><span id="local-6989586621681469967"><span class="annot"><span class="annottext">BlockOutputsHash -&gt; Int
BlockOutputsHash -&gt; Ptr p -&gt; IO ()
BlockOutputsHash -&gt; (Ptr p -&gt; IO a) -&gt; IO a
(BlockOutputsHash -&gt; Int)
-&gt; (forall p a. BlockOutputsHash -&gt; (Ptr p -&gt; IO a) -&gt; IO a)
-&gt; (forall p. BlockOutputsHash -&gt; Ptr p -&gt; IO ())
-&gt; ByteArrayAccess BlockOutputsHash
forall p. BlockOutputsHash -&gt; Ptr p -&gt; IO ()
forall ba.
(ba -&gt; Int)
-&gt; (forall p a. ba -&gt; (Ptr p -&gt; IO a) -&gt; IO a)
-&gt; (forall p. ba -&gt; Ptr p -&gt; IO ())
-&gt; ByteArrayAccess ba
forall p a. BlockOutputsHash -&gt; (Ptr p -&gt; IO a) -&gt; IO a
copyByteArrayToPtr :: BlockOutputsHash -&gt; Ptr p -&gt; IO ()
$ccopyByteArrayToPtr :: forall p. BlockOutputsHash -&gt; Ptr p -&gt; IO ()
withByteArray :: BlockOutputsHash -&gt; (Ptr p -&gt; IO a) -&gt; IO a
$cwithByteArray :: forall p a. BlockOutputsHash -&gt; (Ptr p -&gt; IO a) -&gt; IO a
length :: BlockOutputsHash -&gt; Int
$clength :: BlockOutputsHash -&gt; Int
</span><a href="#local-6989586621681469963"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">BA.ByteArrayAccess</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-146"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681469959"><span id="local-6989586621681469961"><span class="annot"><span class="annottext">Int -&gt; BlockOutputsHash -&gt; Int
BlockOutputsHash -&gt; Int
(Int -&gt; BlockOutputsHash -&gt; Int)
-&gt; (BlockOutputsHash -&gt; Int) -&gt; Hashable BlockOutputsHash
forall a. (Int -&gt; a -&gt; Int) -&gt; (a -&gt; Int) -&gt; Hashable a
hash :: BlockOutputsHash -&gt; Int
$chash :: BlockOutputsHash -&gt; Int
hashWithSalt :: Int -&gt; BlockOutputsHash -&gt; Int
$chashWithSalt :: Int -&gt; BlockOutputsHash -&gt; Int
</span><a href="#local-6989586621681469959"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Hashable</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681469951"><span id="local-6989586621681469953"><span id="local-6989586621681469955"><span id="local-6989586621681469957"><span class="annot"><span class="annottext">[BlockOutputsHash] -&gt; Encoding
[BlockOutputsHash] -&gt; Value
BlockOutputsHash -&gt; Encoding
BlockOutputsHash -&gt; Value
(BlockOutputsHash -&gt; Value)
-&gt; (BlockOutputsHash -&gt; Encoding)
-&gt; ([BlockOutputsHash] -&gt; Value)
-&gt; ([BlockOutputsHash] -&gt; Encoding)
-&gt; ToJSON BlockOutputsHash
forall a.
(a -&gt; Value)
-&gt; (a -&gt; Encoding)
-&gt; ([a] -&gt; Value)
-&gt; ([a] -&gt; Encoding)
-&gt; ToJSON a
toEncodingList :: [BlockOutputsHash] -&gt; Encoding
$ctoEncodingList :: [BlockOutputsHash] -&gt; Encoding
toJSONList :: [BlockOutputsHash] -&gt; Value
$ctoJSONList :: [BlockOutputsHash] -&gt; Value
toEncoding :: BlockOutputsHash -&gt; Encoding
$ctoEncoding :: BlockOutputsHash -&gt; Encoding
toJSON :: BlockOutputsHash -&gt; Value
$ctoJSON :: BlockOutputsHash -&gt; Value
</span><a href="#local-6989586621681469951"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">ToJSON</span></a></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681469947"><span id="local-6989586621681469949"><span class="annot"><span class="annottext">Value -&gt; Parser [BlockOutputsHash]
Value -&gt; Parser BlockOutputsHash
(Value -&gt; Parser BlockOutputsHash)
-&gt; (Value -&gt; Parser [BlockOutputsHash])
-&gt; FromJSON BlockOutputsHash
forall a.
(Value -&gt; Parser a) -&gt; (Value -&gt; Parser [a]) -&gt; FromJSON a
parseJSONList :: Value -&gt; Parser [BlockOutputsHash]
$cparseJSONList :: Value -&gt; Parser [BlockOutputsHash]
parseJSON :: Value -&gt; Parser BlockOutputsHash
$cparseJSON :: Value -&gt; Parser BlockOutputsHash
</span><a href="#local-6989586621681469947"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">FromJSON</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-147"></span><span>
</span><span id="line-148"></span><span id="local-6989586621681469946"><span class="annot"><a href="Chainweb.Payload.html#encodeBlockOutputsHash"><span class="hs-identifier hs-type">encodeBlockOutputsHash</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadPut</span></span><span> </span><span class="annot"><a href="#local-6989586621681469946"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockOutputsHash"><span class="hs-identifier hs-type">BlockOutputsHash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681469946"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-149"></span><span id="encodeBlockOutputsHash"><span class="annot"><span class="annottext">encodeBlockOutputsHash :: BlockOutputsHash -&gt; m ()
</span><a href="Chainweb.Payload.html#encodeBlockOutputsHash"><span class="hs-identifier hs-var hs-var">encodeBlockOutputsHash</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Chainweb.Payload.html#BlockOutputsHash"><span class="hs-identifier hs-type">BlockOutputsHash</span></a></span><span> </span><span id="local-6989586621681469945"><span class="annot"><span class="annottext">w :: MerkleLogHash
</span><a href="#local-6989586621681469945"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MerkleLogHash -&gt; m ()
forall (m :: * -&gt; *). MonadPut m =&gt; MerkleLogHash -&gt; m ()
</span><a href="Chainweb.MerkleLogHash.html#encodeMerkleLogHash"><span class="hs-identifier hs-var">encodeMerkleLogHash</span></a></span><span> </span><span class="annot"><span class="annottext">MerkleLogHash
</span><a href="#local-6989586621681469945"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-150"></span><span>
</span><span id="line-151"></span><span id="local-6989586621681469944"><span class="annot"><a href="Chainweb.Payload.html#decodeBlockOutputsHash"><span class="hs-identifier hs-type">decodeBlockOutputsHash</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadGet</span></span><span> </span><span class="annot"><a href="#local-6989586621681469944"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681469944"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockOutputsHash"><span class="hs-identifier hs-type">BlockOutputsHash</span></a></span></span><span>
</span><span id="line-152"></span><span id="decodeBlockOutputsHash"><span class="annot"><span class="annottext">decodeBlockOutputsHash :: m BlockOutputsHash
</span><a href="Chainweb.Payload.html#decodeBlockOutputsHash"><span class="hs-identifier hs-var hs-var">decodeBlockOutputsHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MerkleLogHash -&gt; BlockOutputsHash
</span><a href="Chainweb.Payload.html#BlockOutputsHash"><span class="hs-identifier hs-var">BlockOutputsHash</span></a></span><span> </span><span class="annot"><span class="annottext">(MerkleLogHash -&gt; BlockOutputsHash)
-&gt; m MerkleLogHash -&gt; m BlockOutputsHash
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">&lt;$!&gt;</span></span><span> </span><span class="annot"><span class="annottext">m MerkleLogHash
forall (m :: * -&gt; *). MonadGet m =&gt; m MerkleLogHash
</span><a href="Chainweb.MerkleLogHash.html#decodeMerkleLogHash"><span class="hs-identifier hs-var">decodeMerkleLogHash</span></a></span><span>
</span><span id="line-153"></span><span>
</span><span id="line-154"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Chainweb.Crypto.MerkleLog.html#IsMerkleLogEntry"><span class="hs-identifier hs-type">IsMerkleLogEntry</span></a></span><span> </span><span class="annot"><a href="Chainweb.MerkleUniverse.html#ChainwebHashTag"><span class="hs-identifier hs-type">ChainwebHashTag</span></a></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockOutputsHash"><span class="hs-identifier hs-type">BlockOutputsHash</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-155"></span><span>    </span><span class="hs-keyword">type</span><span> </span><span id="Tag"><span class="annot"><a href="Chainweb.Crypto.MerkleLog.html#Tag"><span class="hs-identifier hs-var">Tag</span></a></span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockOutputsHash"><span class="hs-identifier hs-type">BlockOutputsHash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Chainweb.MerkleUniverse.html#BlockOutputsHashTag"><span class="hs-identifier hs-type">BlockOutputsHashTag</span></a></span><span>
</span><span id="line-156"></span><span>    </span><span id="local-6989586621681469939"><span class="annot"><span class="annottext">toMerkleNode :: BlockOutputsHash
-&gt; MerkleNodeType (HashAlg ChainwebHashTag) ByteString
</span><a href="#local-6989586621681469939"><span class="hs-identifier hs-var hs-var hs-var hs-var">toMerkleNode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockOutputsHash
-&gt; MerkleNodeType (HashAlg ChainwebHashTag) ByteString
forall a alg x.
Coercible a (MerkleRoot alg) =&gt;
a -&gt; MerkleNodeType alg x
</span><a href="Chainweb.Crypto.MerkleLog.html#encodeMerkleTreeNode"><span class="hs-identifier hs-var">encodeMerkleTreeNode</span></a></span><span>
</span><span id="line-157"></span><span>    </span><span id="local-6989586621681469938"><span class="annot"><span class="annottext">fromMerkleNode :: MerkleNodeType (HashAlg ChainwebHashTag) ByteString
-&gt; Either SomeException BlockOutputsHash
</span><a href="#local-6989586621681469938"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromMerkleNode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MerkleNodeType (HashAlg ChainwebHashTag) ByteString
-&gt; Either SomeException BlockOutputsHash
forall (m :: * -&gt; *) alg a x.
(MonadThrow m, Coercible (MerkleRoot alg) a) =&gt;
MerkleNodeType alg x -&gt; m a
</span><a href="Chainweb.Crypto.MerkleLog.html#decodeMerkleTreeNode"><span class="hs-identifier hs-var">decodeMerkleTreeNode</span></a></span><span>
</span><span id="line-158"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Chainweb.Crypto.MerkleLog.html#toMerkleNode"><span class="hs-pragma hs-type">toMerkleNode</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-159"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Chainweb.Crypto.MerkleLog.html#fromMerkleNode"><span class="hs-pragma hs-type">fromMerkleNode</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-160"></span><span>
</span><span id="line-161"></span><span class="hs-comment">-- -------------------------------------------------------------------------- --</span><span>
</span><span id="line-162"></span><span class="hs-comment">-- BlockPayloadHash</span><span>
</span><span id="line-163"></span><span>
</span><span id="line-164"></span><span id="local-6989586621681469936"><span id="local-6989586621681469937"></span></span><span class="hs-keyword">newtype</span><span> </span><span id="BlockPayloadHash"><span class="annot"><a href="Chainweb.Payload.html#BlockPayloadHash"><span class="hs-identifier hs-var">BlockPayloadHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="BlockPayloadHash"><span class="annot"><a href="Chainweb.Payload.html#BlockPayloadHash"><span class="hs-identifier hs-var">BlockPayloadHash</span></a></span></span><span> </span><span class="annot"><a href="Chainweb.MerkleLogHash.html#MerkleLogHash"><span class="hs-identifier hs-type">MerkleLogHash</span></a></span><span>
</span><span id="line-165"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681469929"><span id="local-6989586621681469931"><span id="local-6989586621681469933"><span class="annot"><span class="annottext">Int -&gt; BlockPayloadHash -&gt; ShowS
[BlockPayloadHash] -&gt; ShowS
BlockPayloadHash -&gt; String
(Int -&gt; BlockPayloadHash -&gt; ShowS)
-&gt; (BlockPayloadHash -&gt; String)
-&gt; ([BlockPayloadHash] -&gt; ShowS)
-&gt; Show BlockPayloadHash
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [BlockPayloadHash] -&gt; ShowS
$cshowList :: [BlockPayloadHash] -&gt; ShowS
show :: BlockPayloadHash -&gt; String
$cshow :: BlockPayloadHash -&gt; String
showsPrec :: Int -&gt; BlockPayloadHash -&gt; ShowS
$cshowsPrec :: Int -&gt; BlockPayloadHash -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681469925"><span id="local-6989586621681469927"><span class="annot"><span class="annottext">BlockPayloadHash -&gt; BlockPayloadHash -&gt; Bool
(BlockPayloadHash -&gt; BlockPayloadHash -&gt; Bool)
-&gt; (BlockPayloadHash -&gt; BlockPayloadHash -&gt; Bool)
-&gt; Eq BlockPayloadHash
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: BlockPayloadHash -&gt; BlockPayloadHash -&gt; Bool
$c/= :: BlockPayloadHash -&gt; BlockPayloadHash -&gt; Bool
== :: BlockPayloadHash -&gt; BlockPayloadHash -&gt; Bool
$c== :: BlockPayloadHash -&gt; BlockPayloadHash -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681469910"><span id="local-6989586621681469912"><span id="local-6989586621681469914"><span id="local-6989586621681469916"><span id="local-6989586621681469918"><span id="local-6989586621681469920"><span id="local-6989586621681469922"><span class="annot"><span class="annottext">Eq BlockPayloadHash
Eq BlockPayloadHash =&gt;
(BlockPayloadHash -&gt; BlockPayloadHash -&gt; Ordering)
-&gt; (BlockPayloadHash -&gt; BlockPayloadHash -&gt; Bool)
-&gt; (BlockPayloadHash -&gt; BlockPayloadHash -&gt; Bool)
-&gt; (BlockPayloadHash -&gt; BlockPayloadHash -&gt; Bool)
-&gt; (BlockPayloadHash -&gt; BlockPayloadHash -&gt; Bool)
-&gt; (BlockPayloadHash -&gt; BlockPayloadHash -&gt; BlockPayloadHash)
-&gt; (BlockPayloadHash -&gt; BlockPayloadHash -&gt; BlockPayloadHash)
-&gt; Ord BlockPayloadHash
BlockPayloadHash -&gt; BlockPayloadHash -&gt; Bool
BlockPayloadHash -&gt; BlockPayloadHash -&gt; Ordering
BlockPayloadHash -&gt; BlockPayloadHash -&gt; BlockPayloadHash
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: BlockPayloadHash -&gt; BlockPayloadHash -&gt; BlockPayloadHash
$cmin :: BlockPayloadHash -&gt; BlockPayloadHash -&gt; BlockPayloadHash
max :: BlockPayloadHash -&gt; BlockPayloadHash -&gt; BlockPayloadHash
$cmax :: BlockPayloadHash -&gt; BlockPayloadHash -&gt; BlockPayloadHash
&gt;= :: BlockPayloadHash -&gt; BlockPayloadHash -&gt; Bool
$c&gt;= :: BlockPayloadHash -&gt; BlockPayloadHash -&gt; Bool
&gt; :: BlockPayloadHash -&gt; BlockPayloadHash -&gt; Bool
$c&gt; :: BlockPayloadHash -&gt; BlockPayloadHash -&gt; Bool
&lt;= :: BlockPayloadHash -&gt; BlockPayloadHash -&gt; Bool
$c&lt;= :: BlockPayloadHash -&gt; BlockPayloadHash -&gt; Bool
&lt; :: BlockPayloadHash -&gt; BlockPayloadHash -&gt; Bool
$c&lt; :: BlockPayloadHash -&gt; BlockPayloadHash -&gt; Bool
compare :: BlockPayloadHash -&gt; BlockPayloadHash -&gt; Ordering
$ccompare :: BlockPayloadHash -&gt; BlockPayloadHash -&gt; Ordering
$cp1Ord :: Eq BlockPayloadHash
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. BlockPayloadHash -&gt; Rep BlockPayloadHash x)
-&gt; (forall x. Rep BlockPayloadHash x -&gt; BlockPayloadHash)
-&gt; Generic BlockPayloadHash
forall x. Rep BlockPayloadHash x -&gt; BlockPayloadHash
forall x. BlockPayloadHash -&gt; Rep BlockPayloadHash x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep BlockPayloadHash x -&gt; BlockPayloadHash
$cfrom :: forall x. BlockPayloadHash -&gt; Rep BlockPayloadHash x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-166"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681469906"><span class="annot"><span class="annottext">BlockPayloadHash -&gt; ()
(BlockPayloadHash -&gt; ()) -&gt; NFData BlockPayloadHash
forall a. (a -&gt; ()) -&gt; NFData a
rnf :: BlockPayloadHash -&gt; ()
$crnf :: BlockPayloadHash -&gt; ()
</span><a href="#local-6989586621681469906"><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-167"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681469900"><span id="local-6989586621681469902"><span id="local-6989586621681469904"><span class="annot"><span class="annottext">BlockPayloadHash -&gt; Int
BlockPayloadHash -&gt; Ptr p -&gt; IO ()
BlockPayloadHash -&gt; (Ptr p -&gt; IO a) -&gt; IO a
(BlockPayloadHash -&gt; Int)
-&gt; (forall p a. BlockPayloadHash -&gt; (Ptr p -&gt; IO a) -&gt; IO a)
-&gt; (forall p. BlockPayloadHash -&gt; Ptr p -&gt; IO ())
-&gt; ByteArrayAccess BlockPayloadHash
forall p. BlockPayloadHash -&gt; Ptr p -&gt; IO ()
forall ba.
(ba -&gt; Int)
-&gt; (forall p a. ba -&gt; (Ptr p -&gt; IO a) -&gt; IO a)
-&gt; (forall p. ba -&gt; Ptr p -&gt; IO ())
-&gt; ByteArrayAccess ba
forall p a. BlockPayloadHash -&gt; (Ptr p -&gt; IO a) -&gt; IO a
copyByteArrayToPtr :: BlockPayloadHash -&gt; Ptr p -&gt; IO ()
$ccopyByteArrayToPtr :: forall p. BlockPayloadHash -&gt; Ptr p -&gt; IO ()
withByteArray :: BlockPayloadHash -&gt; (Ptr p -&gt; IO a) -&gt; IO a
$cwithByteArray :: forall p a. BlockPayloadHash -&gt; (Ptr p -&gt; IO a) -&gt; IO a
length :: BlockPayloadHash -&gt; Int
$clength :: BlockPayloadHash -&gt; Int
</span><a href="#local-6989586621681469900"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">BA.ByteArrayAccess</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-168"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681469896"><span id="local-6989586621681469898"><span class="annot"><span class="annottext">Int -&gt; BlockPayloadHash -&gt; Int
BlockPayloadHash -&gt; Int
(Int -&gt; BlockPayloadHash -&gt; Int)
-&gt; (BlockPayloadHash -&gt; Int) -&gt; Hashable BlockPayloadHash
forall a. (Int -&gt; a -&gt; Int) -&gt; (a -&gt; Int) -&gt; Hashable a
hash :: BlockPayloadHash -&gt; Int
$chash :: BlockPayloadHash -&gt; Int
hashWithSalt :: Int -&gt; BlockPayloadHash -&gt; Int
$chashWithSalt :: Int -&gt; BlockPayloadHash -&gt; Int
</span><a href="#local-6989586621681469896"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Hashable</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681469888"><span id="local-6989586621681469890"><span id="local-6989586621681469892"><span id="local-6989586621681469894"><span class="annot"><span class="annottext">[BlockPayloadHash] -&gt; Encoding
[BlockPayloadHash] -&gt; Value
BlockPayloadHash -&gt; Encoding
BlockPayloadHash -&gt; Value
(BlockPayloadHash -&gt; Value)
-&gt; (BlockPayloadHash -&gt; Encoding)
-&gt; ([BlockPayloadHash] -&gt; Value)
-&gt; ([BlockPayloadHash] -&gt; Encoding)
-&gt; ToJSON BlockPayloadHash
forall a.
(a -&gt; Value)
-&gt; (a -&gt; Encoding)
-&gt; ([a] -&gt; Value)
-&gt; ([a] -&gt; Encoding)
-&gt; ToJSON a
toEncodingList :: [BlockPayloadHash] -&gt; Encoding
$ctoEncodingList :: [BlockPayloadHash] -&gt; Encoding
toJSONList :: [BlockPayloadHash] -&gt; Value
$ctoJSONList :: [BlockPayloadHash] -&gt; Value
toEncoding :: BlockPayloadHash -&gt; Encoding
$ctoEncoding :: BlockPayloadHash -&gt; Encoding
toJSON :: BlockPayloadHash -&gt; Value
$ctoJSON :: BlockPayloadHash -&gt; Value
</span><a href="#local-6989586621681469888"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">ToJSON</span></a></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681469884"><span id="local-6989586621681469886"><span class="annot"><span class="annottext">Value -&gt; Parser [BlockPayloadHash]
Value -&gt; Parser BlockPayloadHash
(Value -&gt; Parser BlockPayloadHash)
-&gt; (Value -&gt; Parser [BlockPayloadHash])
-&gt; FromJSON BlockPayloadHash
forall a.
(Value -&gt; Parser a) -&gt; (Value -&gt; Parser [a]) -&gt; FromJSON a
parseJSONList :: Value -&gt; Parser [BlockPayloadHash]
$cparseJSONList :: Value -&gt; Parser [BlockPayloadHash]
parseJSON :: Value -&gt; Parser BlockPayloadHash
$cparseJSON :: Value -&gt; Parser BlockPayloadHash
</span><a href="#local-6989586621681469884"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">FromJSON</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-169"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681469880"><span id="local-6989586621681469882"><span class="annot"><span class="annottext">ToJSONKeyFunction [BlockPayloadHash]
ToJSONKeyFunction BlockPayloadHash
ToJSONKeyFunction BlockPayloadHash
-&gt; ToJSONKeyFunction [BlockPayloadHash]
-&gt; ToJSONKey BlockPayloadHash
forall a.
ToJSONKeyFunction a -&gt; ToJSONKeyFunction [a] -&gt; ToJSONKey a
toJSONKeyList :: ToJSONKeyFunction [BlockPayloadHash]
$ctoJSONKeyList :: ToJSONKeyFunction [BlockPayloadHash]
toJSONKey :: ToJSONKeyFunction BlockPayloadHash
$ctoJSONKey :: ToJSONKeyFunction BlockPayloadHash
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">ToJSONKey</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681469875"><span id="local-6989586621681469877"><span class="annot"><span class="annottext">FromJSONKeyFunction [BlockPayloadHash]
FromJSONKeyFunction BlockPayloadHash
FromJSONKeyFunction BlockPayloadHash
-&gt; FromJSONKeyFunction [BlockPayloadHash]
-&gt; FromJSONKey BlockPayloadHash
forall a.
FromJSONKeyFunction a -&gt; FromJSONKeyFunction [a] -&gt; FromJSONKey a
fromJSONKeyList :: FromJSONKeyFunction [BlockPayloadHash]
$cfromJSONKeyList :: FromJSONKeyFunction [BlockPayloadHash]
fromJSONKey :: FromJSONKeyFunction BlockPayloadHash
$cfromJSONKey :: FromJSONKeyFunction BlockPayloadHash
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">FromJSONKey</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-170"></span><span>
</span><span id="line-171"></span><span id="local-6989586621681469873"><span class="annot"><a href="Chainweb.Payload.html#encodeBlockPayloadHash"><span class="hs-identifier hs-type">encodeBlockPayloadHash</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadPut</span></span><span> </span><span class="annot"><a href="#local-6989586621681469873"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockPayloadHash"><span class="hs-identifier hs-type">BlockPayloadHash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681469873"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-172"></span><span id="encodeBlockPayloadHash"><span class="annot"><span class="annottext">encodeBlockPayloadHash :: BlockPayloadHash -&gt; m ()
</span><a href="Chainweb.Payload.html#encodeBlockPayloadHash"><span class="hs-identifier hs-var hs-var">encodeBlockPayloadHash</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Chainweb.Payload.html#BlockPayloadHash"><span class="hs-identifier hs-type">BlockPayloadHash</span></a></span><span> </span><span id="local-6989586621681469872"><span class="annot"><span class="annottext">w :: MerkleLogHash
</span><a href="#local-6989586621681469872"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MerkleLogHash -&gt; m ()
forall (m :: * -&gt; *). MonadPut m =&gt; MerkleLogHash -&gt; m ()
</span><a href="Chainweb.MerkleLogHash.html#encodeMerkleLogHash"><span class="hs-identifier hs-var">encodeMerkleLogHash</span></a></span><span> </span><span class="annot"><span class="annottext">MerkleLogHash
</span><a href="#local-6989586621681469872"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-173"></span><span>
</span><span id="line-174"></span><span id="local-6989586621681469871"><span class="annot"><a href="Chainweb.Payload.html#decodeBlockPayloadHash"><span class="hs-identifier hs-type">decodeBlockPayloadHash</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadGet</span></span><span> </span><span class="annot"><a href="#local-6989586621681469871"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681469871"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockPayloadHash"><span class="hs-identifier hs-type">BlockPayloadHash</span></a></span></span><span>
</span><span id="line-175"></span><span id="decodeBlockPayloadHash"><span class="annot"><span class="annottext">decodeBlockPayloadHash :: m BlockPayloadHash
</span><a href="Chainweb.Payload.html#decodeBlockPayloadHash"><span class="hs-identifier hs-var hs-var">decodeBlockPayloadHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MerkleLogHash -&gt; BlockPayloadHash
</span><a href="Chainweb.Payload.html#BlockPayloadHash"><span class="hs-identifier hs-var">BlockPayloadHash</span></a></span><span> </span><span class="annot"><span class="annottext">(MerkleLogHash -&gt; BlockPayloadHash)
-&gt; m MerkleLogHash -&gt; m BlockPayloadHash
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">&lt;$!&gt;</span></span><span> </span><span class="annot"><span class="annottext">m MerkleLogHash
forall (m :: * -&gt; *). MonadGet m =&gt; m MerkleLogHash
</span><a href="Chainweb.MerkleLogHash.html#decodeMerkleLogHash"><span class="hs-identifier hs-var">decodeMerkleLogHash</span></a></span><span>
</span><span id="line-176"></span><span>
</span><span id="line-177"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Chainweb.Crypto.MerkleLog.html#IsMerkleLogEntry"><span class="hs-identifier hs-type">IsMerkleLogEntry</span></a></span><span> </span><span class="annot"><a href="Chainweb.MerkleUniverse.html#ChainwebHashTag"><span class="hs-identifier hs-type">ChainwebHashTag</span></a></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockPayloadHash"><span class="hs-identifier hs-type">BlockPayloadHash</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-178"></span><span>    </span><span class="hs-keyword">type</span><span> </span><span id="Tag"><span class="annot"><a href="Chainweb.Crypto.MerkleLog.html#Tag"><span class="hs-identifier hs-var">Tag</span></a></span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockPayloadHash"><span class="hs-identifier hs-type">BlockPayloadHash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Chainweb.MerkleUniverse.html#BlockPayloadHashTag"><span class="hs-identifier hs-type">BlockPayloadHashTag</span></a></span><span>
</span><span id="line-179"></span><span>    </span><span id="local-6989586621681469866"><span class="annot"><span class="annottext">toMerkleNode :: BlockPayloadHash
-&gt; MerkleNodeType (HashAlg ChainwebHashTag) ByteString
</span><a href="#local-6989586621681469866"><span class="hs-identifier hs-var hs-var hs-var hs-var">toMerkleNode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockPayloadHash
-&gt; MerkleNodeType (HashAlg ChainwebHashTag) ByteString
forall a alg x.
Coercible a (MerkleRoot alg) =&gt;
a -&gt; MerkleNodeType alg x
</span><a href="Chainweb.Crypto.MerkleLog.html#encodeMerkleTreeNode"><span class="hs-identifier hs-var">encodeMerkleTreeNode</span></a></span><span>
</span><span id="line-180"></span><span>    </span><span id="local-6989586621681469865"><span class="annot"><span class="annottext">fromMerkleNode :: MerkleNodeType (HashAlg ChainwebHashTag) ByteString
-&gt; Either SomeException BlockPayloadHash
</span><a href="#local-6989586621681469865"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromMerkleNode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MerkleNodeType (HashAlg ChainwebHashTag) ByteString
-&gt; Either SomeException BlockPayloadHash
forall (m :: * -&gt; *) alg a x.
(MonadThrow m, Coercible (MerkleRoot alg) a) =&gt;
MerkleNodeType alg x -&gt; m a
</span><a href="Chainweb.Crypto.MerkleLog.html#decodeMerkleTreeNode"><span class="hs-identifier hs-var">decodeMerkleTreeNode</span></a></span><span>
</span><span id="line-181"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Chainweb.Crypto.MerkleLog.html#toMerkleNode"><span class="hs-pragma hs-type">toMerkleNode</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-182"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Chainweb.Crypto.MerkleLog.html#fromMerkleNode"><span class="hs-pragma hs-type">fromMerkleNode</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-183"></span><span>
</span><span id="line-184"></span><span class="hs-comment">-- -------------------------------------------------------------------------- --</span><span>
</span><span id="line-185"></span><span class="hs-comment">-- Transaction</span><span>
</span><span id="line-186"></span><span>
</span><span id="line-187"></span><span class="hs-comment">-- | An encoded transaction, including all of its inputs.</span><span>
</span><span id="line-188"></span><span class="hs-comment">--</span><span>
</span><span id="line-189"></span><span class="hs-comment">-- We don't care about the encoding of a transaction. The semantics of a</span><span>
</span><span id="line-190"></span><span class="hs-comment">-- transaction is only known to pact.</span><span>
</span><span id="line-191"></span><span class="hs-comment">--</span><span>
</span><span id="line-192"></span><span id="local-6989586621681469863"><span id="local-6989586621681469864"></span></span><span class="hs-keyword">newtype</span><span> </span><span id="Transaction"><span class="annot"><a href="Chainweb.Payload.html#Transaction"><span class="hs-identifier hs-var">Transaction</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Transaction"><span class="annot"><a href="Chainweb.Payload.html#Transaction"><span class="hs-identifier hs-var">Transaction</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="_transactionBytes"><span class="annot"><span class="annottext">Transaction -&gt; ByteString
</span><a href="Chainweb.Payload.html#_transactionBytes"><span class="hs-identifier hs-var hs-var">_transactionBytes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">B.ByteString</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-193"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681469857"><span id="local-6989586621681469859"><span class="annot"><span class="annottext">Transaction -&gt; Transaction -&gt; Bool
(Transaction -&gt; Transaction -&gt; Bool)
-&gt; (Transaction -&gt; Transaction -&gt; Bool) -&gt; Eq Transaction
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: Transaction -&gt; Transaction -&gt; Bool
$c/= :: Transaction -&gt; Transaction -&gt; Bool
== :: Transaction -&gt; Transaction -&gt; Bool
$c== :: Transaction -&gt; Transaction -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681469842"><span id="local-6989586621681469844"><span id="local-6989586621681469846"><span id="local-6989586621681469848"><span id="local-6989586621681469850"><span id="local-6989586621681469852"><span id="local-6989586621681469854"><span class="annot"><span class="annottext">Eq Transaction
Eq Transaction =&gt;
(Transaction -&gt; Transaction -&gt; Ordering)
-&gt; (Transaction -&gt; Transaction -&gt; Bool)
-&gt; (Transaction -&gt; Transaction -&gt; Bool)
-&gt; (Transaction -&gt; Transaction -&gt; Bool)
-&gt; (Transaction -&gt; Transaction -&gt; Bool)
-&gt; (Transaction -&gt; Transaction -&gt; Transaction)
-&gt; (Transaction -&gt; Transaction -&gt; Transaction)
-&gt; Ord Transaction
Transaction -&gt; Transaction -&gt; Bool
Transaction -&gt; Transaction -&gt; Ordering
Transaction -&gt; Transaction -&gt; Transaction
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: Transaction -&gt; Transaction -&gt; Transaction
$cmin :: Transaction -&gt; Transaction -&gt; Transaction
max :: Transaction -&gt; Transaction -&gt; Transaction
$cmax :: Transaction -&gt; Transaction -&gt; Transaction
&gt;= :: Transaction -&gt; Transaction -&gt; Bool
$c&gt;= :: Transaction -&gt; Transaction -&gt; Bool
&gt; :: Transaction -&gt; Transaction -&gt; Bool
$c&gt; :: Transaction -&gt; Transaction -&gt; Bool
&lt;= :: Transaction -&gt; Transaction -&gt; Bool
$c&lt;= :: Transaction -&gt; Transaction -&gt; Bool
&lt; :: Transaction -&gt; Transaction -&gt; Bool
$c&lt; :: Transaction -&gt; Transaction -&gt; Bool
compare :: Transaction -&gt; Transaction -&gt; Ordering
$ccompare :: Transaction -&gt; Transaction -&gt; Ordering
$cp1Ord :: Eq Transaction
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. Transaction -&gt; Rep Transaction x)
-&gt; (forall x. Rep Transaction x -&gt; Transaction)
-&gt; Generic Transaction
forall x. Rep Transaction x -&gt; Transaction
forall x. Transaction -&gt; Rep Transaction x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep Transaction x -&gt; Transaction
$cfrom :: forall x. Transaction -&gt; Rep Transaction x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-194"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681469838"><span class="annot"><span class="annottext">Transaction -&gt; ()
(Transaction -&gt; ()) -&gt; NFData Transaction
forall a. (a -&gt; ()) -&gt; NFData a
rnf :: Transaction -&gt; ()
$crnf :: Transaction -&gt; ()
</span><a href="#local-6989586621681469838"><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-195"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681469832"><span id="local-6989586621681469834"><span id="local-6989586621681469836"><span class="annot"><span class="annottext">Transaction -&gt; Int
Transaction -&gt; Ptr p -&gt; IO ()
Transaction -&gt; (Ptr p -&gt; IO a) -&gt; IO a
(Transaction -&gt; Int)
-&gt; (forall p a. Transaction -&gt; (Ptr p -&gt; IO a) -&gt; IO a)
-&gt; (forall p. Transaction -&gt; Ptr p -&gt; IO ())
-&gt; ByteArrayAccess Transaction
forall p. Transaction -&gt; Ptr p -&gt; IO ()
forall ba.
(ba -&gt; Int)
-&gt; (forall p a. ba -&gt; (Ptr p -&gt; IO a) -&gt; IO a)
-&gt; (forall p. ba -&gt; Ptr p -&gt; IO ())
-&gt; ByteArrayAccess ba
forall p a. Transaction -&gt; (Ptr p -&gt; IO a) -&gt; IO a
copyByteArrayToPtr :: Transaction -&gt; Ptr p -&gt; IO ()
$ccopyByteArrayToPtr :: forall p. Transaction -&gt; Ptr p -&gt; IO ()
withByteArray :: Transaction -&gt; (Ptr p -&gt; IO a) -&gt; IO a
$cwithByteArray :: forall p a. Transaction -&gt; (Ptr p -&gt; IO a) -&gt; IO a
length :: Transaction -&gt; Int
$clength :: Transaction -&gt; Int
</span><a href="#local-6989586621681469832"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">BA.ByteArrayAccess</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681469828"><span id="local-6989586621681469830"><span class="annot"><span class="annottext">Int -&gt; Transaction -&gt; Int
Transaction -&gt; Int
(Int -&gt; Transaction -&gt; Int)
-&gt; (Transaction -&gt; Int) -&gt; Hashable Transaction
forall a. (Int -&gt; a -&gt; Int) -&gt; (a -&gt; Int) -&gt; Hashable a
hash :: Transaction -&gt; Int
$chash :: Transaction -&gt; Int
hashWithSalt :: Int -&gt; Transaction -&gt; Int
$chashWithSalt :: Int -&gt; Transaction -&gt; Int
</span><a href="#local-6989586621681469828"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Hashable</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-196"></span><span>
</span><span id="line-197"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681469823"><span id="local-6989586621681469826"><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#Transaction"><span class="hs-identifier hs-type">Transaction</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-198"></span><span>    </span><span id="local-6989586621681469822"><span class="annot"><span class="annottext">show :: Transaction -&gt; String
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; String
</span><span class="hs-identifier hs-var">T.unpack</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; String) -&gt; (Transaction -&gt; Text) -&gt; Transaction -&gt; String
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Transaction -&gt; Text
forall a. ToJSON a =&gt; a -&gt; Text
</span><a href="Chainweb.Utils.html#encodeToText"><span class="hs-identifier hs-var">encodeToText</span></a></span><span>
</span><span id="line-199"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">show</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-200"></span><span>
</span><span id="line-201"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681469811"><span id="local-6989586621681469813"><span id="local-6989586621681469815"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#Transaction"><span class="hs-identifier hs-type">Transaction</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-202"></span><span>    </span><span id="local-6989586621681469810"><span class="annot"><span class="annottext">toJSON :: Transaction -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Value) -&gt; (Transaction -&gt; Text) -&gt; Transaction -&gt; Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Text
</span><a href="Chainweb.Utils.html#encodeB64UrlNoPaddingText"><span class="hs-identifier hs-var">encodeB64UrlNoPaddingText</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Text)
-&gt; (Transaction -&gt; ByteString) -&gt; Transaction -&gt; Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Transaction -&gt; ByteString
</span><a href="Chainweb.Payload.html#_transactionBytes"><span class="hs-identifier hs-var hs-var">_transactionBytes</span></a></span><span>
</span><span id="line-203"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">toJSON</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-204"></span><span>
</span><span id="line-205"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681469805"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#Transaction"><span class="hs-identifier hs-type">Transaction</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-206"></span><span>    </span><span id="local-6989586621681469804"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser Transaction
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Value -&gt; Parser Transaction
forall a. HasTextRepresentation a =&gt; String -&gt; Value -&gt; Parser a
</span><a href="Chainweb.Utils.html#parseJsonFromText"><span class="hs-identifier hs-var">parseJsonFromText</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;Transaction&quot;</span></span><span>
</span><span id="line-207"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">parseJSON</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-208"></span><span>
</span><span id="line-209"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Chainweb.Crypto.MerkleLog.html#IsMerkleLogEntry"><span class="hs-identifier hs-type">IsMerkleLogEntry</span></a></span><span> </span><span class="annot"><a href="Chainweb.MerkleUniverse.html#ChainwebHashTag"><span class="hs-identifier hs-type">ChainwebHashTag</span></a></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#Transaction"><span class="hs-identifier hs-type">Transaction</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-210"></span><span>    </span><span class="hs-keyword">type</span><span> </span><span id="Tag"><span class="annot"><a href="Chainweb.Crypto.MerkleLog.html#Tag"><span class="hs-identifier hs-var">Tag</span></a></span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#Transaction"><span class="hs-identifier hs-type">Transaction</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Chainweb.MerkleUniverse.html#TransactionTag"><span class="hs-identifier hs-type">TransactionTag</span></a></span><span>
</span><span id="line-211"></span><span>    </span><span id="local-6989586621681469797"><span class="annot"><span class="annottext">toMerkleNode :: Transaction -&gt; MerkleNodeType (HashAlg ChainwebHashTag) ByteString
</span><a href="#local-6989586621681469797"><span class="hs-identifier hs-var hs-var hs-var hs-var">toMerkleNode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; MerkleNodeType SHA512t_256 ByteString
forall a b. b -&gt; MerkleNodeType a b
</span><span class="hs-identifier hs-var">InputNode</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; MerkleNodeType SHA512t_256 ByteString)
-&gt; (Transaction -&gt; ByteString)
-&gt; Transaction
-&gt; MerkleNodeType SHA512t_256 ByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Transaction -&gt; ByteString
</span><a href="Chainweb.Payload.html#_transactionBytes"><span class="hs-identifier hs-var hs-var">_transactionBytes</span></a></span><span>
</span><span id="line-212"></span><span>    </span><span id="local-6989586621681469795"><span class="annot"><span class="annottext">fromMerkleNode :: MerkleNodeType (HashAlg ChainwebHashTag) ByteString
-&gt; Either SomeException Transaction
</span><a href="#local-6989586621681469795"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromMerkleNode</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">InputNode</span></span><span> </span><span id="local-6989586621681469794"><span class="annot"><span class="annottext">bytes :: ByteString
</span><a href="#local-6989586621681469794"><span class="hs-identifier hs-var">bytes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Transaction -&gt; Either SomeException Transaction
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">(Transaction -&gt; Either SomeException Transaction)
-&gt; Transaction -&gt; Either SomeException Transaction
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Transaction
</span><a href="Chainweb.Payload.html#Transaction"><span class="hs-identifier hs-var">Transaction</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621681469794"><span class="hs-identifier hs-var">bytes</span></a></span><span>
</span><span id="line-213"></span><span>    </span><span class="annot"><a href="Chainweb.Crypto.MerkleLog.html#fromMerkleNode"><span class="hs-identifier hs-var">fromMerkleNode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TreeNode</span></span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MerkleLogException -&gt; Either SomeException Transaction
forall (m :: * -&gt; *) e a. (MonadThrow m, Exception e) =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwM</span></span><span> </span><span class="annot"><span class="annottext">MerkleLogException
</span><a href="Chainweb.Crypto.MerkleLog.html#expectedInputNodeException"><span class="hs-identifier hs-var">expectedInputNodeException</span></a></span><span>
</span><span id="line-214"></span><span>
</span><span id="line-215"></span><span class="annot"><a href="Chainweb.Payload.html#transactionToText"><span class="hs-identifier hs-type">transactionToText</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#Transaction"><span class="hs-identifier hs-type">Transaction</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span>
</span><span id="line-216"></span><span id="transactionToText"><span class="annot"><span class="annottext">transactionToText :: Transaction -&gt; Text
</span><a href="Chainweb.Payload.html#transactionToText"><span class="hs-identifier hs-var hs-var">transactionToText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Text
</span><a href="Chainweb.Utils.html#encodeB64UrlNoPaddingText"><span class="hs-identifier hs-var">encodeB64UrlNoPaddingText</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Text)
-&gt; (Transaction -&gt; ByteString) -&gt; Transaction -&gt; Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Transaction -&gt; ByteString
</span><a href="Chainweb.Payload.html#_transactionBytes"><span class="hs-identifier hs-var hs-var">_transactionBytes</span></a></span><span>
</span><span id="line-217"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#transactionToText"><span class="hs-pragma hs-type">transactionToText</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-218"></span><span>
</span><span id="line-219"></span><span id="local-6989586621681469789"><span class="annot"><a href="Chainweb.Payload.html#transactionFromText"><span class="hs-identifier hs-type">transactionFromText</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621681469789"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681469789"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#Transaction"><span class="hs-identifier hs-type">Transaction</span></a></span></span><span>
</span><span id="line-220"></span><span id="transactionFromText"><span class="annot"><span class="annottext">transactionFromText :: Text -&gt; m Transaction
</span><a href="Chainweb.Payload.html#transactionFromText"><span class="hs-identifier hs-var hs-var">transactionFromText</span></a></span></span><span> </span><span id="local-6989586621681469787"><span class="annot"><span class="annottext">t :: Text
</span><a href="#local-6989586621681469787"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(SomeException -&gt; m Transaction)
-&gt; (Transaction -&gt; m Transaction)
-&gt; Either SomeException Transaction
-&gt; m Transaction
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><span class="hs-identifier hs-var">either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EncodingException -&gt; m Transaction
forall (m :: * -&gt; *) e a. (MonadThrow m, Exception e) =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwM</span></span><span> </span><span class="annot"><span class="annottext">(EncodingException -&gt; m Transaction)
-&gt; (SomeException -&gt; EncodingException)
-&gt; SomeException
-&gt; m Transaction
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; EncodingException
</span><a href="Chainweb.Utils.html#TextFormatException"><span class="hs-identifier hs-var">TextFormatException</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; EncodingException)
-&gt; (SomeException -&gt; Text) -&gt; SomeException -&gt; EncodingException
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">SomeException -&gt; Text
forall a b. (Show a, IsString b) =&gt; a -&gt; b
</span><a href="Chainweb.Utils.html#sshow"><span class="hs-identifier hs-var">sshow</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Transaction -&gt; m Transaction
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span>
</span><span id="line-221"></span><span>    </span><span class="annot"><span class="annottext">(Either SomeException Transaction -&gt; m Transaction)
-&gt; Either SomeException Transaction -&gt; m Transaction
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Transaction
</span><a href="Chainweb.Payload.html#Transaction"><span class="hs-identifier hs-var">Transaction</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Transaction)
-&gt; Either SomeException ByteString
-&gt; Either SomeException Transaction
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">&lt;$!&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Either SomeException ByteString
forall (m :: * -&gt; *). MonadThrow m =&gt; Text -&gt; m ByteString
</span><a href="Chainweb.Utils.html#decodeB64UrlNoPaddingText"><span class="hs-identifier hs-var">decodeB64UrlNoPaddingText</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681469787"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-222"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#transactionFromText"><span class="hs-pragma hs-type">transactionFromText</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-223"></span><span>
</span><span id="line-224"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Chainweb.Utils.html#HasTextRepresentation"><span class="hs-identifier hs-type">HasTextRepresentation</span></a></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#Transaction"><span class="hs-identifier hs-type">Transaction</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-225"></span><span>    </span><span id="local-6989586621681469779"><span class="annot"><span class="annottext">toText :: Transaction -&gt; Text
</span><a href="Chainweb.Utils.html#toText"><span class="hs-identifier hs-var hs-var hs-var hs-var">toText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Transaction -&gt; Text
</span><a href="Chainweb.Payload.html#transactionToText"><span class="hs-identifier hs-var">transactionToText</span></a></span><span>
</span><span id="line-226"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Chainweb.Utils.html#toText"><span class="hs-pragma hs-type">toText</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-227"></span><span>    </span><span id="local-6989586621681469777"><span class="annot"><span class="annottext">fromText :: Text -&gt; m Transaction
</span><a href="Chainweb.Utils.html#fromText"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; m Transaction
forall (m :: * -&gt; *). MonadThrow m =&gt; Text -&gt; m Transaction
</span><a href="Chainweb.Payload.html#transactionFromText"><span class="hs-identifier hs-var">transactionFromText</span></a></span><span>
</span><span id="line-228"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Chainweb.Utils.html#fromText"><span class="hs-pragma hs-type">fromText</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-229"></span><span>
</span><span id="line-230"></span><span class="hs-comment">-- -------------------------------------------------------------------------- --</span><span>
</span><span id="line-231"></span><span class="hs-comment">-- Transaction Output</span><span>
</span><span id="line-232"></span><span>
</span><span id="line-233"></span><span class="hs-comment">-- | Encoded output of a single transaction.</span><span>
</span><span id="line-234"></span><span class="hs-comment">--</span><span>
</span><span id="line-235"></span><span class="hs-comment">-- We don't care about the encoding of the output. The semantics of a output is</span><span>
</span><span id="line-236"></span><span class="hs-comment">-- only known to pact.</span><span>
</span><span id="line-237"></span><span class="hs-comment">--</span><span>
</span><span id="line-238"></span><span id="local-6989586621681469774"><span id="local-6989586621681469775"></span></span><span class="hs-keyword">newtype</span><span> </span><span id="TransactionOutput"><span class="annot"><a href="Chainweb.Payload.html#TransactionOutput"><span class="hs-identifier hs-var">TransactionOutput</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="TransactionOutput"><span class="annot"><a href="Chainweb.Payload.html#TransactionOutput"><span class="hs-identifier hs-var">TransactionOutput</span></a></span></span><span>
</span><span id="line-239"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="_transactionOutputBytes"><span class="annot"><span class="annottext">TransactionOutput -&gt; ByteString
</span><a href="Chainweb.Payload.html#_transactionOutputBytes"><span class="hs-identifier hs-var hs-var">_transactionOutputBytes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">B.ByteString</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-240"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681469766"><span id="local-6989586621681469768"><span id="local-6989586621681469770"><span class="annot"><span class="annottext">Int -&gt; TransactionOutput -&gt; ShowS
[TransactionOutput] -&gt; ShowS
TransactionOutput -&gt; String
(Int -&gt; TransactionOutput -&gt; ShowS)
-&gt; (TransactionOutput -&gt; String)
-&gt; ([TransactionOutput] -&gt; ShowS)
-&gt; Show TransactionOutput
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [TransactionOutput] -&gt; ShowS
$cshowList :: [TransactionOutput] -&gt; ShowS
show :: TransactionOutput -&gt; String
$cshow :: TransactionOutput -&gt; String
showsPrec :: Int -&gt; TransactionOutput -&gt; ShowS
$cshowsPrec :: Int -&gt; TransactionOutput -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681469762"><span id="local-6989586621681469764"><span class="annot"><span class="annottext">TransactionOutput -&gt; TransactionOutput -&gt; Bool
(TransactionOutput -&gt; TransactionOutput -&gt; Bool)
-&gt; (TransactionOutput -&gt; TransactionOutput -&gt; Bool)
-&gt; Eq TransactionOutput
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: TransactionOutput -&gt; TransactionOutput -&gt; Bool
$c/= :: TransactionOutput -&gt; TransactionOutput -&gt; Bool
== :: TransactionOutput -&gt; TransactionOutput -&gt; Bool
$c== :: TransactionOutput -&gt; TransactionOutput -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681469747"><span id="local-6989586621681469749"><span id="local-6989586621681469751"><span id="local-6989586621681469753"><span id="local-6989586621681469755"><span id="local-6989586621681469757"><span id="local-6989586621681469759"><span class="annot"><span class="annottext">Eq TransactionOutput
Eq TransactionOutput =&gt;
(TransactionOutput -&gt; TransactionOutput -&gt; Ordering)
-&gt; (TransactionOutput -&gt; TransactionOutput -&gt; Bool)
-&gt; (TransactionOutput -&gt; TransactionOutput -&gt; Bool)
-&gt; (TransactionOutput -&gt; TransactionOutput -&gt; Bool)
-&gt; (TransactionOutput -&gt; TransactionOutput -&gt; Bool)
-&gt; (TransactionOutput -&gt; TransactionOutput -&gt; TransactionOutput)
-&gt; (TransactionOutput -&gt; TransactionOutput -&gt; TransactionOutput)
-&gt; Ord TransactionOutput
TransactionOutput -&gt; TransactionOutput -&gt; Bool
TransactionOutput -&gt; TransactionOutput -&gt; Ordering
TransactionOutput -&gt; TransactionOutput -&gt; TransactionOutput
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: TransactionOutput -&gt; TransactionOutput -&gt; TransactionOutput
$cmin :: TransactionOutput -&gt; TransactionOutput -&gt; TransactionOutput
max :: TransactionOutput -&gt; TransactionOutput -&gt; TransactionOutput
$cmax :: TransactionOutput -&gt; TransactionOutput -&gt; TransactionOutput
&gt;= :: TransactionOutput -&gt; TransactionOutput -&gt; Bool
$c&gt;= :: TransactionOutput -&gt; TransactionOutput -&gt; Bool
&gt; :: TransactionOutput -&gt; TransactionOutput -&gt; Bool
$c&gt; :: TransactionOutput -&gt; TransactionOutput -&gt; Bool
&lt;= :: TransactionOutput -&gt; TransactionOutput -&gt; Bool
$c&lt;= :: TransactionOutput -&gt; TransactionOutput -&gt; Bool
&lt; :: TransactionOutput -&gt; TransactionOutput -&gt; Bool
$c&lt; :: TransactionOutput -&gt; TransactionOutput -&gt; Bool
compare :: TransactionOutput -&gt; TransactionOutput -&gt; Ordering
$ccompare :: TransactionOutput -&gt; TransactionOutput -&gt; Ordering
$cp1Ord :: Eq TransactionOutput
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. TransactionOutput -&gt; Rep TransactionOutput x)
-&gt; (forall x. Rep TransactionOutput x -&gt; TransactionOutput)
-&gt; Generic TransactionOutput
forall x. Rep TransactionOutput x -&gt; TransactionOutput
forall x. TransactionOutput -&gt; Rep TransactionOutput x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep TransactionOutput x -&gt; TransactionOutput
$cfrom :: forall x. TransactionOutput -&gt; Rep TransactionOutput x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-241"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681469739"><span id="local-6989586621681469741"><span id="local-6989586621681469743"><span class="annot"><span class="annottext">TransactionOutput -&gt; Int
TransactionOutput -&gt; Ptr p -&gt; IO ()
TransactionOutput -&gt; (Ptr p -&gt; IO a) -&gt; IO a
(TransactionOutput -&gt; Int)
-&gt; (forall p a. TransactionOutput -&gt; (Ptr p -&gt; IO a) -&gt; IO a)
-&gt; (forall p. TransactionOutput -&gt; Ptr p -&gt; IO ())
-&gt; ByteArrayAccess TransactionOutput
forall p. TransactionOutput -&gt; Ptr p -&gt; IO ()
forall ba.
(ba -&gt; Int)
-&gt; (forall p a. ba -&gt; (Ptr p -&gt; IO a) -&gt; IO a)
-&gt; (forall p. ba -&gt; Ptr p -&gt; IO ())
-&gt; ByteArrayAccess ba
forall p a. TransactionOutput -&gt; (Ptr p -&gt; IO a) -&gt; IO a
copyByteArrayToPtr :: TransactionOutput -&gt; Ptr p -&gt; IO ()
$ccopyByteArrayToPtr :: forall p. TransactionOutput -&gt; Ptr p -&gt; IO ()
withByteArray :: TransactionOutput -&gt; (Ptr p -&gt; IO a) -&gt; IO a
$cwithByteArray :: forall p a. TransactionOutput -&gt; (Ptr p -&gt; IO a) -&gt; IO a
length :: TransactionOutput -&gt; Int
$clength :: TransactionOutput -&gt; Int
</span><a href="#local-6989586621681469739"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">BA.ByteArrayAccess</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-242"></span><span>
</span><span id="line-243"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681469732"><span id="local-6989586621681469734"><span id="local-6989586621681469736"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#TransactionOutput"><span class="hs-identifier hs-type">TransactionOutput</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-244"></span><span>    </span><span id="local-6989586621681469731"><span class="annot"><span class="annottext">toJSON :: TransactionOutput -&gt; Value
</span><a href="#local-6989586621681469731"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Value)
-&gt; (TransactionOutput -&gt; Text) -&gt; TransactionOutput -&gt; Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Text
</span><a href="Chainweb.Utils.html#encodeB64UrlNoPaddingText"><span class="hs-identifier hs-var">encodeB64UrlNoPaddingText</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Text)
-&gt; (TransactionOutput -&gt; ByteString) -&gt; TransactionOutput -&gt; Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TransactionOutput -&gt; ByteString
</span><a href="Chainweb.Payload.html#_transactionOutputBytes"><span class="hs-identifier hs-var hs-var">_transactionOutputBytes</span></a></span><span>
</span><span id="line-245"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">toJSON</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-246"></span><span>
</span><span id="line-247"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681469728"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#TransactionOutput"><span class="hs-identifier hs-type">TransactionOutput</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-248"></span><span>    </span><span id="local-6989586621681469727"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser TransactionOutput
</span><a href="#local-6989586621681469727"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Value -&gt; Parser TransactionOutput
forall a. HasTextRepresentation a =&gt; String -&gt; Value -&gt; Parser a
</span><a href="Chainweb.Utils.html#parseJsonFromText"><span class="hs-identifier hs-var">parseJsonFromText</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;TransactionOutput&quot;</span></span><span>
</span><span id="line-249"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">parseJSON</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-250"></span><span>
</span><span id="line-251"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Chainweb.Crypto.MerkleLog.html#IsMerkleLogEntry"><span class="hs-identifier hs-type">IsMerkleLogEntry</span></a></span><span> </span><span class="annot"><a href="Chainweb.MerkleUniverse.html#ChainwebHashTag"><span class="hs-identifier hs-type">ChainwebHashTag</span></a></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#TransactionOutput"><span class="hs-identifier hs-type">TransactionOutput</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-252"></span><span>    </span><span class="hs-keyword">type</span><span> </span><span id="Tag"><span class="annot"><a href="Chainweb.Crypto.MerkleLog.html#Tag"><span class="hs-identifier hs-var">Tag</span></a></span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#TransactionOutput"><span class="hs-identifier hs-type">TransactionOutput</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Chainweb.MerkleUniverse.html#TransactionOutputTag"><span class="hs-identifier hs-type">TransactionOutputTag</span></a></span><span>
</span><span id="line-253"></span><span>    </span><span id="local-6989586621681469722"><span class="annot"><span class="annottext">toMerkleNode :: TransactionOutput
-&gt; MerkleNodeType (HashAlg ChainwebHashTag) ByteString
</span><a href="#local-6989586621681469722"><span class="hs-identifier hs-var hs-var hs-var hs-var">toMerkleNode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; MerkleNodeType SHA512t_256 ByteString
forall a b. b -&gt; MerkleNodeType a b
</span><span class="hs-identifier hs-var">InputNode</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; MerkleNodeType SHA512t_256 ByteString)
-&gt; (TransactionOutput -&gt; ByteString)
-&gt; TransactionOutput
-&gt; MerkleNodeType SHA512t_256 ByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TransactionOutput -&gt; ByteString
</span><a href="Chainweb.Payload.html#_transactionOutputBytes"><span class="hs-identifier hs-var hs-var">_transactionOutputBytes</span></a></span><span>
</span><span id="line-254"></span><span>    </span><span id="local-6989586621681469721"><span class="annot"><span class="annottext">fromMerkleNode :: MerkleNodeType (HashAlg ChainwebHashTag) ByteString
-&gt; Either SomeException TransactionOutput
</span><a href="#local-6989586621681469721"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromMerkleNode</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">InputNode</span></span><span> </span><span id="local-6989586621681469720"><span class="annot"><span class="annottext">bytes :: ByteString
</span><a href="#local-6989586621681469720"><span class="hs-identifier hs-var">bytes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TransactionOutput -&gt; Either SomeException TransactionOutput
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">(TransactionOutput -&gt; Either SomeException TransactionOutput)
-&gt; TransactionOutput -&gt; Either SomeException TransactionOutput
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; TransactionOutput
</span><a href="Chainweb.Payload.html#TransactionOutput"><span class="hs-identifier hs-var">TransactionOutput</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621681469720"><span class="hs-identifier hs-var">bytes</span></a></span><span>
</span><span id="line-255"></span><span>    </span><span class="annot"><a href="Chainweb.Crypto.MerkleLog.html#fromMerkleNode"><span class="hs-identifier hs-var">fromMerkleNode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TreeNode</span></span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MerkleLogException -&gt; Either SomeException TransactionOutput
forall (m :: * -&gt; *) e a. (MonadThrow m, Exception e) =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwM</span></span><span> </span><span class="annot"><span class="annottext">MerkleLogException
</span><a href="Chainweb.Crypto.MerkleLog.html#expectedInputNodeException"><span class="hs-identifier hs-var">expectedInputNodeException</span></a></span><span>
</span><span id="line-256"></span><span>
</span><span id="line-257"></span><span class="annot"><a href="Chainweb.Payload.html#transactionOutputToText"><span class="hs-identifier hs-type">transactionOutputToText</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#TransactionOutput"><span class="hs-identifier hs-type">TransactionOutput</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span>
</span><span id="line-258"></span><span id="transactionOutputToText"><span class="annot"><span class="annottext">transactionOutputToText :: TransactionOutput -&gt; Text
</span><a href="Chainweb.Payload.html#transactionOutputToText"><span class="hs-identifier hs-var hs-var">transactionOutputToText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Text
</span><a href="Chainweb.Utils.html#encodeB64UrlNoPaddingText"><span class="hs-identifier hs-var">encodeB64UrlNoPaddingText</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Text)
-&gt; (TransactionOutput -&gt; ByteString) -&gt; TransactionOutput -&gt; Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TransactionOutput -&gt; ByteString
</span><a href="Chainweb.Payload.html#_transactionOutputBytes"><span class="hs-identifier hs-var hs-var">_transactionOutputBytes</span></a></span><span>
</span><span id="line-259"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#transactionOutputToText"><span class="hs-pragma hs-type">transactionOutputToText</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-260"></span><span>
</span><span id="line-261"></span><span id="local-6989586621681469718"><span class="annot"><a href="Chainweb.Payload.html#transactionOutputFromText"><span class="hs-identifier hs-type">transactionOutputFromText</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621681469718"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681469718"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#TransactionOutput"><span class="hs-identifier hs-type">TransactionOutput</span></a></span></span><span>
</span><span id="line-262"></span><span id="transactionOutputFromText"><span class="annot"><span class="annottext">transactionOutputFromText :: Text -&gt; m TransactionOutput
</span><a href="Chainweb.Payload.html#transactionOutputFromText"><span class="hs-identifier hs-var hs-var">transactionOutputFromText</span></a></span></span><span> </span><span id="local-6989586621681469716"><span class="annot"><span class="annottext">t :: Text
</span><a href="#local-6989586621681469716"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(SomeException -&gt; m TransactionOutput)
-&gt; (TransactionOutput -&gt; m TransactionOutput)
-&gt; Either SomeException TransactionOutput
-&gt; m TransactionOutput
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><span class="hs-identifier hs-var">either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EncodingException -&gt; m TransactionOutput
forall (m :: * -&gt; *) e a. (MonadThrow m, Exception e) =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwM</span></span><span> </span><span class="annot"><span class="annottext">(EncodingException -&gt; m TransactionOutput)
-&gt; (SomeException -&gt; EncodingException)
-&gt; SomeException
-&gt; m TransactionOutput
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; EncodingException
</span><a href="Chainweb.Utils.html#TextFormatException"><span class="hs-identifier hs-var">TextFormatException</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; EncodingException)
-&gt; (SomeException -&gt; Text) -&gt; SomeException -&gt; EncodingException
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">SomeException -&gt; Text
forall a b. (Show a, IsString b) =&gt; a -&gt; b
</span><a href="Chainweb.Utils.html#sshow"><span class="hs-identifier hs-var">sshow</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TransactionOutput -&gt; m TransactionOutput
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span>
</span><span id="line-263"></span><span>    </span><span class="annot"><span class="annottext">(Either SomeException TransactionOutput -&gt; m TransactionOutput)
-&gt; Either SomeException TransactionOutput -&gt; m TransactionOutput
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; TransactionOutput
</span><a href="Chainweb.Payload.html#TransactionOutput"><span class="hs-identifier hs-var">TransactionOutput</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; TransactionOutput)
-&gt; Either SomeException ByteString
-&gt; Either SomeException TransactionOutput
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">&lt;$!&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Either SomeException ByteString
forall (m :: * -&gt; *). MonadThrow m =&gt; Text -&gt; m ByteString
</span><a href="Chainweb.Utils.html#decodeB64UrlNoPaddingText"><span class="hs-identifier hs-var">decodeB64UrlNoPaddingText</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681469716"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-264"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#transactionOutputFromText"><span class="hs-pragma hs-type">transactionOutputFromText</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-265"></span><span>
</span><span id="line-266"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Chainweb.Utils.html#HasTextRepresentation"><span class="hs-identifier hs-type">HasTextRepresentation</span></a></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#TransactionOutput"><span class="hs-identifier hs-type">TransactionOutput</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-267"></span><span>    </span><span id="local-6989586621681469713"><span class="annot"><span class="annottext">toText :: TransactionOutput -&gt; Text
</span><a href="#local-6989586621681469713"><span class="hs-identifier hs-var hs-var hs-var hs-var">toText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TransactionOutput -&gt; Text
</span><a href="Chainweb.Payload.html#transactionOutputToText"><span class="hs-identifier hs-var">transactionOutputToText</span></a></span><span>
</span><span id="line-268"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Chainweb.Utils.html#toText"><span class="hs-pragma hs-type">toText</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-269"></span><span>    </span><span id="local-6989586621681469712"><span class="annot"><span class="annottext">fromText :: Text -&gt; m TransactionOutput
</span><a href="#local-6989586621681469712"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; m TransactionOutput
forall (m :: * -&gt; *). MonadThrow m =&gt; Text -&gt; m TransactionOutput
</span><a href="Chainweb.Payload.html#transactionOutputFromText"><span class="hs-identifier hs-var">transactionOutputFromText</span></a></span><span>
</span><span id="line-270"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Chainweb.Utils.html#fromText"><span class="hs-pragma hs-type">fromText</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-271"></span><span>
</span><span id="line-272"></span><span class="hs-comment">-- -------------------------------------------------------------------------- --</span><span>
</span><span id="line-273"></span><span class="hs-comment">-- Block Payloads</span><span>
</span><span id="line-274"></span><span>
</span><span id="line-275"></span><span class="hs-comment">-- | The Payload of a block.</span><span>
</span><span id="line-276"></span><span class="hs-comment">--</span><span>
</span><span id="line-277"></span><span class="hs-comment">-- The transactions of a block at a given height in the chain are discovered by</span><span>
</span><span id="line-278"></span><span class="hs-comment">-- @_blockPayloadTransactionsHash . _blockHeaderPayloadHash@.</span><span>
</span><span id="line-279"></span><span class="hs-comment">--</span><span>
</span><span id="line-280"></span><span class="hs-comment">-- NOTES:</span><span>
</span><span id="line-281"></span><span class="hs-comment">--</span><span>
</span><span id="line-282"></span><span class="hs-comment">-- The block and its output are uniquely determined by the transactions.</span><span>
</span><span id="line-283"></span><span class="hs-comment">-- However, we want to include the output hash in the payload hash as a checksum</span><span>
</span><span id="line-284"></span><span class="hs-comment">-- and for inclusion proofs. In order to validate the payload hash without</span><span>
</span><span id="line-285"></span><span class="hs-comment">-- recomputing the outputs we need this extra level of indirection between the</span><span>
</span><span id="line-286"></span><span class="hs-comment">-- BlockHeaders and the Transactions.</span><span>
</span><span id="line-287"></span><span class="hs-comment">--</span><span>
</span><span id="line-288"></span><span class="hs-comment">-- This structure could be recomputed from the block transactions only if it</span><span>
</span><span id="line-289"></span><span class="hs-comment">-- would be possible to discover the order of blocks from the block transactions</span><span>
</span><span id="line-290"></span><span class="hs-comment">-- structure which isn't the case. Instead the order of the blocks is discovered</span><span>
</span><span id="line-291"></span><span class="hs-comment">-- from the 'BlockHeader' chain and block transactions for a given block height</span><span>
</span><span id="line-292"></span><span class="hs-comment">-- are looked up by @_blockPayloadTransactionsHash . _blockPayloadPayloadHash@.</span><span>
</span><span id="line-293"></span><span class="hs-comment">--</span><span>
</span><span id="line-294"></span><span id="local-6989586621681469710"><span id="local-6989586621681469711"></span></span><span class="hs-keyword">data</span><span> </span><span id="BlockPayload"><span class="annot"><a href="Chainweb.Payload.html#BlockPayload"><span class="hs-identifier hs-var">BlockPayload</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="BlockPayload"><span class="annot"><a href="Chainweb.Payload.html#BlockPayload"><span class="hs-identifier hs-var">BlockPayload</span></a></span></span><span>
</span><span id="line-295"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="_blockPayloadPayloadHash"><span class="annot"><span class="annottext">BlockPayload -&gt; BlockPayloadHash
</span><a href="Chainweb.Payload.html#_blockPayloadPayloadHash"><span class="hs-identifier hs-var hs-var">_blockPayloadPayloadHash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Chainweb.Payload.html#BlockPayloadHash"><span class="hs-identifier hs-type">BlockPayloadHash</span></a></span><span>
</span><span id="line-296"></span><span>        </span><span class="hs-comment">-- ^ Hash of '_blockPayloadTransactionsHash' and '_blockPayloadTransactionsHash'.</span><span>
</span><span id="line-297"></span><span>        </span><span class="hs-comment">-- Primary key of 'BlockPayloadStore'.</span><span>
</span><span id="line-298"></span><span>
</span><span id="line-299"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="_blockPayloadTransactionsHash"><span class="annot"><span class="annottext">BlockPayload -&gt; BlockTransactionsHash
</span><a href="Chainweb.Payload.html#_blockPayloadTransactionsHash"><span class="hs-identifier hs-var hs-var">_blockPayloadTransactionsHash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Chainweb.Payload.html#BlockTransactionsHash"><span class="hs-identifier hs-type">BlockTransactionsHash</span></a></span><span>
</span><span id="line-300"></span><span>        </span><span class="hs-comment">-- ^ Root of 'TransactionTree' of the block. Foreign key into</span><span>
</span><span id="line-301"></span><span>        </span><span class="hs-comment">-- 'BlockTransactionsStore' and 'TransactionTreeStore'.</span><span>
</span><span id="line-302"></span><span>
</span><span id="line-303"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="_blockPayloadOutputsHash"><span class="annot"><span class="annottext">BlockPayload -&gt; BlockOutputsHash
</span><a href="Chainweb.Payload.html#_blockPayloadOutputsHash"><span class="hs-identifier hs-var hs-var">_blockPayloadOutputsHash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Chainweb.Payload.html#BlockOutputsHash"><span class="hs-identifier hs-type">BlockOutputsHash</span></a></span><span>
</span><span id="line-304"></span><span>        </span><span class="hs-comment">-- ^ Root of 'OutputsTree' of the block. Foreign key into</span><span>
</span><span id="line-305"></span><span>        </span><span class="hs-comment">-- 'BlockOutputsStore' and 'OutputTreeStore'.</span><span>
</span><span id="line-306"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-307"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681469700"><span id="local-6989586621681469702"><span id="local-6989586621681469704"><span class="annot"><span class="annottext">Int -&gt; BlockPayload -&gt; ShowS
[BlockPayload] -&gt; ShowS
BlockPayload -&gt; String
(Int -&gt; BlockPayload -&gt; ShowS)
-&gt; (BlockPayload -&gt; String)
-&gt; ([BlockPayload] -&gt; ShowS)
-&gt; Show BlockPayload
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [BlockPayload] -&gt; ShowS
$cshowList :: [BlockPayload] -&gt; ShowS
show :: BlockPayload -&gt; String
$cshow :: BlockPayload -&gt; String
showsPrec :: Int -&gt; BlockPayload -&gt; ShowS
$cshowsPrec :: Int -&gt; BlockPayload -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681469696"><span id="local-6989586621681469698"><span class="annot"><span class="annottext">BlockPayload -&gt; BlockPayload -&gt; Bool
(BlockPayload -&gt; BlockPayload -&gt; Bool)
-&gt; (BlockPayload -&gt; BlockPayload -&gt; Bool) -&gt; Eq BlockPayload
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: BlockPayload -&gt; BlockPayload -&gt; Bool
$c/= :: BlockPayload -&gt; BlockPayload -&gt; Bool
== :: BlockPayload -&gt; BlockPayload -&gt; Bool
$c== :: BlockPayload -&gt; BlockPayload -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681469681"><span id="local-6989586621681469683"><span id="local-6989586621681469685"><span id="local-6989586621681469687"><span id="local-6989586621681469689"><span id="local-6989586621681469691"><span id="local-6989586621681469693"><span class="annot"><span class="annottext">Eq BlockPayload
Eq BlockPayload =&gt;
(BlockPayload -&gt; BlockPayload -&gt; Ordering)
-&gt; (BlockPayload -&gt; BlockPayload -&gt; Bool)
-&gt; (BlockPayload -&gt; BlockPayload -&gt; Bool)
-&gt; (BlockPayload -&gt; BlockPayload -&gt; Bool)
-&gt; (BlockPayload -&gt; BlockPayload -&gt; Bool)
-&gt; (BlockPayload -&gt; BlockPayload -&gt; BlockPayload)
-&gt; (BlockPayload -&gt; BlockPayload -&gt; BlockPayload)
-&gt; Ord BlockPayload
BlockPayload -&gt; BlockPayload -&gt; Bool
BlockPayload -&gt; BlockPayload -&gt; Ordering
BlockPayload -&gt; BlockPayload -&gt; BlockPayload
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: BlockPayload -&gt; BlockPayload -&gt; BlockPayload
$cmin :: BlockPayload -&gt; BlockPayload -&gt; BlockPayload
max :: BlockPayload -&gt; BlockPayload -&gt; BlockPayload
$cmax :: BlockPayload -&gt; BlockPayload -&gt; BlockPayload
&gt;= :: BlockPayload -&gt; BlockPayload -&gt; Bool
$c&gt;= :: BlockPayload -&gt; BlockPayload -&gt; Bool
&gt; :: BlockPayload -&gt; BlockPayload -&gt; Bool
$c&gt; :: BlockPayload -&gt; BlockPayload -&gt; Bool
&lt;= :: BlockPayload -&gt; BlockPayload -&gt; Bool
$c&lt;= :: BlockPayload -&gt; BlockPayload -&gt; Bool
&lt; :: BlockPayload -&gt; BlockPayload -&gt; Bool
$c&lt; :: BlockPayload -&gt; BlockPayload -&gt; Bool
compare :: BlockPayload -&gt; BlockPayload -&gt; Ordering
$ccompare :: BlockPayload -&gt; BlockPayload -&gt; Ordering
$cp1Ord :: Eq BlockPayload
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. BlockPayload -&gt; Rep BlockPayload x)
-&gt; (forall x. Rep BlockPayload x -&gt; BlockPayload)
-&gt; Generic BlockPayload
forall x. Rep BlockPayload x -&gt; BlockPayload
forall x. BlockPayload -&gt; Rep BlockPayload x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep BlockPayload x -&gt; BlockPayload
$cfrom :: forall x. BlockPayload -&gt; Rep BlockPayload x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-308"></span><span>
</span><span id="line-309"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681469672"><span id="local-6989586621681469674"><span id="local-6989586621681469676"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockPayload"><span class="hs-identifier hs-type">BlockPayload</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-310"></span><span>    </span><span id="local-6989586621681469671"><span class="annot"><span class="annottext">toJSON :: BlockPayload -&gt; Value
</span><a href="#local-6989586621681469671"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span id="local-6989586621681469670"><span class="annot"><span class="annottext">o :: BlockPayload
</span><a href="#local-6989586621681469670"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-311"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="hs-string">&quot;payloadHash&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; BlockPayloadHash -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">BlockPayload -&gt; BlockPayloadHash
</span><a href="Chainweb.Payload.html#_blockPayloadPayloadHash"><span class="hs-identifier hs-var hs-var">_blockPayloadPayloadHash</span></a></span><span> </span><span class="annot"><span class="annottext">BlockPayload
</span><a href="#local-6989586621681469670"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-312"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-string">&quot;transactionsHash&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; BlockTransactionsHash -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">BlockPayload -&gt; BlockTransactionsHash
</span><a href="Chainweb.Payload.html#_blockPayloadTransactionsHash"><span class="hs-identifier hs-var hs-var">_blockPayloadTransactionsHash</span></a></span><span> </span><span class="annot"><span class="annottext">BlockPayload
</span><a href="#local-6989586621681469670"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-313"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-string">&quot;outputsHash&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; BlockOutputsHash -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">BlockPayload -&gt; BlockOutputsHash
</span><a href="Chainweb.Payload.html#_blockPayloadOutputsHash"><span class="hs-identifier hs-var hs-var">_blockPayloadOutputsHash</span></a></span><span> </span><span class="annot"><span class="annottext">BlockPayload
</span><a href="#local-6989586621681469670"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-314"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-315"></span><span>
</span><span id="line-316"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681469665"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockPayload"><span class="hs-identifier hs-type">BlockPayload</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-317"></span><span>    </span><span id="local-6989586621681469664"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser BlockPayload
</span><a href="#local-6989586621681469664"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser BlockPayload) -&gt; Value -&gt; Parser BlockPayload
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">withObject</span></span><span> </span><span class="annot"><span class="hs-string">&quot;BlockPayload&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Object -&gt; Parser BlockPayload) -&gt; Value -&gt; Parser BlockPayload)
-&gt; (Object -&gt; Parser BlockPayload) -&gt; Value -&gt; Parser BlockPayload
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681469662"><span class="annot"><span class="annottext">o :: Object
</span><a href="#local-6989586621681469662"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BlockPayloadHash
-&gt; BlockTransactionsHash -&gt; BlockOutputsHash -&gt; BlockPayload
</span><a href="Chainweb.Payload.html#BlockPayload"><span class="hs-identifier hs-var">BlockPayload</span></a></span><span>
</span><span id="line-318"></span><span>        </span><span class="annot"><span class="annottext">(BlockPayloadHash
 -&gt; BlockTransactionsHash -&gt; BlockOutputsHash -&gt; BlockPayload)
-&gt; Parser BlockPayloadHash
-&gt; Parser
     (BlockTransactionsHash -&gt; BlockOutputsHash -&gt; BlockPayload)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">&lt;$!&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621681469662"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser BlockPayloadHash
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="hs-string">&quot;payloadHash&quot;</span></span><span>
</span><span id="line-319"></span><span>        </span><span class="annot"><span class="annottext">Parser (BlockTransactionsHash -&gt; BlockOutputsHash -&gt; BlockPayload)
-&gt; Parser BlockTransactionsHash
-&gt; Parser (BlockOutputsHash -&gt; BlockPayload)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621681469662"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser BlockTransactionsHash
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="hs-string">&quot;transactionsHash&quot;</span></span><span>
</span><span id="line-320"></span><span>        </span><span class="annot"><span class="annottext">Parser (BlockOutputsHash -&gt; BlockPayload)
-&gt; Parser BlockOutputsHash -&gt; Parser BlockPayload
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621681469662"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser BlockOutputsHash
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="hs-string">&quot;outputsHash&quot;</span></span><span>
</span><span id="line-321"></span><span>
</span><span id="line-322"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsCasValue</span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockPayload"><span class="hs-identifier hs-type">BlockPayload</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-323"></span><span>    </span><span class="hs-keyword">type</span><span> </span><span id="CasKeyType"><span class="annot"><span class="hs-identifier hs-var">CasKeyType</span></span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockPayload"><span class="hs-identifier hs-type">BlockPayload</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockPayloadHash"><span class="hs-identifier hs-type">BlockPayloadHash</span></a></span><span>
</span><span id="line-324"></span><span>    </span><span id="local-6989586621681469657"><span class="annot"><span class="annottext">casKey :: BlockPayload -&gt; CasKeyType BlockPayload
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">casKey</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockPayload -&gt; CasKeyType BlockPayload
BlockPayload -&gt; BlockPayloadHash
</span><a href="Chainweb.Payload.html#_blockPayloadPayloadHash"><span class="hs-identifier hs-var hs-var">_blockPayloadPayloadHash</span></a></span><span>
</span><span id="line-325"></span><span>
</span><span id="line-326"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Chainweb.Crypto.MerkleLog.html#HasMerkleLog"><span class="hs-identifier hs-type">HasMerkleLog</span></a></span><span> </span><span class="annot"><a href="Chainweb.MerkleUniverse.html#ChainwebHashTag"><span class="hs-identifier hs-type">ChainwebHashTag</span></a></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockPayload"><span class="hs-identifier hs-type">BlockPayload</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-327"></span><span>    </span><span class="hs-keyword">type</span><span> </span><span id="MerkleLogHeader"><span class="annot"><a href="Chainweb.Crypto.MerkleLog.html#MerkleLogHeader"><span class="hs-identifier hs-var">MerkleLogHeader</span></a></span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockPayload"><span class="hs-identifier hs-type">BlockPayload</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="annot"><a href="Chainweb.Payload.html#BlockTransactionsHash"><span class="hs-identifier hs-type">BlockTransactionsHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockOutputsHash"><span class="hs-identifier hs-type">BlockOutputsHash</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-328"></span><span>    </span><span class="hs-keyword">type</span><span> </span><span id="MerkleLogBody"><span class="annot"><a href="Chainweb.Crypto.MerkleLog.html#MerkleLogBody"><span class="hs-identifier hs-var">MerkleLogBody</span></a></span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockPayload"><span class="hs-identifier hs-type">BlockPayload</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Void</span></span><span>
</span><span id="line-329"></span><span>
</span><span id="line-330"></span><span>    </span><span id="local-6989586621681469650"><span class="annot"><span class="annottext">toLog :: BlockPayload
-&gt; MerkleLog
     ChainwebHashTag
     (MerkleLogHeader BlockPayload)
     (MerkleLogBody BlockPayload)
</span><a href="Chainweb.Crypto.MerkleLog.html#toLog"><span class="hs-identifier hs-var hs-var hs-var hs-var">toLog</span></a></span></span><span> </span><span id="local-6989586621681469648"><span class="annot"><span class="annottext">a :: BlockPayload
</span><a href="#local-6989586621681469648"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MerkleRoot (HashAlg ChainwebHashTag)
-&gt; MerkleLogEntries
     ChainwebHashTag '[BlockTransactionsHash, BlockOutputsHash] Void
-&gt; MerkleLog
     ChainwebHashTag '[BlockTransactionsHash, BlockOutputsHash] Void
forall u (h :: [*]) b.
HashAlgorithm (HashAlg u) =&gt;
MerkleRoot (HashAlg u) -&gt; MerkleLogEntries u h b -&gt; MerkleLog u h b
</span><a href="Chainweb.Crypto.MerkleLog.html#merkleLog"><span class="hs-identifier hs-var">merkleLog</span></a></span><span> </span><span class="annot"><span class="annottext">MerkleRoot (HashAlg ChainwebHashTag)
</span><a href="#local-6989586621681469646"><span class="hs-identifier hs-var">root</span></a></span><span> </span><span class="annot"><span class="annottext">MerkleLogEntries
  ChainwebHashTag '[BlockTransactionsHash, BlockOutputsHash] Void
</span><a href="#local-6989586621681469645"><span class="hs-identifier hs-var">entries</span></a></span><span>
</span><span id="line-331"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-332"></span><span>        </span><span class="annot"><a href="Chainweb.Payload.html#BlockPayloadHash"><span class="hs-identifier hs-type">BlockPayloadHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Chainweb.MerkleLogHash.html#MerkleLogHash"><span class="hs-identifier hs-type">MerkleLogHash</span></a></span><span> </span><span id="local-6989586621681469646"><span class="annot"><span class="annottext">root :: MerkleRoot (HashAlg ChainwebHashTag)
</span><a href="#local-6989586621681469646"><span class="hs-identifier hs-var">root</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockPayload -&gt; BlockPayloadHash
</span><a href="Chainweb.Payload.html#_blockPayloadPayloadHash"><span class="hs-identifier hs-var hs-var">_blockPayloadPayloadHash</span></a></span><span> </span><span class="annot"><span class="annottext">BlockPayload
</span><a href="#local-6989586621681469648"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-333"></span><span>        </span><span id="local-6989586621681469645"><span class="annot"><span class="annottext">entries :: MerkleLogEntries
  ChainwebHashTag '[BlockTransactionsHash, BlockOutputsHash] Void
</span><a href="#local-6989586621681469645"><span class="hs-identifier hs-var hs-var">entries</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockPayload -&gt; BlockTransactionsHash
</span><a href="Chainweb.Payload.html#_blockPayloadTransactionsHash"><span class="hs-identifier hs-var hs-var">_blockPayloadTransactionsHash</span></a></span><span> </span><span class="annot"><span class="annottext">BlockPayload
</span><a href="#local-6989586621681469648"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-334"></span><span>            </span><span class="annot"><span class="annottext">BlockTransactionsHash
-&gt; MerkleLogEntries ChainwebHashTag '[BlockOutputsHash] Void
-&gt; MerkleLogEntries
     ChainwebHashTag '[BlockTransactionsHash, BlockOutputsHash] Void
forall u h (t :: [*]) b.
IsMerkleLogEntry u h =&gt;
h -&gt; MerkleLogEntries u t b -&gt; MerkleLogEntries u (h : t) b
</span><a href="Chainweb.Crypto.MerkleLog.html#%3A%2B%3A"><span class="hs-operator hs-var">:+:</span></a></span><span> </span><span class="annot"><span class="annottext">BlockPayload -&gt; BlockOutputsHash
</span><a href="Chainweb.Payload.html#_blockPayloadOutputsHash"><span class="hs-identifier hs-var hs-var">_blockPayloadOutputsHash</span></a></span><span> </span><span class="annot"><span class="annottext">BlockPayload
</span><a href="#local-6989586621681469648"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-335"></span><span>            </span><span class="annot"><span class="annottext">BlockOutputsHash
-&gt; MerkleLogEntries ChainwebHashTag '[] Void
-&gt; MerkleLogEntries ChainwebHashTag '[BlockOutputsHash] Void
forall u h (t :: [*]) b.
IsMerkleLogEntry u h =&gt;
h -&gt; MerkleLogEntries u t b -&gt; MerkleLogEntries u (h : t) b
</span><a href="Chainweb.Crypto.MerkleLog.html#%3A%2B%3A"><span class="hs-operator hs-var">:+:</span></a></span><span> </span><span class="annot"><span class="annottext">MerkleLogEntries ChainwebHashTag '[] Void
forall u b. IsMerkleLogEntry u b =&gt; MerkleLogEntries u '[] b
</span><a href="Chainweb.Crypto.MerkleLog.html#emptyBody"><span class="hs-identifier hs-var">emptyBody</span></a></span><span>
</span><span id="line-336"></span><span>
</span><span id="line-337"></span><span>    </span><span id="local-6989586621681469641"><span class="annot"><span class="annottext">fromLog :: MerkleLog
  ChainwebHashTag
  (MerkleLogHeader BlockPayload)
  (MerkleLogBody BlockPayload)
-&gt; BlockPayload
</span><a href="Chainweb.Crypto.MerkleLog.html#fromLog"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromLog</span></a></span></span><span> </span><span id="local-6989586621681469639"><span class="annot"><span class="annottext">l :: MerkleLog
  ChainwebHashTag
  (MerkleLogHeader BlockPayload)
  (MerkleLogBody BlockPayload)
</span><a href="#local-6989586621681469639"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">$WBlockPayload :: BlockPayloadHash
-&gt; BlockTransactionsHash -&gt; BlockOutputsHash -&gt; BlockPayload
</span><a href="Chainweb.Payload.html#%24WBlockPayload"><span class="hs-identifier hs-type hs-type">BlockPayload</span></a></span><span>
</span><span id="line-338"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_blockPayloadPayloadHash :: BlockPayloadHash
</span><a href="Chainweb.Payload.html#_blockPayloadPayloadHash"><span class="hs-identifier hs-var">_blockPayloadPayloadHash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MerkleLogHash -&gt; BlockPayloadHash
</span><a href="Chainweb.Payload.html#BlockPayloadHash"><span class="hs-identifier hs-var">BlockPayloadHash</span></a></span><span> </span><span class="annot"><span class="annottext">(MerkleLogHash -&gt; BlockPayloadHash)
-&gt; MerkleLogHash -&gt; BlockPayloadHash
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MerkleRoot (HashAlg ChainwebHashTag) -&gt; MerkleLogHash
</span><a href="Chainweb.MerkleLogHash.html#MerkleLogHash"><span class="hs-identifier hs-var">MerkleLogHash</span></a></span><span> </span><span class="annot"><span class="annottext">(MerkleRoot (HashAlg ChainwebHashTag) -&gt; MerkleLogHash)
-&gt; MerkleRoot (HashAlg ChainwebHashTag) -&gt; MerkleLogHash
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MerkleLog
  ChainwebHashTag '[BlockTransactionsHash, BlockOutputsHash] Void
-&gt; MerkleRoot (HashAlg ChainwebHashTag)
forall u (h :: [*]) b. MerkleLog u h b -&gt; MerkleRoot (HashAlg u)
</span><a href="Chainweb.Crypto.MerkleLog.html#_merkleLogRoot"><span class="hs-identifier hs-var hs-var">_merkleLogRoot</span></a></span><span> </span><span class="annot"><span class="annottext">MerkleLog
  ChainwebHashTag '[BlockTransactionsHash, BlockOutputsHash] Void
MerkleLog
  ChainwebHashTag
  (MerkleLogHeader BlockPayload)
  (MerkleLogBody BlockPayload)
</span><a href="#local-6989586621681469639"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-339"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_blockPayloadTransactionsHash :: BlockTransactionsHash
</span><a href="Chainweb.Payload.html#_blockPayloadTransactionsHash"><span class="hs-identifier hs-var">_blockPayloadTransactionsHash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockTransactionsHash
</span><a href="#local-6989586621681469636"><span class="hs-identifier hs-var">txHash</span></a></span><span>
</span><span id="line-340"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_blockPayloadOutputsHash :: BlockOutputsHash
</span><a href="Chainweb.Payload.html#_blockPayloadOutputsHash"><span class="hs-identifier hs-var">_blockPayloadOutputsHash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockOutputsHash
</span><a href="#local-6989586621681469635"><span class="hs-identifier hs-var">outHash</span></a></span><span>
</span><span id="line-341"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-342"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-343"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621681469636"><span class="annot"><a href="#local-6989586621681469636"><span class="hs-identifier hs-var">txHash</span></a></span></span><span> </span><span class="annot"><a href="Chainweb.Crypto.MerkleLog.html#%3A%2B%3A"><span class="hs-operator hs-type">:+:</span></a></span><span> </span><span id="local-6989586621681469635"><span class="annot"><a href="#local-6989586621681469635"><span class="hs-identifier hs-var">outHash</span></a></span></span><span> </span><span class="annot"><a href="Chainweb.Crypto.MerkleLog.html#%3A%2B%3A"><span class="hs-operator hs-type">:+:</span></a></span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MerkleLog
  ChainwebHashTag '[BlockTransactionsHash, BlockOutputsHash] Void
-&gt; MerkleLogEntries
     ChainwebHashTag '[BlockTransactionsHash, BlockOutputsHash] Void
forall u (h :: [*]) b. MerkleLog u h b -&gt; MerkleLogEntries u h b
</span><a href="Chainweb.Crypto.MerkleLog.html#_merkleLogEntries"><span class="hs-identifier hs-var hs-var">_merkleLogEntries</span></a></span><span> </span><span class="annot"><span class="annottext">MerkleLog
  ChainwebHashTag '[BlockTransactionsHash, BlockOutputsHash] Void
MerkleLog
  ChainwebHashTag
  (MerkleLogHeader BlockPayload)
  (MerkleLogBody BlockPayload)
</span><a href="#local-6989586621681469639"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-344"></span><span>
</span><span id="line-345"></span><span>
</span><span id="line-346"></span><span class="hs-comment">-- -------------------------------------------------------------------------- --</span><span>
</span><span id="line-347"></span><span class="hs-comment">-- Miner data as an opaque Pact-specific bytestring</span><span>
</span><span id="line-348"></span><span>
</span><span id="line-349"></span><span id="local-6989586621681469632"><span id="local-6989586621681469633"></span></span><span class="hs-keyword">newtype</span><span> </span><span id="MinerData"><span class="annot"><a href="Chainweb.Payload.html#MinerData"><span class="hs-identifier hs-var">MinerData</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="MinerData"><span class="annot"><a href="Chainweb.Payload.html#MinerData"><span class="hs-identifier hs-var">MinerData</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="_minerData"><span class="annot"><span class="annottext">MinerData -&gt; ByteString
</span><a href="Chainweb.Payload.html#_minerData"><span class="hs-identifier hs-var hs-var">_minerData</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">B.ByteString</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-350"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681469626"><span id="local-6989586621681469628"><span class="annot"><span class="annottext">MinerData -&gt; MinerData -&gt; Bool
(MinerData -&gt; MinerData -&gt; Bool)
-&gt; (MinerData -&gt; MinerData -&gt; Bool) -&gt; Eq MinerData
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: MinerData -&gt; MinerData -&gt; Bool
$c/= :: MinerData -&gt; MinerData -&gt; Bool
== :: MinerData -&gt; MinerData -&gt; Bool
$c== :: MinerData -&gt; MinerData -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681469611"><span id="local-6989586621681469613"><span id="local-6989586621681469615"><span id="local-6989586621681469617"><span id="local-6989586621681469619"><span id="local-6989586621681469621"><span id="local-6989586621681469623"><span class="annot"><span class="annottext">Eq MinerData
Eq MinerData =&gt;
(MinerData -&gt; MinerData -&gt; Ordering)
-&gt; (MinerData -&gt; MinerData -&gt; Bool)
-&gt; (MinerData -&gt; MinerData -&gt; Bool)
-&gt; (MinerData -&gt; MinerData -&gt; Bool)
-&gt; (MinerData -&gt; MinerData -&gt; Bool)
-&gt; (MinerData -&gt; MinerData -&gt; MinerData)
-&gt; (MinerData -&gt; MinerData -&gt; MinerData)
-&gt; Ord MinerData
MinerData -&gt; MinerData -&gt; Bool
MinerData -&gt; MinerData -&gt; Ordering
MinerData -&gt; MinerData -&gt; MinerData
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: MinerData -&gt; MinerData -&gt; MinerData
$cmin :: MinerData -&gt; MinerData -&gt; MinerData
max :: MinerData -&gt; MinerData -&gt; MinerData
$cmax :: MinerData -&gt; MinerData -&gt; MinerData
&gt;= :: MinerData -&gt; MinerData -&gt; Bool
$c&gt;= :: MinerData -&gt; MinerData -&gt; Bool
&gt; :: MinerData -&gt; MinerData -&gt; Bool
$c&gt; :: MinerData -&gt; MinerData -&gt; Bool
&lt;= :: MinerData -&gt; MinerData -&gt; Bool
$c&lt;= :: MinerData -&gt; MinerData -&gt; Bool
&lt; :: MinerData -&gt; MinerData -&gt; Bool
$c&lt; :: MinerData -&gt; MinerData -&gt; Bool
compare :: MinerData -&gt; MinerData -&gt; Ordering
$ccompare :: MinerData -&gt; MinerData -&gt; Ordering
$cp1Ord :: Eq MinerData
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. MinerData -&gt; Rep MinerData x)
-&gt; (forall x. Rep MinerData x -&gt; MinerData) -&gt; Generic MinerData
forall x. Rep MinerData x -&gt; MinerData
forall x. MinerData -&gt; Rep MinerData x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep MinerData x -&gt; MinerData
$cfrom :: forall x. MinerData -&gt; Rep MinerData x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-351"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681469607"><span class="annot"><span class="annottext">MinerData -&gt; ()
(MinerData -&gt; ()) -&gt; NFData MinerData
forall a. (a -&gt; ()) -&gt; NFData a
rnf :: MinerData -&gt; ()
$crnf :: MinerData -&gt; ()
</span><a href="#local-6989586621681469607"><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-352"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681469601"><span id="local-6989586621681469603"><span id="local-6989586621681469605"><span class="annot"><span class="annottext">MinerData -&gt; Int
MinerData -&gt; Ptr p -&gt; IO ()
MinerData -&gt; (Ptr p -&gt; IO a) -&gt; IO a
(MinerData -&gt; Int)
-&gt; (forall p a. MinerData -&gt; (Ptr p -&gt; IO a) -&gt; IO a)
-&gt; (forall p. MinerData -&gt; Ptr p -&gt; IO ())
-&gt; ByteArrayAccess MinerData
forall p. MinerData -&gt; Ptr p -&gt; IO ()
forall ba.
(ba -&gt; Int)
-&gt; (forall p a. ba -&gt; (Ptr p -&gt; IO a) -&gt; IO a)
-&gt; (forall p. ba -&gt; Ptr p -&gt; IO ())
-&gt; ByteArrayAccess ba
forall p a. MinerData -&gt; (Ptr p -&gt; IO a) -&gt; IO a
copyByteArrayToPtr :: MinerData -&gt; Ptr p -&gt; IO ()
$ccopyByteArrayToPtr :: forall p. MinerData -&gt; Ptr p -&gt; IO ()
withByteArray :: MinerData -&gt; (Ptr p -&gt; IO a) -&gt; IO a
$cwithByteArray :: forall p a. MinerData -&gt; (Ptr p -&gt; IO a) -&gt; IO a
length :: MinerData -&gt; Int
$clength :: MinerData -&gt; Int
</span><a href="#local-6989586621681469601"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">BA.ByteArrayAccess</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681469597"><span id="local-6989586621681469599"><span class="annot"><span class="annottext">Int -&gt; MinerData -&gt; Int
MinerData -&gt; Int
(Int -&gt; MinerData -&gt; Int)
-&gt; (MinerData -&gt; Int) -&gt; Hashable MinerData
forall a. (Int -&gt; a -&gt; Int) -&gt; (a -&gt; Int) -&gt; Hashable a
hash :: MinerData -&gt; Int
$chash :: MinerData -&gt; Int
hashWithSalt :: Int -&gt; MinerData -&gt; Int
$chashWithSalt :: Int -&gt; MinerData -&gt; Int
</span><a href="#local-6989586621681469597"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Hashable</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-353"></span><span>
</span><span id="line-354"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681469592"><span id="local-6989586621681469595"><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#MinerData"><span class="hs-identifier hs-type">MinerData</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-355"></span><span>    </span><span id="local-6989586621681469591"><span class="annot"><span class="annottext">show :: MinerData -&gt; String
</span><a href="#local-6989586621681469591"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; String
</span><span class="hs-identifier hs-var">T.unpack</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; String) -&gt; (MinerData -&gt; Text) -&gt; MinerData -&gt; String
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">MinerData -&gt; Text
forall a. ToJSON a =&gt; a -&gt; Text
</span><a href="Chainweb.Utils.html#encodeToText"><span class="hs-identifier hs-var">encodeToText</span></a></span><span>
</span><span id="line-356"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">show</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-357"></span><span>
</span><span id="line-358"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681469584"><span id="local-6989586621681469586"><span id="local-6989586621681469588"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#MinerData"><span class="hs-identifier hs-type">MinerData</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-359"></span><span>    </span><span id="local-6989586621681469583"><span class="annot"><span class="annottext">toJSON :: MinerData -&gt; Value
</span><a href="#local-6989586621681469583"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Value) -&gt; (MinerData -&gt; Text) -&gt; MinerData -&gt; Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Text
</span><a href="Chainweb.Utils.html#encodeB64UrlNoPaddingText"><span class="hs-identifier hs-var">encodeB64UrlNoPaddingText</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Text)
-&gt; (MinerData -&gt; ByteString) -&gt; MinerData -&gt; Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">MinerData -&gt; ByteString
</span><a href="Chainweb.Payload.html#_minerData"><span class="hs-identifier hs-var hs-var">_minerData</span></a></span><span>
</span><span id="line-360"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">toJSON</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-361"></span><span>
</span><span id="line-362"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681469580"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#MinerData"><span class="hs-identifier hs-type">MinerData</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-363"></span><span>    </span><span id="local-6989586621681469579"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser MinerData
</span><a href="#local-6989586621681469579"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Value -&gt; Parser MinerData
forall a. HasTextRepresentation a =&gt; String -&gt; Value -&gt; Parser a
</span><a href="Chainweb.Utils.html#parseJsonFromText"><span class="hs-identifier hs-var">parseJsonFromText</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;MinerData&quot;</span></span><span>
</span><span id="line-364"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">parseJSON</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-365"></span><span>
</span><span id="line-366"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Chainweb.Crypto.MerkleLog.html#IsMerkleLogEntry"><span class="hs-identifier hs-type">IsMerkleLogEntry</span></a></span><span> </span><span class="annot"><a href="Chainweb.MerkleUniverse.html#ChainwebHashTag"><span class="hs-identifier hs-type">ChainwebHashTag</span></a></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#MinerData"><span class="hs-identifier hs-type">MinerData</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-367"></span><span>    </span><span class="hs-keyword">type</span><span> </span><span id="Tag"><span class="annot"><a href="Chainweb.Crypto.MerkleLog.html#Tag"><span class="hs-identifier hs-var">Tag</span></a></span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#MinerData"><span class="hs-identifier hs-type">MinerData</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Chainweb.MerkleUniverse.html#MinerDataTag"><span class="hs-identifier hs-type">MinerDataTag</span></a></span><span>
</span><span id="line-368"></span><span>    </span><span id="local-6989586621681469574"><span class="annot"><span class="annottext">toMerkleNode :: MinerData -&gt; MerkleNodeType (HashAlg ChainwebHashTag) ByteString
</span><a href="#local-6989586621681469574"><span class="hs-identifier hs-var hs-var hs-var hs-var">toMerkleNode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; MerkleNodeType SHA512t_256 ByteString
forall a b. b -&gt; MerkleNodeType a b
</span><span class="hs-identifier hs-var">InputNode</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; MerkleNodeType SHA512t_256 ByteString)
-&gt; (MinerData -&gt; ByteString)
-&gt; MinerData
-&gt; MerkleNodeType SHA512t_256 ByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">MinerData -&gt; ByteString
</span><a href="Chainweb.Payload.html#_minerData"><span class="hs-identifier hs-var hs-var">_minerData</span></a></span><span>
</span><span id="line-369"></span><span>    </span><span id="local-6989586621681469573"><span class="annot"><span class="annottext">fromMerkleNode :: MerkleNodeType (HashAlg ChainwebHashTag) ByteString
-&gt; Either SomeException MinerData
</span><a href="#local-6989586621681469573"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromMerkleNode</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">InputNode</span></span><span> </span><span id="local-6989586621681469572"><span class="annot"><span class="annottext">bytes :: ByteString
</span><a href="#local-6989586621681469572"><span class="hs-identifier hs-var">bytes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MinerData -&gt; Either SomeException MinerData
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">(MinerData -&gt; Either SomeException MinerData)
-&gt; MinerData -&gt; Either SomeException MinerData
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; MinerData
</span><a href="Chainweb.Payload.html#MinerData"><span class="hs-identifier hs-var">MinerData</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621681469572"><span class="hs-identifier hs-var">bytes</span></a></span><span>
</span><span id="line-370"></span><span>    </span><span class="annot"><a href="Chainweb.Crypto.MerkleLog.html#fromMerkleNode"><span class="hs-identifier hs-var">fromMerkleNode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TreeNode</span></span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MerkleLogException -&gt; Either SomeException MinerData
forall (m :: * -&gt; *) e a. (MonadThrow m, Exception e) =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwM</span></span><span> </span><span class="annot"><span class="annottext">MerkleLogException
</span><a href="Chainweb.Crypto.MerkleLog.html#expectedInputNodeException"><span class="hs-identifier hs-var">expectedInputNodeException</span></a></span><span>
</span><span id="line-371"></span><span>
</span><span id="line-372"></span><span class="annot"><a href="Chainweb.Payload.html#minerDataToText"><span class="hs-identifier hs-type">minerDataToText</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#MinerData"><span class="hs-identifier hs-type">MinerData</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span>
</span><span id="line-373"></span><span id="minerDataToText"><span class="annot"><span class="annottext">minerDataToText :: MinerData -&gt; Text
</span><a href="Chainweb.Payload.html#minerDataToText"><span class="hs-identifier hs-var hs-var">minerDataToText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Text
</span><a href="Chainweb.Utils.html#encodeB64UrlNoPaddingText"><span class="hs-identifier hs-var">encodeB64UrlNoPaddingText</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Text)
-&gt; (MinerData -&gt; ByteString) -&gt; MinerData -&gt; Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">MinerData -&gt; ByteString
</span><a href="Chainweb.Payload.html#_minerData"><span class="hs-identifier hs-var hs-var">_minerData</span></a></span><span>
</span><span id="line-374"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#minerDataToText"><span class="hs-pragma hs-type">minerDataToText</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-375"></span><span>
</span><span id="line-376"></span><span id="local-6989586621681469570"><span class="annot"><a href="Chainweb.Payload.html#minerDataFromText"><span class="hs-identifier hs-type">minerDataFromText</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621681469570"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681469570"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#MinerData"><span class="hs-identifier hs-type">MinerData</span></a></span></span><span>
</span><span id="line-377"></span><span id="minerDataFromText"><span class="annot"><span class="annottext">minerDataFromText :: Text -&gt; m MinerData
</span><a href="Chainweb.Payload.html#minerDataFromText"><span class="hs-identifier hs-var hs-var">minerDataFromText</span></a></span></span><span> </span><span id="local-6989586621681469568"><span class="annot"><span class="annottext">t :: Text
</span><a href="#local-6989586621681469568"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(SomeException -&gt; m MinerData)
-&gt; (MinerData -&gt; m MinerData)
-&gt; Either SomeException MinerData
-&gt; m MinerData
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><span class="hs-identifier hs-var">either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EncodingException -&gt; m MinerData
forall (m :: * -&gt; *) e a. (MonadThrow m, Exception e) =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwM</span></span><span> </span><span class="annot"><span class="annottext">(EncodingException -&gt; m MinerData)
-&gt; (SomeException -&gt; EncodingException)
-&gt; SomeException
-&gt; m MinerData
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; EncodingException
</span><a href="Chainweb.Utils.html#TextFormatException"><span class="hs-identifier hs-var">TextFormatException</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; EncodingException)
-&gt; (SomeException -&gt; Text) -&gt; SomeException -&gt; EncodingException
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">SomeException -&gt; Text
forall a b. (Show a, IsString b) =&gt; a -&gt; b
</span><a href="Chainweb.Utils.html#sshow"><span class="hs-identifier hs-var">sshow</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MinerData -&gt; m MinerData
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span>
</span><span id="line-378"></span><span>    </span><span class="annot"><span class="annottext">(Either SomeException MinerData -&gt; m MinerData)
-&gt; Either SomeException MinerData -&gt; m MinerData
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; MinerData
</span><a href="Chainweb.Payload.html#MinerData"><span class="hs-identifier hs-var">MinerData</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; MinerData)
-&gt; Either SomeException ByteString
-&gt; Either SomeException MinerData
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">&lt;$!&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Either SomeException ByteString
forall (m :: * -&gt; *). MonadThrow m =&gt; Text -&gt; m ByteString
</span><a href="Chainweb.Utils.html#decodeB64UrlNoPaddingText"><span class="hs-identifier hs-var">decodeB64UrlNoPaddingText</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681469568"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-379"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#minerDataFromText"><span class="hs-pragma hs-type">minerDataFromText</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-380"></span><span>
</span><span id="line-381"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Chainweb.Utils.html#HasTextRepresentation"><span class="hs-identifier hs-type">HasTextRepresentation</span></a></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#MinerData"><span class="hs-identifier hs-type">MinerData</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-382"></span><span>    </span><span id="local-6989586621681469565"><span class="annot"><span class="annottext">toText :: MinerData -&gt; Text
</span><a href="#local-6989586621681469565"><span class="hs-identifier hs-var hs-var hs-var hs-var">toText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MinerData -&gt; Text
</span><a href="Chainweb.Payload.html#minerDataToText"><span class="hs-identifier hs-var">minerDataToText</span></a></span><span>
</span><span id="line-383"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Chainweb.Utils.html#toText"><span class="hs-pragma hs-type">toText</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-384"></span><span>    </span><span id="local-6989586621681469564"><span class="annot"><span class="annottext">fromText :: Text -&gt; m MinerData
</span><a href="#local-6989586621681469564"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; m MinerData
forall (m :: * -&gt; *). MonadThrow m =&gt; Text -&gt; m MinerData
</span><a href="Chainweb.Payload.html#minerDataFromText"><span class="hs-identifier hs-var">minerDataFromText</span></a></span><span>
</span><span id="line-385"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Chainweb.Utils.html#fromText"><span class="hs-pragma hs-type">fromText</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-386"></span><span>
</span><span id="line-387"></span><span class="hs-comment">-- -------------------------------------------------------------------------- --</span><span>
</span><span id="line-388"></span><span class="hs-comment">-- Block Transactions</span><span>
</span><span id="line-389"></span><span>
</span><span id="line-390"></span><span>
</span><span id="line-391"></span><span>
</span><span id="line-392"></span><span class="hs-comment">-- | The block transactions</span><span>
</span><span id="line-393"></span><span class="hs-comment">--</span><span>
</span><span id="line-394"></span><span id="local-6989586621681469562"><span id="local-6989586621681469563"></span></span><span class="hs-keyword">data</span><span> </span><span id="BlockTransactions"><span class="annot"><a href="Chainweb.Payload.html#BlockTransactions"><span class="hs-identifier hs-var">BlockTransactions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="BlockTransactions"><span class="annot"><a href="Chainweb.Payload.html#BlockTransactions"><span class="hs-identifier hs-var">BlockTransactions</span></a></span></span><span>
</span><span id="line-395"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="_blockTransactionsHash"><span class="annot"><span class="annottext">BlockTransactions -&gt; BlockTransactionsHash
</span><a href="Chainweb.Payload.html#_blockTransactionsHash"><span class="hs-identifier hs-var hs-var">_blockTransactionsHash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Chainweb.Payload.html#BlockTransactionsHash"><span class="hs-identifier hs-type">BlockTransactionsHash</span></a></span><span>
</span><span id="line-396"></span><span>        </span><span class="hs-comment">-- ^ Root of 'TransactionTree' of the block. Primary key of</span><span>
</span><span id="line-397"></span><span>        </span><span class="hs-comment">-- 'BlockTransactionsStore'. Foreign key into 'TransactionTreeStore'.</span><span>
</span><span id="line-398"></span><span>
</span><span id="line-399"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="_blockTransactions"><span class="annot"><span class="annottext">BlockTransactions -&gt; Vector Transaction
</span><a href="Chainweb.Payload.html#_blockTransactions"><span class="hs-identifier hs-var hs-var">_blockTransactions</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">V.Vector</span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#Transaction"><span class="hs-identifier hs-type">Transaction</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-400"></span><span>        </span><span class="hs-comment">-- ^ Ordered list of all transactions of the block.</span><span>
</span><span id="line-401"></span><span>
</span><span id="line-402"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="_blockMinerData"><span class="annot"><span class="annottext">BlockTransactions -&gt; MinerData
</span><a href="Chainweb.Payload.html#_blockMinerData"><span class="hs-identifier hs-var hs-var">_blockMinerData</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Chainweb.Payload.html#MinerData"><span class="hs-identifier hs-type">MinerData</span></a></span><span>
</span><span id="line-403"></span><span>        </span><span class="hs-comment">-- ^ Miner data for rewards</span><span>
</span><span id="line-404"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-405"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681469552"><span id="local-6989586621681469554"><span id="local-6989586621681469556"><span class="annot"><span class="annottext">Int -&gt; BlockTransactions -&gt; ShowS
[BlockTransactions] -&gt; ShowS
BlockTransactions -&gt; String
(Int -&gt; BlockTransactions -&gt; ShowS)
-&gt; (BlockTransactions -&gt; String)
-&gt; ([BlockTransactions] -&gt; ShowS)
-&gt; Show BlockTransactions
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [BlockTransactions] -&gt; ShowS
$cshowList :: [BlockTransactions] -&gt; ShowS
show :: BlockTransactions -&gt; String
$cshow :: BlockTransactions -&gt; String
showsPrec :: Int -&gt; BlockTransactions -&gt; ShowS
$cshowsPrec :: Int -&gt; BlockTransactions -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681469548"><span id="local-6989586621681469550"><span class="annot"><span class="annottext">BlockTransactions -&gt; BlockTransactions -&gt; Bool
(BlockTransactions -&gt; BlockTransactions -&gt; Bool)
-&gt; (BlockTransactions -&gt; BlockTransactions -&gt; Bool)
-&gt; Eq BlockTransactions
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: BlockTransactions -&gt; BlockTransactions -&gt; Bool
$c/= :: BlockTransactions -&gt; BlockTransactions -&gt; Bool
== :: BlockTransactions -&gt; BlockTransactions -&gt; Bool
$c== :: BlockTransactions -&gt; BlockTransactions -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681469533"><span id="local-6989586621681469535"><span id="local-6989586621681469537"><span id="local-6989586621681469539"><span id="local-6989586621681469541"><span id="local-6989586621681469543"><span id="local-6989586621681469545"><span class="annot"><span class="annottext">Eq BlockTransactions
Eq BlockTransactions =&gt;
(BlockTransactions -&gt; BlockTransactions -&gt; Ordering)
-&gt; (BlockTransactions -&gt; BlockTransactions -&gt; Bool)
-&gt; (BlockTransactions -&gt; BlockTransactions -&gt; Bool)
-&gt; (BlockTransactions -&gt; BlockTransactions -&gt; Bool)
-&gt; (BlockTransactions -&gt; BlockTransactions -&gt; Bool)
-&gt; (BlockTransactions -&gt; BlockTransactions -&gt; BlockTransactions)
-&gt; (BlockTransactions -&gt; BlockTransactions -&gt; BlockTransactions)
-&gt; Ord BlockTransactions
BlockTransactions -&gt; BlockTransactions -&gt; Bool
BlockTransactions -&gt; BlockTransactions -&gt; Ordering
BlockTransactions -&gt; BlockTransactions -&gt; BlockTransactions
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: BlockTransactions -&gt; BlockTransactions -&gt; BlockTransactions
$cmin :: BlockTransactions -&gt; BlockTransactions -&gt; BlockTransactions
max :: BlockTransactions -&gt; BlockTransactions -&gt; BlockTransactions
$cmax :: BlockTransactions -&gt; BlockTransactions -&gt; BlockTransactions
&gt;= :: BlockTransactions -&gt; BlockTransactions -&gt; Bool
$c&gt;= :: BlockTransactions -&gt; BlockTransactions -&gt; Bool
&gt; :: BlockTransactions -&gt; BlockTransactions -&gt; Bool
$c&gt; :: BlockTransactions -&gt; BlockTransactions -&gt; Bool
&lt;= :: BlockTransactions -&gt; BlockTransactions -&gt; Bool
$c&lt;= :: BlockTransactions -&gt; BlockTransactions -&gt; Bool
&lt; :: BlockTransactions -&gt; BlockTransactions -&gt; Bool
$c&lt; :: BlockTransactions -&gt; BlockTransactions -&gt; Bool
compare :: BlockTransactions -&gt; BlockTransactions -&gt; Ordering
$ccompare :: BlockTransactions -&gt; BlockTransactions -&gt; Ordering
$cp1Ord :: Eq BlockTransactions
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. BlockTransactions -&gt; Rep BlockTransactions x)
-&gt; (forall x. Rep BlockTransactions x -&gt; BlockTransactions)
-&gt; Generic BlockTransactions
forall x. Rep BlockTransactions x -&gt; BlockTransactions
forall x. BlockTransactions -&gt; Rep BlockTransactions x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep BlockTransactions x -&gt; BlockTransactions
$cfrom :: forall x. BlockTransactions -&gt; Rep BlockTransactions x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-406"></span><span>
</span><span id="line-407"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681469524"><span id="local-6989586621681469526"><span id="local-6989586621681469528"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockTransactions"><span class="hs-identifier hs-type">BlockTransactions</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-408"></span><span>    </span><span id="local-6989586621681469523"><span class="annot"><span class="annottext">toJSON :: BlockTransactions -&gt; Value
</span><a href="#local-6989586621681469523"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span id="local-6989586621681469522"><span class="annot"><span class="annottext">o :: BlockTransactions
</span><a href="#local-6989586621681469522"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-409"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="hs-string">&quot;transactionHash&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; BlockTransactionsHash -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">BlockTransactions -&gt; BlockTransactionsHash
</span><a href="Chainweb.Payload.html#_blockTransactionsHash"><span class="hs-identifier hs-var hs-var">_blockTransactionsHash</span></a></span><span> </span><span class="annot"><span class="annottext">BlockTransactions
</span><a href="#local-6989586621681469522"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-410"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-string">&quot;transaction&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Vector Transaction -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">BlockTransactions -&gt; Vector Transaction
</span><a href="Chainweb.Payload.html#_blockTransactions"><span class="hs-identifier hs-var hs-var">_blockTransactions</span></a></span><span> </span><span class="annot"><span class="annottext">BlockTransactions
</span><a href="#local-6989586621681469522"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-411"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-string">&quot;minerData&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; MinerData -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">BlockTransactions -&gt; MinerData
</span><a href="Chainweb.Payload.html#_blockMinerData"><span class="hs-identifier hs-var hs-var">_blockMinerData</span></a></span><span> </span><span class="annot"><span class="annottext">BlockTransactions
</span><a href="#local-6989586621681469522"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-412"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-413"></span><span>
</span><span id="line-414"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681469519"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockTransactions"><span class="hs-identifier hs-type">BlockTransactions</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-415"></span><span>    </span><span id="local-6989586621681469518"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser BlockTransactions
</span><a href="#local-6989586621681469518"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser BlockTransactions)
-&gt; Value
-&gt; Parser BlockTransactions
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">withObject</span></span><span> </span><span class="annot"><span class="hs-string">&quot;BlockTransactions&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Object -&gt; Parser BlockTransactions)
 -&gt; Value -&gt; Parser BlockTransactions)
-&gt; (Object -&gt; Parser BlockTransactions)
-&gt; Value
-&gt; Parser BlockTransactions
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681469517"><span class="annot"><span class="annottext">o :: Object
</span><a href="#local-6989586621681469517"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BlockTransactionsHash
-&gt; Vector Transaction -&gt; MinerData -&gt; BlockTransactions
</span><a href="Chainweb.Payload.html#BlockTransactions"><span class="hs-identifier hs-var">BlockTransactions</span></a></span><span>
</span><span id="line-416"></span><span>        </span><span class="annot"><span class="annottext">(BlockTransactionsHash
 -&gt; Vector Transaction -&gt; MinerData -&gt; BlockTransactions)
-&gt; Parser BlockTransactionsHash
-&gt; Parser (Vector Transaction -&gt; MinerData -&gt; BlockTransactions)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">&lt;$!&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621681469517"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser BlockTransactionsHash
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="hs-string">&quot;transactionHash&quot;</span></span><span>
</span><span id="line-417"></span><span>        </span><span class="annot"><span class="annottext">Parser (Vector Transaction -&gt; MinerData -&gt; BlockTransactions)
-&gt; Parser (Vector Transaction)
-&gt; Parser (MinerData -&gt; BlockTransactions)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621681469517"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Vector Transaction)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="hs-string">&quot;transaction&quot;</span></span><span>
</span><span id="line-418"></span><span>        </span><span class="annot"><span class="annottext">Parser (MinerData -&gt; BlockTransactions)
-&gt; Parser MinerData -&gt; Parser BlockTransactions
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621681469517"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser MinerData
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="hs-string">&quot;minerData&quot;</span></span><span>
</span><span id="line-419"></span><span>
</span><span id="line-420"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsCasValue</span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockTransactions"><span class="hs-identifier hs-type">BlockTransactions</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-421"></span><span>    </span><span class="hs-keyword">type</span><span> </span><span id="CasKeyType"><span class="annot"><span class="hs-identifier hs-var">CasKeyType</span></span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockTransactions"><span class="hs-identifier hs-type">BlockTransactions</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockTransactionsHash"><span class="hs-identifier hs-type">BlockTransactionsHash</span></a></span><span>
</span><span id="line-422"></span><span>    </span><span id="local-6989586621681469514"><span class="annot"><span class="annottext">casKey :: BlockTransactions -&gt; CasKeyType BlockTransactions
</span><a href="#local-6989586621681469514"><span class="hs-identifier hs-var hs-var hs-var hs-var">casKey</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockTransactions -&gt; CasKeyType BlockTransactions
BlockTransactions -&gt; BlockTransactionsHash
</span><a href="Chainweb.Payload.html#_blockTransactionsHash"><span class="hs-identifier hs-var hs-var">_blockTransactionsHash</span></a></span><span>
</span><span id="line-423"></span><span>
</span><span id="line-424"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Chainweb.Crypto.MerkleLog.html#HasMerkleLog"><span class="hs-identifier hs-type">HasMerkleLog</span></a></span><span> </span><span class="annot"><a href="Chainweb.MerkleUniverse.html#ChainwebHashTag"><span class="hs-identifier hs-type">ChainwebHashTag</span></a></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockTransactions"><span class="hs-identifier hs-type">BlockTransactions</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-425"></span><span>    </span><span class="hs-keyword">type</span><span> </span><span id="MerkleLogHeader"><span class="annot"><a href="Chainweb.Crypto.MerkleLog.html#MerkleLogHeader"><span class="hs-identifier hs-var">MerkleLogHeader</span></a></span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockTransactions"><span class="hs-identifier hs-type">BlockTransactions</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="annot"><a href="Chainweb.Payload.html#MinerData"><span class="hs-identifier hs-type">MinerData</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-426"></span><span>    </span><span class="hs-keyword">type</span><span> </span><span id="MerkleLogBody"><span class="annot"><a href="Chainweb.Crypto.MerkleLog.html#MerkleLogBody"><span class="hs-identifier hs-var">MerkleLogBody</span></a></span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockTransactions"><span class="hs-identifier hs-type">BlockTransactions</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#Transaction"><span class="hs-identifier hs-type">Transaction</span></a></span><span>
</span><span id="line-427"></span><span>
</span><span id="line-428"></span><span>    </span><span id="local-6989586621681469509"><span class="annot"><span class="annottext">toLog :: BlockTransactions
-&gt; MerkleLog
     ChainwebHashTag
     (MerkleLogHeader BlockTransactions)
     (MerkleLogBody BlockTransactions)
</span><a href="#local-6989586621681469509"><span class="hs-identifier hs-var hs-var hs-var hs-var">toLog</span></a></span></span><span> </span><span id="local-6989586621681469508"><span class="annot"><span class="annottext">a :: BlockTransactions
</span><a href="#local-6989586621681469508"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MerkleRoot (HashAlg ChainwebHashTag)
-&gt; MerkleLogEntries ChainwebHashTag '[MinerData] Transaction
-&gt; MerkleLog ChainwebHashTag '[MinerData] Transaction
forall u (h :: [*]) b.
HashAlgorithm (HashAlg u) =&gt;
MerkleRoot (HashAlg u) -&gt; MerkleLogEntries u h b -&gt; MerkleLog u h b
</span><a href="Chainweb.Crypto.MerkleLog.html#merkleLog"><span class="hs-identifier hs-var">merkleLog</span></a></span><span> </span><span class="annot"><span class="annottext">MerkleRoot (HashAlg ChainwebHashTag)
</span><a href="#local-6989586621681469507"><span class="hs-identifier hs-var">root</span></a></span><span> </span><span class="annot"><span class="annottext">MerkleLogEntries ChainwebHashTag '[MinerData] Transaction
</span><a href="#local-6989586621681469506"><span class="hs-identifier hs-var">entries</span></a></span><span>
</span><span id="line-429"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-430"></span><span>        </span><span class="annot"><a href="Chainweb.Payload.html#BlockTransactionsHash"><span class="hs-identifier hs-type">BlockTransactionsHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Chainweb.MerkleLogHash.html#MerkleLogHash"><span class="hs-identifier hs-type">MerkleLogHash</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">!</span><span id="local-6989586621681469507"><span class="annot"><span class="annottext">MerkleRoot (HashAlg ChainwebHashTag)
</span><a href="#local-6989586621681469507"><span class="hs-identifier hs-var">root</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockTransactions -&gt; BlockTransactionsHash
</span><a href="Chainweb.Payload.html#_blockTransactionsHash"><span class="hs-identifier hs-var hs-var">_blockTransactionsHash</span></a></span><span> </span><span class="annot"><span class="annottext">BlockTransactions
</span><a href="#local-6989586621681469508"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-431"></span><span>        </span><span class="hs-glyph">!</span><span id="local-6989586621681469506"><span class="annot"><span class="annottext">entries :: MerkleLogEntries ChainwebHashTag '[MinerData] Transaction
</span><a href="#local-6989586621681469506"><span class="hs-identifier hs-var hs-var">entries</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockTransactions -&gt; MinerData
</span><a href="Chainweb.Payload.html#_blockMinerData"><span class="hs-identifier hs-var hs-var">_blockMinerData</span></a></span><span> </span><span class="annot"><span class="annottext">BlockTransactions
</span><a href="#local-6989586621681469508"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">MinerData
-&gt; MerkleLogEntries ChainwebHashTag '[] Transaction
-&gt; MerkleLogEntries ChainwebHashTag '[MinerData] Transaction
forall u h (t :: [*]) b.
IsMerkleLogEntry u h =&gt;
h -&gt; MerkleLogEntries u t b -&gt; MerkleLogEntries u (h : t) b
</span><a href="Chainweb.Crypto.MerkleLog.html#%3A%2B%3A"><span class="hs-operator hs-var">:+:</span></a></span><span> </span><span class="annot"><span class="annottext">Vector Transaction
-&gt; MerkleLogEntries ChainwebHashTag '[] Transaction
forall u b.
IsMerkleLogEntry u b =&gt;
Vector b -&gt; MerkleLogEntries u '[] b
</span><a href="Chainweb.Crypto.MerkleLog.html#MerkleLogBody"><span class="hs-identifier hs-var">MerkleLogBody</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BlockTransactions -&gt; Vector Transaction
</span><a href="Chainweb.Payload.html#_blockTransactions"><span class="hs-identifier hs-var hs-var">_blockTransactions</span></a></span><span> </span><span class="annot"><span class="annottext">BlockTransactions
</span><a href="#local-6989586621681469508"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-432"></span><span>
</span><span id="line-433"></span><span>    </span><span id="local-6989586621681469504"><span class="annot"><span class="annottext">fromLog :: MerkleLog
  ChainwebHashTag
  (MerkleLogHeader BlockTransactions)
  (MerkleLogBody BlockTransactions)
-&gt; BlockTransactions
</span><a href="#local-6989586621681469504"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromLog</span></a></span></span><span> </span><span id="local-6989586621681469503"><span class="annot"><span class="annottext">l :: MerkleLog
  ChainwebHashTag
  (MerkleLogHeader BlockTransactions)
  (MerkleLogBody BlockTransactions)
</span><a href="#local-6989586621681469503"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">$WBlockTransactions :: BlockTransactionsHash
-&gt; Vector Transaction -&gt; MinerData -&gt; BlockTransactions
</span><a href="Chainweb.Payload.html#%24WBlockTransactions"><span class="hs-identifier hs-type hs-type">BlockTransactions</span></a></span><span>
</span><span id="line-434"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_blockTransactionsHash :: BlockTransactionsHash
</span><a href="Chainweb.Payload.html#_blockTransactionsHash"><span class="hs-identifier hs-var">_blockTransactionsHash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MerkleLogHash -&gt; BlockTransactionsHash
</span><a href="Chainweb.Payload.html#BlockTransactionsHash"><span class="hs-identifier hs-var">BlockTransactionsHash</span></a></span><span> </span><span class="annot"><span class="annottext">(MerkleLogHash -&gt; BlockTransactionsHash)
-&gt; MerkleLogHash -&gt; BlockTransactionsHash
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">MerkleRoot SHA512t_256 -&gt; MerkleLogHash
MerkleRoot (HashAlg ChainwebHashTag) -&gt; MerkleLogHash
</span><a href="Chainweb.MerkleLogHash.html#MerkleLogHash"><span class="hs-identifier hs-var">MerkleLogHash</span></a></span><span> </span><span class="annot"><span class="annottext">(MerkleRoot SHA512t_256 -&gt; MerkleLogHash)
-&gt; MerkleRoot SHA512t_256 -&gt; MerkleLogHash
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">MerkleLog ChainwebHashTag '[MinerData] Transaction
-&gt; MerkleRoot (HashAlg ChainwebHashTag)
forall u (h :: [*]) b. MerkleLog u h b -&gt; MerkleRoot (HashAlg u)
</span><a href="Chainweb.Crypto.MerkleLog.html#_merkleLogRoot"><span class="hs-identifier hs-var hs-var">_merkleLogRoot</span></a></span><span> </span><span class="annot"><span class="annottext">MerkleLog ChainwebHashTag '[MinerData] Transaction
MerkleLog
  ChainwebHashTag
  (MerkleLogHeader BlockTransactions)
  (MerkleLogBody BlockTransactions)
</span><a href="#local-6989586621681469503"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-435"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_blockTransactions :: Vector Transaction
</span><a href="Chainweb.Payload.html#_blockTransactions"><span class="hs-identifier hs-var">_blockTransactions</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Vector Transaction
</span><a href="#local-6989586621681469500"><span class="hs-identifier hs-var">txs</span></a></span><span>
</span><span id="line-436"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_blockMinerData :: MinerData
</span><a href="Chainweb.Payload.html#_blockMinerData"><span class="hs-identifier hs-var">_blockMinerData</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MinerData
</span><a href="#local-6989586621681469499"><span class="hs-identifier hs-var">mi</span></a></span><span>
</span><span id="line-437"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-438"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-439"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621681469499"><span class="annot"><a href="#local-6989586621681469499"><span class="hs-identifier hs-var">mi</span></a></span></span><span> </span><span class="annot"><a href="Chainweb.Crypto.MerkleLog.html#%3A%2B%3A"><span class="hs-operator hs-type">:+:</span></a></span><span> </span><span class="annot"><a href="Chainweb.Crypto.MerkleLog.html#MerkleLogBody"><span class="hs-identifier hs-type">MerkleLogBody</span></a></span><span> </span><span id="local-6989586621681469500"><span class="annot"><a href="#local-6989586621681469500"><span class="hs-identifier hs-var">txs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MerkleLog ChainwebHashTag '[MinerData] Transaction
-&gt; MerkleLogEntries ChainwebHashTag '[MinerData] Transaction
forall u (h :: [*]) b. MerkleLog u h b -&gt; MerkleLogEntries u h b
</span><a href="Chainweb.Crypto.MerkleLog.html#_merkleLogEntries"><span class="hs-identifier hs-var hs-var">_merkleLogEntries</span></a></span><span> </span><span class="annot"><span class="annottext">MerkleLog ChainwebHashTag '[MinerData] Transaction
MerkleLog
  ChainwebHashTag
  (MerkleLogHeader BlockTransactions)
  (MerkleLogBody BlockTransactions)
</span><a href="#local-6989586621681469503"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-440"></span><span>
</span><span id="line-441"></span><span class="hs-keyword">type</span><span> </span><span id="BlockTransactionsLog"><span class="annot"><a href="Chainweb.Payload.html#BlockTransactionsLog"><span class="hs-identifier hs-var">BlockTransactionsLog</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Chainweb.Crypto.MerkleLog.html#MkLogType"><span class="hs-identifier hs-type">MkLogType</span></a></span><span> </span><span class="annot"><a href="Chainweb.MerkleUniverse.html#ChainwebHashTag"><span class="hs-identifier hs-type">ChainwebHashTag</span></a></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockTransactions"><span class="hs-identifier hs-type">BlockTransactions</span></a></span><span>
</span><span id="line-442"></span><span>
</span><span id="line-443"></span><span class="hs-comment">-- -------------------------------------------------------------------------- --</span><span>
</span><span id="line-444"></span><span class="hs-comment">-- Redundant / Caches</span><span>
</span><span id="line-445"></span><span class="hs-comment">-- -------------------------------------------------------------------------- --</span><span>
</span><span id="line-446"></span><span>
</span><span id="line-447"></span><span class="hs-comment">-- -------------------------------------------------------------------------- --</span><span>
</span><span id="line-448"></span><span class="hs-comment">-- Coinbase transaction output</span><span>
</span><span id="line-449"></span><span>
</span><span id="line-450"></span><span id="local-6989586621681469496"><span id="local-6989586621681469497"></span></span><span class="hs-keyword">newtype</span><span> </span><span id="CoinbaseOutput"><span class="annot"><a href="Chainweb.Payload.html#CoinbaseOutput"><span class="hs-identifier hs-var">CoinbaseOutput</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="CoinbaseOutput"><span class="annot"><a href="Chainweb.Payload.html#CoinbaseOutput"><span class="hs-identifier hs-var">CoinbaseOutput</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="_coinbaseOutput"><span class="annot"><span class="annottext">CoinbaseOutput -&gt; ByteString
</span><a href="Chainweb.Payload.html#_coinbaseOutput"><span class="hs-identifier hs-var hs-var">_coinbaseOutput</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">B.ByteString</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-451"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681469490"><span id="local-6989586621681469492"><span class="annot"><span class="annottext">CoinbaseOutput -&gt; CoinbaseOutput -&gt; Bool
(CoinbaseOutput -&gt; CoinbaseOutput -&gt; Bool)
-&gt; (CoinbaseOutput -&gt; CoinbaseOutput -&gt; Bool) -&gt; Eq CoinbaseOutput
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: CoinbaseOutput -&gt; CoinbaseOutput -&gt; Bool
$c/= :: CoinbaseOutput -&gt; CoinbaseOutput -&gt; Bool
== :: CoinbaseOutput -&gt; CoinbaseOutput -&gt; Bool
$c== :: CoinbaseOutput -&gt; CoinbaseOutput -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681469475"><span id="local-6989586621681469477"><span id="local-6989586621681469479"><span id="local-6989586621681469481"><span id="local-6989586621681469483"><span id="local-6989586621681469485"><span id="local-6989586621681469487"><span class="annot"><span class="annottext">Eq CoinbaseOutput
Eq CoinbaseOutput =&gt;
(CoinbaseOutput -&gt; CoinbaseOutput -&gt; Ordering)
-&gt; (CoinbaseOutput -&gt; CoinbaseOutput -&gt; Bool)
-&gt; (CoinbaseOutput -&gt; CoinbaseOutput -&gt; Bool)
-&gt; (CoinbaseOutput -&gt; CoinbaseOutput -&gt; Bool)
-&gt; (CoinbaseOutput -&gt; CoinbaseOutput -&gt; Bool)
-&gt; (CoinbaseOutput -&gt; CoinbaseOutput -&gt; CoinbaseOutput)
-&gt; (CoinbaseOutput -&gt; CoinbaseOutput -&gt; CoinbaseOutput)
-&gt; Ord CoinbaseOutput
CoinbaseOutput -&gt; CoinbaseOutput -&gt; Bool
CoinbaseOutput -&gt; CoinbaseOutput -&gt; Ordering
CoinbaseOutput -&gt; CoinbaseOutput -&gt; CoinbaseOutput
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: CoinbaseOutput -&gt; CoinbaseOutput -&gt; CoinbaseOutput
$cmin :: CoinbaseOutput -&gt; CoinbaseOutput -&gt; CoinbaseOutput
max :: CoinbaseOutput -&gt; CoinbaseOutput -&gt; CoinbaseOutput
$cmax :: CoinbaseOutput -&gt; CoinbaseOutput -&gt; CoinbaseOutput
&gt;= :: CoinbaseOutput -&gt; CoinbaseOutput -&gt; Bool
$c&gt;= :: CoinbaseOutput -&gt; CoinbaseOutput -&gt; Bool
&gt; :: CoinbaseOutput -&gt; CoinbaseOutput -&gt; Bool
$c&gt; :: CoinbaseOutput -&gt; CoinbaseOutput -&gt; Bool
&lt;= :: CoinbaseOutput -&gt; CoinbaseOutput -&gt; Bool
$c&lt;= :: CoinbaseOutput -&gt; CoinbaseOutput -&gt; Bool
&lt; :: CoinbaseOutput -&gt; CoinbaseOutput -&gt; Bool
$c&lt; :: CoinbaseOutput -&gt; CoinbaseOutput -&gt; Bool
compare :: CoinbaseOutput -&gt; CoinbaseOutput -&gt; Ordering
$ccompare :: CoinbaseOutput -&gt; CoinbaseOutput -&gt; Ordering
$cp1Ord :: Eq CoinbaseOutput
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. CoinbaseOutput -&gt; Rep CoinbaseOutput x)
-&gt; (forall x. Rep CoinbaseOutput x -&gt; CoinbaseOutput)
-&gt; Generic CoinbaseOutput
forall x. Rep CoinbaseOutput x -&gt; CoinbaseOutput
forall x. CoinbaseOutput -&gt; Rep CoinbaseOutput x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep CoinbaseOutput x -&gt; CoinbaseOutput
$cfrom :: forall x. CoinbaseOutput -&gt; Rep CoinbaseOutput x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-452"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681469471"><span class="annot"><span class="annottext">CoinbaseOutput -&gt; ()
(CoinbaseOutput -&gt; ()) -&gt; NFData CoinbaseOutput
forall a. (a -&gt; ()) -&gt; NFData a
rnf :: CoinbaseOutput -&gt; ()
$crnf :: CoinbaseOutput -&gt; ()
</span><a href="#local-6989586621681469471"><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-453"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681469465"><span id="local-6989586621681469467"><span id="local-6989586621681469469"><span class="annot"><span class="annottext">CoinbaseOutput -&gt; Int
CoinbaseOutput -&gt; Ptr p -&gt; IO ()
CoinbaseOutput -&gt; (Ptr p -&gt; IO a) -&gt; IO a
(CoinbaseOutput -&gt; Int)
-&gt; (forall p a. CoinbaseOutput -&gt; (Ptr p -&gt; IO a) -&gt; IO a)
-&gt; (forall p. CoinbaseOutput -&gt; Ptr p -&gt; IO ())
-&gt; ByteArrayAccess CoinbaseOutput
forall p. CoinbaseOutput -&gt; Ptr p -&gt; IO ()
forall ba.
(ba -&gt; Int)
-&gt; (forall p a. ba -&gt; (Ptr p -&gt; IO a) -&gt; IO a)
-&gt; (forall p. ba -&gt; Ptr p -&gt; IO ())
-&gt; ByteArrayAccess ba
forall p a. CoinbaseOutput -&gt; (Ptr p -&gt; IO a) -&gt; IO a
copyByteArrayToPtr :: CoinbaseOutput -&gt; Ptr p -&gt; IO ()
$ccopyByteArrayToPtr :: forall p. CoinbaseOutput -&gt; Ptr p -&gt; IO ()
withByteArray :: CoinbaseOutput -&gt; (Ptr p -&gt; IO a) -&gt; IO a
$cwithByteArray :: forall p a. CoinbaseOutput -&gt; (Ptr p -&gt; IO a) -&gt; IO a
length :: CoinbaseOutput -&gt; Int
$clength :: CoinbaseOutput -&gt; Int
</span><a href="#local-6989586621681469465"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">BA.ByteArrayAccess</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681469461"><span id="local-6989586621681469463"><span class="annot"><span class="annottext">Int -&gt; CoinbaseOutput -&gt; Int
CoinbaseOutput -&gt; Int
(Int -&gt; CoinbaseOutput -&gt; Int)
-&gt; (CoinbaseOutput -&gt; Int) -&gt; Hashable CoinbaseOutput
forall a. (Int -&gt; a -&gt; Int) -&gt; (a -&gt; Int) -&gt; Hashable a
hash :: CoinbaseOutput -&gt; Int
$chash :: CoinbaseOutput -&gt; Int
hashWithSalt :: Int -&gt; CoinbaseOutput -&gt; Int
$chashWithSalt :: Int -&gt; CoinbaseOutput -&gt; Int
</span><a href="#local-6989586621681469461"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Hashable</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-454"></span><span>
</span><span id="line-455"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681469456"><span id="local-6989586621681469459"><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#CoinbaseOutput"><span class="hs-identifier hs-type">CoinbaseOutput</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-456"></span><span>    </span><span id="local-6989586621681469455"><span class="annot"><span class="annottext">show :: CoinbaseOutput -&gt; String
</span><a href="#local-6989586621681469455"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; String
</span><span class="hs-identifier hs-var">T.unpack</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; String)
-&gt; (CoinbaseOutput -&gt; Text) -&gt; CoinbaseOutput -&gt; String
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">CoinbaseOutput -&gt; Text
forall a. ToJSON a =&gt; a -&gt; Text
</span><a href="Chainweb.Utils.html#encodeToText"><span class="hs-identifier hs-var">encodeToText</span></a></span><span>
</span><span id="line-457"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">show</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-458"></span><span>
</span><span id="line-459"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681469448"><span id="local-6989586621681469450"><span id="local-6989586621681469452"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#CoinbaseOutput"><span class="hs-identifier hs-type">CoinbaseOutput</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-460"></span><span>    </span><span id="local-6989586621681469447"><span class="annot"><span class="annottext">toJSON :: CoinbaseOutput -&gt; Value
</span><a href="#local-6989586621681469447"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Value)
-&gt; (CoinbaseOutput -&gt; Text) -&gt; CoinbaseOutput -&gt; Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Text
</span><a href="Chainweb.Utils.html#encodeB64UrlNoPaddingText"><span class="hs-identifier hs-var">encodeB64UrlNoPaddingText</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Text)
-&gt; (CoinbaseOutput -&gt; ByteString) -&gt; CoinbaseOutput -&gt; Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">CoinbaseOutput -&gt; ByteString
</span><a href="Chainweb.Payload.html#_coinbaseOutput"><span class="hs-identifier hs-var hs-var">_coinbaseOutput</span></a></span><span>
</span><span id="line-461"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">toJSON</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-462"></span><span>
</span><span id="line-463"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681469444"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#CoinbaseOutput"><span class="hs-identifier hs-type">CoinbaseOutput</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-464"></span><span>    </span><span id="local-6989586621681469443"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser CoinbaseOutput
</span><a href="#local-6989586621681469443"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Value -&gt; Parser CoinbaseOutput
forall a. HasTextRepresentation a =&gt; String -&gt; Value -&gt; Parser a
</span><a href="Chainweb.Utils.html#parseJsonFromText"><span class="hs-identifier hs-var">parseJsonFromText</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;CoinbaseOutput&quot;</span></span><span>
</span><span id="line-465"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">parseJSON</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-466"></span><span>
</span><span id="line-467"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Chainweb.Crypto.MerkleLog.html#IsMerkleLogEntry"><span class="hs-identifier hs-type">IsMerkleLogEntry</span></a></span><span> </span><span class="annot"><a href="Chainweb.MerkleUniverse.html#ChainwebHashTag"><span class="hs-identifier hs-type">ChainwebHashTag</span></a></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#CoinbaseOutput"><span class="hs-identifier hs-type">CoinbaseOutput</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-468"></span><span>    </span><span class="hs-keyword">type</span><span> </span><span id="Tag"><span class="annot"><a href="Chainweb.Crypto.MerkleLog.html#Tag"><span class="hs-identifier hs-var">Tag</span></a></span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#CoinbaseOutput"><span class="hs-identifier hs-type">CoinbaseOutput</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Chainweb.MerkleUniverse.html#CoinbaseOutputTag"><span class="hs-identifier hs-type">CoinbaseOutputTag</span></a></span><span>
</span><span id="line-469"></span><span>    </span><span id="local-6989586621681469438"><span class="annot"><span class="annottext">toMerkleNode :: CoinbaseOutput
-&gt; MerkleNodeType (HashAlg ChainwebHashTag) ByteString
</span><a href="#local-6989586621681469438"><span class="hs-identifier hs-var hs-var hs-var hs-var">toMerkleNode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; MerkleNodeType SHA512t_256 ByteString
forall a b. b -&gt; MerkleNodeType a b
</span><span class="hs-identifier hs-var">InputNode</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; MerkleNodeType SHA512t_256 ByteString)
-&gt; (CoinbaseOutput -&gt; ByteString)
-&gt; CoinbaseOutput
-&gt; MerkleNodeType SHA512t_256 ByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">CoinbaseOutput -&gt; ByteString
</span><a href="Chainweb.Payload.html#_coinbaseOutput"><span class="hs-identifier hs-var hs-var">_coinbaseOutput</span></a></span><span>
</span><span id="line-470"></span><span>    </span><span id="local-6989586621681469437"><span class="annot"><span class="annottext">fromMerkleNode :: MerkleNodeType (HashAlg ChainwebHashTag) ByteString
-&gt; Either SomeException CoinbaseOutput
</span><a href="#local-6989586621681469437"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromMerkleNode</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">InputNode</span></span><span> </span><span id="local-6989586621681469436"><span class="annot"><span class="annottext">bytes :: ByteString
</span><a href="#local-6989586621681469436"><span class="hs-identifier hs-var">bytes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoinbaseOutput -&gt; Either SomeException CoinbaseOutput
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">(CoinbaseOutput -&gt; Either SomeException CoinbaseOutput)
-&gt; CoinbaseOutput -&gt; Either SomeException CoinbaseOutput
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; CoinbaseOutput
</span><a href="Chainweb.Payload.html#CoinbaseOutput"><span class="hs-identifier hs-var">CoinbaseOutput</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621681469436"><span class="hs-identifier hs-var">bytes</span></a></span><span>
</span><span id="line-471"></span><span>    </span><span class="annot"><a href="Chainweb.Crypto.MerkleLog.html#fromMerkleNode"><span class="hs-identifier hs-var">fromMerkleNode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TreeNode</span></span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MerkleLogException -&gt; Either SomeException CoinbaseOutput
forall (m :: * -&gt; *) e a. (MonadThrow m, Exception e) =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwM</span></span><span> </span><span class="annot"><span class="annottext">MerkleLogException
</span><a href="Chainweb.Crypto.MerkleLog.html#expectedInputNodeException"><span class="hs-identifier hs-var">expectedInputNodeException</span></a></span><span>
</span><span id="line-472"></span><span>
</span><span id="line-473"></span><span class="annot"><a href="Chainweb.Payload.html#coinbaseOutputToText"><span class="hs-identifier hs-type">coinbaseOutputToText</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#CoinbaseOutput"><span class="hs-identifier hs-type">CoinbaseOutput</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span>
</span><span id="line-474"></span><span id="coinbaseOutputToText"><span class="annot"><span class="annottext">coinbaseOutputToText :: CoinbaseOutput -&gt; Text
</span><a href="Chainweb.Payload.html#coinbaseOutputToText"><span class="hs-identifier hs-var hs-var">coinbaseOutputToText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Text
</span><a href="Chainweb.Utils.html#encodeB64UrlNoPaddingText"><span class="hs-identifier hs-var">encodeB64UrlNoPaddingText</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Text)
-&gt; (CoinbaseOutput -&gt; ByteString) -&gt; CoinbaseOutput -&gt; Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">CoinbaseOutput -&gt; ByteString
</span><a href="Chainweb.Payload.html#_coinbaseOutput"><span class="hs-identifier hs-var hs-var">_coinbaseOutput</span></a></span><span>
</span><span id="line-475"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#coinbaseOutputToText"><span class="hs-pragma hs-type">coinbaseOutputToText</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-476"></span><span>
</span><span id="line-477"></span><span id="local-6989586621681469434"><span class="annot"><a href="Chainweb.Payload.html#coinbaseOutputFromText"><span class="hs-identifier hs-type">coinbaseOutputFromText</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621681469434"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681469434"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#CoinbaseOutput"><span class="hs-identifier hs-type">CoinbaseOutput</span></a></span></span><span>
</span><span id="line-478"></span><span id="coinbaseOutputFromText"><span class="annot"><span class="annottext">coinbaseOutputFromText :: Text -&gt; m CoinbaseOutput
</span><a href="Chainweb.Payload.html#coinbaseOutputFromText"><span class="hs-identifier hs-var hs-var">coinbaseOutputFromText</span></a></span></span><span> </span><span id="local-6989586621681469432"><span class="annot"><span class="annottext">t :: Text
</span><a href="#local-6989586621681469432"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(SomeException -&gt; m CoinbaseOutput)
-&gt; (CoinbaseOutput -&gt; m CoinbaseOutput)
-&gt; Either SomeException CoinbaseOutput
-&gt; m CoinbaseOutput
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><span class="hs-identifier hs-var">either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EncodingException -&gt; m CoinbaseOutput
forall (m :: * -&gt; *) e a. (MonadThrow m, Exception e) =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwM</span></span><span> </span><span class="annot"><span class="annottext">(EncodingException -&gt; m CoinbaseOutput)
-&gt; (SomeException -&gt; EncodingException)
-&gt; SomeException
-&gt; m CoinbaseOutput
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; EncodingException
</span><a href="Chainweb.Utils.html#TextFormatException"><span class="hs-identifier hs-var">TextFormatException</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; EncodingException)
-&gt; (SomeException -&gt; Text) -&gt; SomeException -&gt; EncodingException
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">SomeException -&gt; Text
forall a b. (Show a, IsString b) =&gt; a -&gt; b
</span><a href="Chainweb.Utils.html#sshow"><span class="hs-identifier hs-var">sshow</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CoinbaseOutput -&gt; m CoinbaseOutput
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span>
</span><span id="line-479"></span><span>    </span><span class="annot"><span class="annottext">(Either SomeException CoinbaseOutput -&gt; m CoinbaseOutput)
-&gt; Either SomeException CoinbaseOutput -&gt; m CoinbaseOutput
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; CoinbaseOutput
</span><a href="Chainweb.Payload.html#CoinbaseOutput"><span class="hs-identifier hs-var">CoinbaseOutput</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; CoinbaseOutput)
-&gt; Either SomeException ByteString
-&gt; Either SomeException CoinbaseOutput
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">&lt;$!&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Either SomeException ByteString
forall (m :: * -&gt; *). MonadThrow m =&gt; Text -&gt; m ByteString
</span><a href="Chainweb.Utils.html#decodeB64UrlNoPaddingText"><span class="hs-identifier hs-var">decodeB64UrlNoPaddingText</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681469432"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-480"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#coinbaseOutputFromText"><span class="hs-pragma hs-type">coinbaseOutputFromText</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-481"></span><span>
</span><span id="line-482"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Chainweb.Utils.html#HasTextRepresentation"><span class="hs-identifier hs-type">HasTextRepresentation</span></a></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#CoinbaseOutput"><span class="hs-identifier hs-type">CoinbaseOutput</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-483"></span><span>    </span><span id="local-6989586621681469429"><span class="annot"><span class="annottext">toText :: CoinbaseOutput -&gt; Text
</span><a href="#local-6989586621681469429"><span class="hs-identifier hs-var hs-var hs-var hs-var">toText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoinbaseOutput -&gt; Text
</span><a href="Chainweb.Payload.html#coinbaseOutputToText"><span class="hs-identifier hs-var">coinbaseOutputToText</span></a></span><span>
</span><span id="line-484"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Chainweb.Utils.html#toText"><span class="hs-pragma hs-type">toText</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-485"></span><span>    </span><span id="local-6989586621681469428"><span class="annot"><span class="annottext">fromText :: Text -&gt; m CoinbaseOutput
</span><a href="#local-6989586621681469428"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; m CoinbaseOutput
forall (m :: * -&gt; *). MonadThrow m =&gt; Text -&gt; m CoinbaseOutput
</span><a href="Chainweb.Payload.html#coinbaseOutputFromText"><span class="hs-identifier hs-var">coinbaseOutputFromText</span></a></span><span>
</span><span id="line-486"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Chainweb.Utils.html#fromText"><span class="hs-pragma hs-type">fromText</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-487"></span><span>
</span><span id="line-488"></span><span>
</span><span id="line-489"></span><span class="hs-comment">-- -------------------------------------------------------------------------- --</span><span>
</span><span id="line-490"></span><span class="hs-comment">-- Block Outputs</span><span>
</span><span id="line-491"></span><span>
</span><span id="line-492"></span><span class="hs-comment">-- | All outputs of the transactions of a block.</span><span>
</span><span id="line-493"></span><span class="hs-comment">--</span><span>
</span><span id="line-494"></span><span class="hs-comment">-- NOTE: the block outputs are associated with the respective block in the</span><span>
</span><span id="line-495"></span><span class="hs-comment">-- 'BlockPayload' structure for the block.</span><span>
</span><span id="line-496"></span><span class="hs-comment">--</span><span>
</span><span id="line-497"></span><span class="hs-keyword">data</span><span> </span><span id="BlockOutputs"><span class="annot"><a href="Chainweb.Payload.html#BlockOutputs"><span class="hs-identifier hs-var">BlockOutputs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="BlockOutputs"><span class="annot"><a href="Chainweb.Payload.html#BlockOutputs"><span class="hs-identifier hs-var">BlockOutputs</span></a></span></span><span>
</span><span id="line-498"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="_blockOutputsHash"><span class="annot"><span class="annottext">BlockOutputs -&gt; BlockOutputsHash
</span><a href="Chainweb.Payload.html#_blockOutputsHash"><span class="hs-identifier hs-var hs-var">_blockOutputsHash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Chainweb.Payload.html#BlockOutputsHash"><span class="hs-identifier hs-type">BlockOutputsHash</span></a></span><span>
</span><span id="line-499"></span><span>        </span><span class="hs-comment">-- ^ Root of 'OutputTree' of the block. Primary key of</span><span>
</span><span id="line-500"></span><span>        </span><span class="hs-comment">-- 'BlockOutputsStore'. Foreign key into 'OutputTreeStore'.</span><span>
</span><span id="line-501"></span><span>
</span><span id="line-502"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="_blockOutputs"><span class="annot"><span class="annottext">BlockOutputs -&gt; Vector TransactionOutput
</span><a href="Chainweb.Payload.html#_blockOutputs"><span class="hs-identifier hs-var hs-var">_blockOutputs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">V.Vector</span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#TransactionOutput"><span class="hs-identifier hs-type">TransactionOutput</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-503"></span><span>        </span><span class="hs-comment">-- ^ Output of all transactions of a block in the order of the</span><span>
</span><span id="line-504"></span><span>        </span><span class="hs-comment">-- transactions in the block.</span><span>
</span><span id="line-505"></span><span>
</span><span id="line-506"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="_blockCoinbaseOutput"><span class="annot"><span class="annottext">BlockOutputs -&gt; CoinbaseOutput
</span><a href="Chainweb.Payload.html#_blockCoinbaseOutput"><span class="hs-identifier hs-var hs-var">_blockCoinbaseOutput</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Chainweb.Payload.html#CoinbaseOutput"><span class="hs-identifier hs-type">CoinbaseOutput</span></a></span><span>
</span><span id="line-507"></span><span>        </span><span class="hs-comment">-- ^ Output of coinbase transaction.</span><span>
</span><span id="line-508"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-509"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681469418"><span id="local-6989586621681469420"><span id="local-6989586621681469422"><span class="annot"><span class="annottext">Int -&gt; BlockOutputs -&gt; ShowS
[BlockOutputs] -&gt; ShowS
BlockOutputs -&gt; String
(Int -&gt; BlockOutputs -&gt; ShowS)
-&gt; (BlockOutputs -&gt; String)
-&gt; ([BlockOutputs] -&gt; ShowS)
-&gt; Show BlockOutputs
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [BlockOutputs] -&gt; ShowS
$cshowList :: [BlockOutputs] -&gt; ShowS
show :: BlockOutputs -&gt; String
$cshow :: BlockOutputs -&gt; String
showsPrec :: Int -&gt; BlockOutputs -&gt; ShowS
$cshowsPrec :: Int -&gt; BlockOutputs -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-510"></span><span>
</span><span id="line-511"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681469411"><span id="local-6989586621681469413"><span id="local-6989586621681469415"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockOutputs"><span class="hs-identifier hs-type">BlockOutputs</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-512"></span><span>    </span><span id="local-6989586621681469410"><span class="annot"><span class="annottext">toJSON :: BlockOutputs -&gt; Value
</span><a href="#local-6989586621681469410"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span id="local-6989586621681469409"><span class="annot"><span class="annottext">o :: BlockOutputs
</span><a href="#local-6989586621681469409"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-513"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="hs-string">&quot;outputsHash&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; BlockOutputsHash -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">BlockOutputs -&gt; BlockOutputsHash
</span><a href="Chainweb.Payload.html#_blockOutputsHash"><span class="hs-identifier hs-var hs-var">_blockOutputsHash</span></a></span><span> </span><span class="annot"><span class="annottext">BlockOutputs
</span><a href="#local-6989586621681469409"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-514"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-string">&quot;outputs&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Vector TransactionOutput -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">BlockOutputs -&gt; Vector TransactionOutput
</span><a href="Chainweb.Payload.html#_blockOutputs"><span class="hs-identifier hs-var hs-var">_blockOutputs</span></a></span><span> </span><span class="annot"><span class="annottext">BlockOutputs
</span><a href="#local-6989586621681469409"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-515"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-string">&quot;coinbaseOutput&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; CoinbaseOutput -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">BlockOutputs -&gt; CoinbaseOutput
</span><a href="Chainweb.Payload.html#_blockCoinbaseOutput"><span class="hs-identifier hs-var hs-var">_blockCoinbaseOutput</span></a></span><span> </span><span class="annot"><span class="annottext">BlockOutputs
</span><a href="#local-6989586621681469409"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-516"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-517"></span><span>
</span><span id="line-518"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681469406"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockOutputs"><span class="hs-identifier hs-type">BlockOutputs</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-519"></span><span>    </span><span id="local-6989586621681469405"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser BlockOutputs
</span><a href="#local-6989586621681469405"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser BlockOutputs) -&gt; Value -&gt; Parser BlockOutputs
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">withObject</span></span><span> </span><span class="annot"><span class="hs-string">&quot;BlockOutputs&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Object -&gt; Parser BlockOutputs) -&gt; Value -&gt; Parser BlockOutputs)
-&gt; (Object -&gt; Parser BlockOutputs) -&gt; Value -&gt; Parser BlockOutputs
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681469404"><span class="annot"><span class="annottext">o :: Object
</span><a href="#local-6989586621681469404"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BlockOutputsHash
-&gt; Vector TransactionOutput -&gt; CoinbaseOutput -&gt; BlockOutputs
</span><a href="Chainweb.Payload.html#BlockOutputs"><span class="hs-identifier hs-var">BlockOutputs</span></a></span><span>
</span><span id="line-520"></span><span>        </span><span class="annot"><span class="annottext">(BlockOutputsHash
 -&gt; Vector TransactionOutput -&gt; CoinbaseOutput -&gt; BlockOutputs)
-&gt; Parser BlockOutputsHash
-&gt; Parser
     (Vector TransactionOutput -&gt; CoinbaseOutput -&gt; BlockOutputs)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">&lt;$!&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621681469404"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser BlockOutputsHash
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="hs-string">&quot;outputsHash&quot;</span></span><span>
</span><span id="line-521"></span><span>        </span><span class="annot"><span class="annottext">Parser (Vector TransactionOutput -&gt; CoinbaseOutput -&gt; BlockOutputs)
-&gt; Parser (Vector TransactionOutput)
-&gt; Parser (CoinbaseOutput -&gt; BlockOutputs)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621681469404"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Vector TransactionOutput)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="hs-string">&quot;outputs&quot;</span></span><span>
</span><span id="line-522"></span><span>        </span><span class="annot"><span class="annottext">Parser (CoinbaseOutput -&gt; BlockOutputs)
-&gt; Parser CoinbaseOutput -&gt; Parser BlockOutputs
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621681469404"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser CoinbaseOutput
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="hs-string">&quot;coinbaseOutput&quot;</span></span><span>
</span><span id="line-523"></span><span>
</span><span id="line-524"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsCasValue</span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockOutputs"><span class="hs-identifier hs-type">BlockOutputs</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-525"></span><span>    </span><span class="hs-keyword">type</span><span> </span><span id="CasKeyType"><span class="annot"><span class="hs-identifier hs-var">CasKeyType</span></span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockOutputs"><span class="hs-identifier hs-type">BlockOutputs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockOutputsHash"><span class="hs-identifier hs-type">BlockOutputsHash</span></a></span><span>
</span><span id="line-526"></span><span>    </span><span id="local-6989586621681469401"><span class="annot"><span class="annottext">casKey :: BlockOutputs -&gt; CasKeyType BlockOutputs
</span><a href="#local-6989586621681469401"><span class="hs-identifier hs-var hs-var hs-var hs-var">casKey</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockOutputs -&gt; CasKeyType BlockOutputs
BlockOutputs -&gt; BlockOutputsHash
</span><a href="Chainweb.Payload.html#_blockOutputsHash"><span class="hs-identifier hs-var hs-var">_blockOutputsHash</span></a></span><span>
</span><span id="line-527"></span><span>
</span><span id="line-528"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Chainweb.Crypto.MerkleLog.html#HasMerkleLog"><span class="hs-identifier hs-type">HasMerkleLog</span></a></span><span> </span><span class="annot"><a href="Chainweb.MerkleUniverse.html#ChainwebHashTag"><span class="hs-identifier hs-type">ChainwebHashTag</span></a></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockOutputs"><span class="hs-identifier hs-type">BlockOutputs</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-529"></span><span>    </span><span class="hs-keyword">type</span><span> </span><span id="MerkleLogHeader"><span class="annot"><a href="Chainweb.Crypto.MerkleLog.html#MerkleLogHeader"><span class="hs-identifier hs-var">MerkleLogHeader</span></a></span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockOutputs"><span class="hs-identifier hs-type">BlockOutputs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="annot"><a href="Chainweb.Payload.html#CoinbaseOutput"><span class="hs-identifier hs-type">CoinbaseOutput</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-530"></span><span>    </span><span class="hs-keyword">type</span><span> </span><span id="MerkleLogBody"><span class="annot"><a href="Chainweb.Crypto.MerkleLog.html#MerkleLogBody"><span class="hs-identifier hs-var">MerkleLogBody</span></a></span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockOutputs"><span class="hs-identifier hs-type">BlockOutputs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#TransactionOutput"><span class="hs-identifier hs-type">TransactionOutput</span></a></span><span>
</span><span id="line-531"></span><span>
</span><span id="line-532"></span><span>    </span><span id="local-6989586621681469396"><span class="annot"><span class="annottext">toLog :: BlockOutputs
-&gt; MerkleLog
     ChainwebHashTag
     (MerkleLogHeader BlockOutputs)
     (MerkleLogBody BlockOutputs)
</span><a href="#local-6989586621681469396"><span class="hs-identifier hs-var hs-var hs-var hs-var">toLog</span></a></span></span><span> </span><span id="local-6989586621681469395"><span class="annot"><span class="annottext">a :: BlockOutputs
</span><a href="#local-6989586621681469395"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MerkleRoot (HashAlg ChainwebHashTag)
-&gt; MerkleLogEntries
     ChainwebHashTag '[CoinbaseOutput] TransactionOutput
-&gt; MerkleLog ChainwebHashTag '[CoinbaseOutput] TransactionOutput
forall u (h :: [*]) b.
HashAlgorithm (HashAlg u) =&gt;
MerkleRoot (HashAlg u) -&gt; MerkleLogEntries u h b -&gt; MerkleLog u h b
</span><a href="Chainweb.Crypto.MerkleLog.html#merkleLog"><span class="hs-identifier hs-var">merkleLog</span></a></span><span> </span><span class="annot"><span class="annottext">MerkleRoot (HashAlg ChainwebHashTag)
</span><a href="#local-6989586621681469394"><span class="hs-identifier hs-var">root</span></a></span><span> </span><span class="annot"><span class="annottext">MerkleLogEntries
  ChainwebHashTag '[CoinbaseOutput] TransactionOutput
</span><a href="#local-6989586621681469393"><span class="hs-identifier hs-var">entries</span></a></span><span>
</span><span id="line-533"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-534"></span><span>        </span><span class="annot"><a href="Chainweb.Payload.html#BlockOutputsHash"><span class="hs-identifier hs-type">BlockOutputsHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Chainweb.MerkleLogHash.html#MerkleLogHash"><span class="hs-identifier hs-type">MerkleLogHash</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">!</span><span id="local-6989586621681469394"><span class="annot"><span class="annottext">MerkleRoot (HashAlg ChainwebHashTag)
</span><a href="#local-6989586621681469394"><span class="hs-identifier hs-var">root</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockOutputs -&gt; BlockOutputsHash
</span><a href="Chainweb.Payload.html#_blockOutputsHash"><span class="hs-identifier hs-var hs-var">_blockOutputsHash</span></a></span><span> </span><span class="annot"><span class="annottext">BlockOutputs
</span><a href="#local-6989586621681469395"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-535"></span><span>        </span><span class="hs-glyph">!</span><span id="local-6989586621681469393"><span class="annot"><span class="annottext">entries :: MerkleLogEntries
  ChainwebHashTag '[CoinbaseOutput] TransactionOutput
</span><a href="#local-6989586621681469393"><span class="hs-identifier hs-var hs-var">entries</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockOutputs -&gt; CoinbaseOutput
</span><a href="Chainweb.Payload.html#_blockCoinbaseOutput"><span class="hs-identifier hs-var hs-var">_blockCoinbaseOutput</span></a></span><span> </span><span class="annot"><span class="annottext">BlockOutputs
</span><a href="#local-6989586621681469395"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">CoinbaseOutput
-&gt; MerkleLogEntries ChainwebHashTag '[] TransactionOutput
-&gt; MerkleLogEntries
     ChainwebHashTag '[CoinbaseOutput] TransactionOutput
forall u h (t :: [*]) b.
IsMerkleLogEntry u h =&gt;
h -&gt; MerkleLogEntries u t b -&gt; MerkleLogEntries u (h : t) b
</span><a href="Chainweb.Crypto.MerkleLog.html#%3A%2B%3A"><span class="hs-operator hs-var">:+:</span></a></span><span> </span><span class="annot"><span class="annottext">Vector TransactionOutput
-&gt; MerkleLogEntries ChainwebHashTag '[] TransactionOutput
forall u b.
IsMerkleLogEntry u b =&gt;
Vector b -&gt; MerkleLogEntries u '[] b
</span><a href="Chainweb.Crypto.MerkleLog.html#MerkleLogBody"><span class="hs-identifier hs-var">MerkleLogBody</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BlockOutputs -&gt; Vector TransactionOutput
</span><a href="Chainweb.Payload.html#_blockOutputs"><span class="hs-identifier hs-var hs-var">_blockOutputs</span></a></span><span> </span><span class="annot"><span class="annottext">BlockOutputs
</span><a href="#local-6989586621681469395"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-536"></span><span>
</span><span id="line-537"></span><span>    </span><span id="local-6989586621681469392"><span class="annot"><span class="annottext">fromLog :: MerkleLog
  ChainwebHashTag
  (MerkleLogHeader BlockOutputs)
  (MerkleLogBody BlockOutputs)
-&gt; BlockOutputs
</span><a href="#local-6989586621681469392"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromLog</span></a></span></span><span> </span><span id="local-6989586621681469391"><span class="annot"><span class="annottext">l :: MerkleLog
  ChainwebHashTag
  (MerkleLogHeader BlockOutputs)
  (MerkleLogBody BlockOutputs)
</span><a href="#local-6989586621681469391"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">$WBlockOutputs :: BlockOutputsHash
-&gt; Vector TransactionOutput -&gt; CoinbaseOutput -&gt; BlockOutputs
</span><a href="Chainweb.Payload.html#%24WBlockOutputs"><span class="hs-identifier hs-type hs-type">BlockOutputs</span></a></span><span>
</span><span id="line-538"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_blockOutputsHash :: BlockOutputsHash
</span><a href="Chainweb.Payload.html#_blockOutputsHash"><span class="hs-identifier hs-var">_blockOutputsHash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MerkleLogHash -&gt; BlockOutputsHash
</span><a href="Chainweb.Payload.html#BlockOutputsHash"><span class="hs-identifier hs-var">BlockOutputsHash</span></a></span><span> </span><span class="annot"><span class="annottext">(MerkleLogHash -&gt; BlockOutputsHash)
-&gt; MerkleLogHash -&gt; BlockOutputsHash
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">MerkleRoot SHA512t_256 -&gt; MerkleLogHash
MerkleRoot (HashAlg ChainwebHashTag) -&gt; MerkleLogHash
</span><a href="Chainweb.MerkleLogHash.html#MerkleLogHash"><span class="hs-identifier hs-var">MerkleLogHash</span></a></span><span> </span><span class="annot"><span class="annottext">(MerkleRoot SHA512t_256 -&gt; MerkleLogHash)
-&gt; MerkleRoot SHA512t_256 -&gt; MerkleLogHash
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">MerkleLog ChainwebHashTag '[CoinbaseOutput] TransactionOutput
-&gt; MerkleRoot (HashAlg ChainwebHashTag)
forall u (h :: [*]) b. MerkleLog u h b -&gt; MerkleRoot (HashAlg u)
</span><a href="Chainweb.Crypto.MerkleLog.html#_merkleLogRoot"><span class="hs-identifier hs-var hs-var">_merkleLogRoot</span></a></span><span> </span><span class="annot"><span class="annottext">MerkleLog ChainwebHashTag '[CoinbaseOutput] TransactionOutput
MerkleLog
  ChainwebHashTag
  (MerkleLogHeader BlockOutputs)
  (MerkleLogBody BlockOutputs)
</span><a href="#local-6989586621681469391"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-539"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_blockOutputs :: Vector TransactionOutput
</span><a href="Chainweb.Payload.html#_blockOutputs"><span class="hs-identifier hs-var">_blockOutputs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Vector TransactionOutput
</span><a href="#local-6989586621681469389"><span class="hs-identifier hs-var">outs</span></a></span><span>
</span><span id="line-540"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_blockCoinbaseOutput :: CoinbaseOutput
</span><a href="Chainweb.Payload.html#_blockCoinbaseOutput"><span class="hs-identifier hs-var">_blockCoinbaseOutput</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoinbaseOutput
</span><a href="#local-6989586621681469388"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-541"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-542"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-543"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621681469388"><span class="annot"><a href="#local-6989586621681469388"><span class="hs-identifier hs-var">co</span></a></span></span><span> </span><span class="annot"><a href="Chainweb.Crypto.MerkleLog.html#%3A%2B%3A"><span class="hs-operator hs-type">:+:</span></a></span><span> </span><span class="annot"><a href="Chainweb.Crypto.MerkleLog.html#MerkleLogBody"><span class="hs-identifier hs-type">MerkleLogBody</span></a></span><span> </span><span id="local-6989586621681469389"><span class="annot"><a href="#local-6989586621681469389"><span class="hs-identifier hs-var">outs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MerkleLog ChainwebHashTag '[CoinbaseOutput] TransactionOutput
-&gt; MerkleLogEntries
     ChainwebHashTag '[CoinbaseOutput] TransactionOutput
forall u (h :: [*]) b. MerkleLog u h b -&gt; MerkleLogEntries u h b
</span><a href="Chainweb.Crypto.MerkleLog.html#_merkleLogEntries"><span class="hs-identifier hs-var hs-var">_merkleLogEntries</span></a></span><span> </span><span class="annot"><span class="annottext">MerkleLog ChainwebHashTag '[CoinbaseOutput] TransactionOutput
MerkleLog
  ChainwebHashTag
  (MerkleLogHeader BlockOutputs)
  (MerkleLogBody BlockOutputs)
</span><a href="#local-6989586621681469391"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-544"></span><span>
</span><span id="line-545"></span><span class="hs-keyword">type</span><span> </span><span id="BlockOutputsLog"><span class="annot"><a href="Chainweb.Payload.html#BlockOutputsLog"><span class="hs-identifier hs-var">BlockOutputsLog</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Chainweb.Crypto.MerkleLog.html#MkLogType"><span class="hs-identifier hs-type">MkLogType</span></a></span><span> </span><span class="annot"><a href="Chainweb.MerkleUniverse.html#ChainwebHashTag"><span class="hs-identifier hs-type">ChainwebHashTag</span></a></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockOutputs"><span class="hs-identifier hs-type">BlockOutputs</span></a></span><span>
</span><span id="line-546"></span><span>
</span><span id="line-547"></span><span class="hs-comment">-- -------------------------------------------------------------------------- --</span><span>
</span><span id="line-548"></span><span class="hs-comment">-- Transaction Merkle Tree</span><span>
</span><span id="line-549"></span><span>
</span><span id="line-550"></span><span class="hs-comment">-- | Merkle tree for the transactions in a block.</span><span>
</span><span id="line-551"></span><span class="hs-comment">--</span><span>
</span><span id="line-552"></span><span class="hs-keyword">data</span><span> </span><span id="TransactionTree"><span class="annot"><a href="Chainweb.Payload.html#TransactionTree"><span class="hs-identifier hs-var">TransactionTree</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="TransactionTree"><span class="annot"><a href="Chainweb.Payload.html#TransactionTree"><span class="hs-identifier hs-var">TransactionTree</span></a></span></span><span>
</span><span id="line-553"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="_transactionTreeHash"><span class="annot"><span class="annottext">TransactionTree -&gt; BlockTransactionsHash
</span><a href="Chainweb.Payload.html#_transactionTreeHash"><span class="hs-identifier hs-var hs-var">_transactionTreeHash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Chainweb.Payload.html#BlockTransactionsHash"><span class="hs-identifier hs-type">BlockTransactionsHash</span></a></span><span>
</span><span id="line-554"></span><span>        </span><span class="hs-comment">-- ^ Root of '_transactionTree'. Primary key of 'TransactionTreeStore.</span><span>
</span><span id="line-555"></span><span>        </span><span class="hs-comment">-- Foreign key into 'BlockTransactionsStore'.</span><span>
</span><span id="line-556"></span><span>
</span><span id="line-557"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="_transactionTree"><span class="annot"><span class="annottext">TransactionTree -&gt; MerkleTree SHA512t_256
</span><a href="Chainweb.Payload.html#_transactionTree"><span class="hs-identifier hs-var hs-var">_transactionTree</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MerkleTree</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">SHA512t_256</span></span><span class="hs-special">)</span><span>
</span><span id="line-558"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-559"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681469379"><span id="local-6989586621681469381"><span id="local-6989586621681469383"><span class="annot"><span class="annottext">Int -&gt; TransactionTree -&gt; ShowS
[TransactionTree] -&gt; ShowS
TransactionTree -&gt; String
(Int -&gt; TransactionTree -&gt; ShowS)
-&gt; (TransactionTree -&gt; String)
-&gt; ([TransactionTree] -&gt; ShowS)
-&gt; Show TransactionTree
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [TransactionTree] -&gt; ShowS
$cshowList :: [TransactionTree] -&gt; ShowS
show :: TransactionTree -&gt; String
$cshow :: TransactionTree -&gt; String
showsPrec :: Int -&gt; TransactionTree -&gt; ShowS
$cshowsPrec :: Int -&gt; TransactionTree -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-560"></span><span>
</span><span id="line-561"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsCasValue</span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#TransactionTree"><span class="hs-identifier hs-type">TransactionTree</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-562"></span><span>    </span><span class="hs-keyword">type</span><span> </span><span id="CasKeyType"><span class="annot"><span class="hs-identifier hs-var">CasKeyType</span></span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#TransactionTree"><span class="hs-identifier hs-type">TransactionTree</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockTransactionsHash"><span class="hs-identifier hs-type">BlockTransactionsHash</span></a></span><span>
</span><span id="line-563"></span><span>    </span><span id="local-6989586621681469376"><span class="annot"><span class="annottext">casKey :: TransactionTree -&gt; CasKeyType TransactionTree
</span><a href="#local-6989586621681469376"><span class="hs-identifier hs-var hs-var hs-var hs-var">casKey</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TransactionTree -&gt; CasKeyType TransactionTree
TransactionTree -&gt; BlockTransactionsHash
</span><a href="Chainweb.Payload.html#_transactionTreeHash"><span class="hs-identifier hs-var hs-var">_transactionTreeHash</span></a></span><span>
</span><span id="line-564"></span><span>
</span><span id="line-565"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681469369"><span id="local-6989586621681469371"><span id="local-6989586621681469373"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#TransactionTree"><span class="hs-identifier hs-type">TransactionTree</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-566"></span><span>    </span><span id="local-6989586621681469368"><span class="annot"><span class="annottext">toJSON :: TransactionTree -&gt; Value
</span><a href="#local-6989586621681469368"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span id="local-6989586621681469367"><span class="annot"><span class="annottext">o :: TransactionTree
</span><a href="#local-6989586621681469367"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-567"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="hs-string">&quot;hash&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; BlockTransactionsHash -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">TransactionTree -&gt; BlockTransactionsHash
</span><a href="Chainweb.Payload.html#_transactionTreeHash"><span class="hs-identifier hs-var hs-var">_transactionTreeHash</span></a></span><span> </span><span class="annot"><span class="annottext">TransactionTree
</span><a href="#local-6989586621681469367"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-568"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-string">&quot;tree&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">MerkleTree SHA512t_256 -&gt; Value
forall a. MerkleTree a -&gt; Value
</span><a href="Chainweb.Payload.html#merkleTreeToJson"><span class="hs-identifier hs-var">merkleTreeToJson</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TransactionTree -&gt; MerkleTree SHA512t_256
</span><a href="Chainweb.Payload.html#_transactionTree"><span class="hs-identifier hs-var hs-var">_transactionTree</span></a></span><span> </span><span class="annot"><span class="annottext">TransactionTree
</span><a href="#local-6989586621681469367"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-569"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-570"></span><span>
</span><span id="line-571"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681469363"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#TransactionTree"><span class="hs-identifier hs-type">TransactionTree</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-572"></span><span>    </span><span id="local-6989586621681469362"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser TransactionTree
</span><a href="#local-6989586621681469362"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser TransactionTree)
-&gt; Value
-&gt; Parser TransactionTree
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">withObject</span></span><span> </span><span class="annot"><span class="hs-string">&quot;TransactionTree&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Object -&gt; Parser TransactionTree)
 -&gt; Value -&gt; Parser TransactionTree)
-&gt; (Object -&gt; Parser TransactionTree)
-&gt; Value
-&gt; Parser TransactionTree
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681469361"><span class="annot"><span class="annottext">o :: Object
</span><a href="#local-6989586621681469361"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BlockTransactionsHash -&gt; MerkleTree SHA512t_256 -&gt; TransactionTree
</span><a href="Chainweb.Payload.html#TransactionTree"><span class="hs-identifier hs-var">TransactionTree</span></a></span><span>
</span><span id="line-573"></span><span>        </span><span class="annot"><span class="annottext">(BlockTransactionsHash
 -&gt; MerkleTree SHA512t_256 -&gt; TransactionTree)
-&gt; Parser BlockTransactionsHash
-&gt; Parser (MerkleTree SHA512t_256 -&gt; TransactionTree)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">&lt;$!&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621681469361"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser BlockTransactionsHash
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="hs-string">&quot;hash&quot;</span></span><span>
</span><span id="line-574"></span><span>        </span><span class="annot"><span class="annottext">Parser (MerkleTree SHA512t_256 -&gt; TransactionTree)
-&gt; Parser (MerkleTree SHA512t_256) -&gt; Parser TransactionTree
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621681469361"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser Value
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="hs-string">&quot;tree&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser Value
-&gt; (Value -&gt; Parser (MerkleTree SHA512t_256))
-&gt; Parser (MerkleTree SHA512t_256)
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser (MerkleTree SHA512t_256)
forall a. HashAlgorithm a =&gt; Value -&gt; Parser (MerkleTree a)
</span><a href="Chainweb.Payload.html#merkleTreeFromJson"><span class="hs-identifier hs-var">merkleTreeFromJson</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-575"></span><span>
</span><span id="line-576"></span><span id="local-6989586621681470140"><span class="annot"><a href="Chainweb.Payload.html#merkleTreeToJson"><span class="hs-identifier hs-type">merkleTreeToJson</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MerkleTree</span></span><span> </span><span class="annot"><a href="#local-6989586621681470140"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Value</span></span></span><span>
</span><span id="line-577"></span><span id="merkleTreeToJson"><span class="annot"><span class="annottext">merkleTreeToJson :: MerkleTree a -&gt; Value
</span><a href="Chainweb.Payload.html#merkleTreeToJson"><span class="hs-identifier hs-var hs-var">merkleTreeToJson</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Value) -&gt; (MerkleTree a -&gt; Text) -&gt; MerkleTree a -&gt; Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Text
</span><a href="Chainweb.Utils.html#encodeB64UrlNoPaddingText"><span class="hs-identifier hs-var">encodeB64UrlNoPaddingText</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Text)
-&gt; (MerkleTree a -&gt; ByteString) -&gt; MerkleTree a -&gt; Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">MerkleTree a -&gt; ByteString
forall b a. ByteArray b =&gt; MerkleTree a -&gt; b
</span><span class="hs-identifier hs-var">encodeMerkleTree</span></span><span>
</span><span id="line-578"></span><span>
</span><span id="line-579"></span><span id="local-6989586621681470137"><span class="annot"><a href="Chainweb.Payload.html#merkleTreeFromJson"><span class="hs-identifier hs-type">merkleTreeFromJson</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HashAlgorithm</span></span><span> </span><span class="annot"><a href="#local-6989586621681470137"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Value</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.Parser</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MerkleTree</span></span><span> </span><span class="annot"><a href="#local-6989586621681470137"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-580"></span><span id="merkleTreeFromJson"><span class="annot"><span class="annottext">merkleTreeFromJson :: Value -&gt; Parser (MerkleTree a)
</span><a href="Chainweb.Payload.html#merkleTreeFromJson"><span class="hs-identifier hs-var hs-var">merkleTreeFromJson</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Text -&gt; Parser (MerkleTree a))
-&gt; Value
-&gt; Parser (MerkleTree a)
forall a. String -&gt; (Text -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">withText</span></span><span> </span><span class="annot"><span class="hs-string">&quot;MerkleTree&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Text -&gt; Parser (MerkleTree a)) -&gt; Value -&gt; Parser (MerkleTree a))
-&gt; (Text -&gt; Parser (MerkleTree a))
-&gt; Value
-&gt; Parser (MerkleTree a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681469357"><span class="annot"><span class="annottext">t :: Text
</span><a href="#local-6989586621681469357"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(SomeException -&gt; Parser (MerkleTree a))
-&gt; (MerkleTree a -&gt; Parser (MerkleTree a))
-&gt; Either SomeException (MerkleTree a)
-&gt; Parser (MerkleTree a)
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><span class="hs-identifier hs-var">either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Parser (MerkleTree a)
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Parser (MerkleTree a))
-&gt; (SomeException -&gt; String)
-&gt; SomeException
-&gt; Parser (MerkleTree a)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">SomeException -&gt; String
forall a b. (Show a, IsString b) =&gt; a -&gt; b
</span><a href="Chainweb.Utils.html#sshow"><span class="hs-identifier hs-var">sshow</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MerkleTree a -&gt; Parser (MerkleTree a)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span>
</span><span id="line-581"></span><span>    </span><span class="annot"><span class="annottext">(Either SomeException (MerkleTree a) -&gt; Parser (MerkleTree a))
-&gt; Either SomeException (MerkleTree a) -&gt; Parser (MerkleTree a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Either SomeException ByteString
forall (m :: * -&gt; *). MonadThrow m =&gt; Text -&gt; m ByteString
</span><a href="Chainweb.Utils.html#decodeB64UrlNoPaddingText"><span class="hs-identifier hs-var">decodeB64UrlNoPaddingText</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681469357"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Either SomeException ByteString
-&gt; (ByteString -&gt; Either SomeException (MerkleTree a))
-&gt; Either SomeException (MerkleTree a)
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Either SomeException (MerkleTree a)
forall a b (m :: * -&gt; *).
(MonadThrow m, HashAlgorithm a, ByteArrayAccess b) =&gt;
b -&gt; m (MerkleTree a)
</span><span class="hs-identifier hs-var">decodeMerkleTree</span></span><span>
</span><span id="line-582"></span><span>
</span><span id="line-583"></span><span class="hs-comment">-- -------------------------------------------------------------------------- --</span><span>
</span><span id="line-584"></span><span class="hs-comment">-- Output Merkle Tree</span><span>
</span><span id="line-585"></span><span>
</span><span id="line-586"></span><span class="hs-comment">-- | Merkle Tree for transaction outputs of a block.</span><span>
</span><span id="line-587"></span><span class="hs-comment">--</span><span>
</span><span id="line-588"></span><span class="hs-keyword">data</span><span> </span><span id="OutputTree"><span class="annot"><a href="Chainweb.Payload.html#OutputTree"><span class="hs-identifier hs-var">OutputTree</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="OutputTree"><span class="annot"><a href="Chainweb.Payload.html#OutputTree"><span class="hs-identifier hs-var">OutputTree</span></a></span></span><span>
</span><span id="line-589"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="_outputTreeHash"><span class="annot"><span class="annottext">OutputTree -&gt; BlockOutputsHash
</span><a href="Chainweb.Payload.html#_outputTreeHash"><span class="hs-identifier hs-var hs-var">_outputTreeHash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Chainweb.Payload.html#BlockOutputsHash"><span class="hs-identifier hs-type">BlockOutputsHash</span></a></span><span>
</span><span id="line-590"></span><span>        </span><span class="hs-comment">-- ^ Root of '_outputTree'. Primary key of 'OutputTreeStore. Foreign key</span><span>
</span><span id="line-591"></span><span>        </span><span class="hs-comment">-- into 'BlockOutputsStore'.</span><span>
</span><span id="line-592"></span><span>
</span><span id="line-593"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="_outputTree"><span class="annot"><span class="annottext">OutputTree -&gt; MerkleTree SHA512t_256
</span><a href="Chainweb.Payload.html#_outputTree"><span class="hs-identifier hs-var hs-var">_outputTree</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MerkleTree</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">SHA512t_256</span></span><span class="hs-special">)</span><span>
</span><span id="line-594"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-595"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681469347"><span id="local-6989586621681469349"><span id="local-6989586621681469351"><span class="annot"><span class="annottext">Int -&gt; OutputTree -&gt; ShowS
[OutputTree] -&gt; ShowS
OutputTree -&gt; String
(Int -&gt; OutputTree -&gt; ShowS)
-&gt; (OutputTree -&gt; String)
-&gt; ([OutputTree] -&gt; ShowS)
-&gt; Show OutputTree
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [OutputTree] -&gt; ShowS
$cshowList :: [OutputTree] -&gt; ShowS
show :: OutputTree -&gt; String
$cshow :: OutputTree -&gt; String
showsPrec :: Int -&gt; OutputTree -&gt; ShowS
$cshowsPrec :: Int -&gt; OutputTree -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-596"></span><span>
</span><span id="line-597"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsCasValue</span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#OutputTree"><span class="hs-identifier hs-type">OutputTree</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-598"></span><span>    </span><span class="hs-keyword">type</span><span> </span><span id="CasKeyType"><span class="annot"><span class="hs-identifier hs-var">CasKeyType</span></span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#OutputTree"><span class="hs-identifier hs-type">OutputTree</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockOutputsHash"><span class="hs-identifier hs-type">BlockOutputsHash</span></a></span><span>
</span><span id="line-599"></span><span>    </span><span id="local-6989586621681469344"><span class="annot"><span class="annottext">casKey :: OutputTree -&gt; CasKeyType OutputTree
</span><a href="#local-6989586621681469344"><span class="hs-identifier hs-var hs-var hs-var hs-var">casKey</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OutputTree -&gt; CasKeyType OutputTree
OutputTree -&gt; BlockOutputsHash
</span><a href="Chainweb.Payload.html#_outputTreeHash"><span class="hs-identifier hs-var hs-var">_outputTreeHash</span></a></span><span>
</span><span id="line-600"></span><span>
</span><span id="line-601"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681469337"><span id="local-6989586621681469339"><span id="local-6989586621681469341"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#OutputTree"><span class="hs-identifier hs-type">OutputTree</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-602"></span><span>    </span><span id="local-6989586621681469336"><span class="annot"><span class="annottext">toJSON :: OutputTree -&gt; Value
</span><a href="#local-6989586621681469336"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span id="local-6989586621681469335"><span class="annot"><span class="annottext">o :: OutputTree
</span><a href="#local-6989586621681469335"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-603"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="hs-string">&quot;hash&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; BlockOutputsHash -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">OutputTree -&gt; BlockOutputsHash
</span><a href="Chainweb.Payload.html#_outputTreeHash"><span class="hs-identifier hs-var hs-var">_outputTreeHash</span></a></span><span> </span><span class="annot"><span class="annottext">OutputTree
</span><a href="#local-6989586621681469335"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-604"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-string">&quot;tree&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">MerkleTree SHA512t_256 -&gt; Value
forall a. MerkleTree a -&gt; Value
</span><a href="Chainweb.Payload.html#merkleTreeToJson"><span class="hs-identifier hs-var">merkleTreeToJson</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OutputTree -&gt; MerkleTree SHA512t_256
</span><a href="Chainweb.Payload.html#_outputTree"><span class="hs-identifier hs-var hs-var">_outputTree</span></a></span><span> </span><span class="annot"><span class="annottext">OutputTree
</span><a href="#local-6989586621681469335"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-605"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-606"></span><span>
</span><span id="line-607"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681469332"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#OutputTree"><span class="hs-identifier hs-type">OutputTree</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-608"></span><span>    </span><span id="local-6989586621681469331"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser OutputTree
</span><a href="#local-6989586621681469331"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser OutputTree) -&gt; Value -&gt; Parser OutputTree
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">withObject</span></span><span> </span><span class="annot"><span class="hs-string">&quot;OutputTree&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Object -&gt; Parser OutputTree) -&gt; Value -&gt; Parser OutputTree)
-&gt; (Object -&gt; Parser OutputTree) -&gt; Value -&gt; Parser OutputTree
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681469330"><span class="annot"><span class="annottext">o :: Object
</span><a href="#local-6989586621681469330"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BlockOutputsHash -&gt; MerkleTree SHA512t_256 -&gt; OutputTree
</span><a href="Chainweb.Payload.html#OutputTree"><span class="hs-identifier hs-var">OutputTree</span></a></span><span>
</span><span id="line-609"></span><span>        </span><span class="annot"><span class="annottext">(BlockOutputsHash -&gt; MerkleTree SHA512t_256 -&gt; OutputTree)
-&gt; Parser BlockOutputsHash
-&gt; Parser (MerkleTree SHA512t_256 -&gt; OutputTree)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">&lt;$!&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621681469330"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser BlockOutputsHash
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="hs-string">&quot;hash&quot;</span></span><span>
</span><span id="line-610"></span><span>        </span><span class="annot"><span class="annottext">Parser (MerkleTree SHA512t_256 -&gt; OutputTree)
-&gt; Parser (MerkleTree SHA512t_256) -&gt; Parser OutputTree
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621681469330"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser Value
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="hs-string">&quot;tree&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser Value
-&gt; (Value -&gt; Parser (MerkleTree SHA512t_256))
-&gt; Parser (MerkleTree SHA512t_256)
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser (MerkleTree SHA512t_256)
forall a. HashAlgorithm a =&gt; Value -&gt; Parser (MerkleTree a)
</span><a href="Chainweb.Payload.html#merkleTreeFromJson"><span class="hs-identifier hs-var">merkleTreeFromJson</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-611"></span><span>
</span><span id="line-612"></span><span class="hs-comment">-- -------------------------------------------------------------------------- --</span><span>
</span><span id="line-613"></span><span class="hs-comment">-- Data Creation</span><span>
</span><span id="line-614"></span><span class="hs-comment">-- -------------------------------------------------------------------------- --</span><span>
</span><span id="line-615"></span><span>
</span><span id="line-616"></span><span class="hs-comment">-- | This forces the 'MerkleTree' which can be an expensive operation.</span><span>
</span><span id="line-617"></span><span class="hs-comment">--</span><span>
</span><span id="line-618"></span><span class="annot"><a href="Chainweb.Payload.html#newTransactionLog"><span class="hs-identifier hs-type">newTransactionLog</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#MinerData"><span class="hs-identifier hs-type">MinerData</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">V.Vector</span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#Transaction"><span class="hs-identifier hs-type">Transaction</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockTransactionsLog"><span class="hs-identifier hs-type">BlockTransactionsLog</span></a></span><span>
</span><span id="line-619"></span><span id="newTransactionLog"><span class="annot"><span class="annottext">newTransactionLog :: MinerData
-&gt; Vector Transaction
-&gt; MerkleLog
     ChainwebHashTag
     (MerkleLogHeader BlockTransactions)
     (MerkleLogBody BlockTransactions)
</span><a href="Chainweb.Payload.html#newTransactionLog"><span class="hs-identifier hs-var hs-var">newTransactionLog</span></a></span></span><span> </span><span id="local-6989586621681469329"><span class="annot"><span class="annottext">md :: MinerData
</span><a href="#local-6989586621681469329"><span class="hs-identifier hs-var">md</span></a></span></span><span> </span><span id="local-6989586621681469328"><span class="annot"><span class="annottext">txs :: Vector Transaction
</span><a href="#local-6989586621681469328"><span class="hs-identifier hs-var">txs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-620"></span><span>  </span><span class="annot"><span class="annottext">MerkleLogEntries ChainwebHashTag '[MinerData] Transaction
-&gt; MerkleLog
     ChainwebHashTag
     (MerkleLogHeader BlockTransactions)
     (MerkleLogBody BlockTransactions)
forall u (h :: [*]) b.
MerkleUniverse u =&gt;
MerkleLogEntries u h b -&gt; MerkleLog u h b
</span><a href="Chainweb.Crypto.MerkleLog.html#newMerkleLog"><span class="hs-identifier hs-var">newMerkleLog</span></a></span><span> </span><span class="annot"><span class="annottext">(MerkleLogEntries ChainwebHashTag '[MinerData] Transaction
 -&gt; MerkleLog
      ChainwebHashTag
      (MerkleLogHeader BlockTransactions)
      (MerkleLogBody BlockTransactions))
-&gt; MerkleLogEntries ChainwebHashTag '[MinerData] Transaction
-&gt; MerkleLog
     ChainwebHashTag
     (MerkleLogHeader BlockTransactions)
     (MerkleLogBody BlockTransactions)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MinerData
</span><a href="#local-6989586621681469329"><span class="hs-identifier hs-var">md</span></a></span><span> </span><span class="annot"><span class="annottext">MinerData
-&gt; MerkleLogEntries ChainwebHashTag '[] Transaction
-&gt; MerkleLogEntries ChainwebHashTag '[MinerData] Transaction
forall u h (t :: [*]) b.
IsMerkleLogEntry u h =&gt;
h -&gt; MerkleLogEntries u t b -&gt; MerkleLogEntries u (h : t) b
</span><a href="Chainweb.Crypto.MerkleLog.html#%3A%2B%3A"><span class="hs-operator hs-var">:+:</span></a></span><span> </span><span class="annot"><span class="annottext">Vector Transaction
-&gt; MerkleLogEntries ChainwebHashTag '[] Transaction
forall u b.
IsMerkleLogEntry u b =&gt;
Vector b -&gt; MerkleLogEntries u '[] b
</span><a href="Chainweb.Crypto.MerkleLog.html#MerkleLogBody"><span class="hs-identifier hs-var">MerkleLogBody</span></a></span><span> </span><span class="annot"><span class="annottext">Vector Transaction
</span><a href="#local-6989586621681469328"><span class="hs-identifier hs-var">txs</span></a></span><span>
</span><span id="line-621"></span><span>
</span><span id="line-622"></span><span class="hs-comment">-- | This forces the 'MerkleTree' which can be an expensive operation.</span><span>
</span><span id="line-623"></span><span class="hs-comment">--</span><span>
</span><span id="line-624"></span><span class="annot"><a href="Chainweb.Payload.html#newBlockTransactions"><span class="hs-identifier hs-type">newBlockTransactions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#MinerData"><span class="hs-identifier hs-type">MinerData</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">V.Vector</span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#Transaction"><span class="hs-identifier hs-type">Transaction</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Chainweb.Payload.html#TransactionTree"><span class="hs-identifier hs-type">TransactionTree</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockTransactions"><span class="hs-identifier hs-type">BlockTransactions</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-625"></span><span id="newBlockTransactions"><span class="annot"><span class="annottext">newBlockTransactions :: MinerData
-&gt; Vector Transaction -&gt; (TransactionTree, BlockTransactions)
</span><a href="Chainweb.Payload.html#newBlockTransactions"><span class="hs-identifier hs-var hs-var">newBlockTransactions</span></a></span></span><span> </span><span id="local-6989586621681469326"><span class="annot"><span class="annottext">mi :: MinerData
</span><a href="#local-6989586621681469326"><span class="hs-identifier hs-var">mi</span></a></span></span><span> </span><span id="local-6989586621681469325"><span class="annot"><span class="annottext">txs :: Vector Transaction
</span><a href="#local-6989586621681469325"><span class="hs-identifier hs-var">txs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TransactionTree
</span><a href="#local-6989586621681469324"><span class="hs-identifier hs-var">tree</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">BlockTransactions
</span><a href="#local-6989586621681469323"><span class="hs-identifier hs-var">blockTxs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-626"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-627"></span><span>    </span><span id="local-6989586621681469322"><span class="annot"><span class="annottext">mlog :: MerkleLog
  ChainwebHashTag
  (MerkleLogHeader BlockTransactions)
  (MerkleLogBody BlockTransactions)
</span><a href="#local-6989586621681469322"><span class="hs-identifier hs-var hs-var">mlog</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MinerData
-&gt; Vector Transaction
-&gt; MerkleLog
     ChainwebHashTag
     (MerkleLogHeader BlockTransactions)
     (MerkleLogBody BlockTransactions)
</span><a href="Chainweb.Payload.html#newTransactionLog"><span class="hs-identifier hs-var">newTransactionLog</span></a></span><span> </span><span class="annot"><span class="annottext">MinerData
</span><a href="#local-6989586621681469326"><span class="hs-identifier hs-var">mi</span></a></span><span> </span><span class="annot"><span class="annottext">Vector Transaction
</span><a href="#local-6989586621681469325"><span class="hs-identifier hs-var">txs</span></a></span><span>
</span><span id="line-628"></span><span>    </span><span id="local-6989586621681469323"><span class="annot"><span class="annottext">blockTxs :: BlockTransactions
</span><a href="#local-6989586621681469323"><span class="hs-identifier hs-var hs-var">blockTxs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MerkleLog
  ChainwebHashTag
  (MerkleLogHeader BlockTransactions)
  (MerkleLogBody BlockTransactions)
-&gt; BlockTransactions
forall u b.
HasMerkleLog u b =&gt;
MerkleLog u (MerkleLogHeader b) (MerkleLogBody b) -&gt; b
</span><a href="Chainweb.Crypto.MerkleLog.html#fromLog"><span class="hs-identifier hs-var">fromLog</span></a></span><span> </span><span class="annot"><span class="annottext">MerkleLog
  ChainwebHashTag
  (MerkleLogHeader BlockTransactions)
  (MerkleLogBody BlockTransactions)
</span><a href="#local-6989586621681469322"><span class="hs-identifier hs-var">mlog</span></a></span><span>
</span><span id="line-629"></span><span>    </span><span id="local-6989586621681469324"><span class="annot"><span class="annottext">tree :: TransactionTree
</span><a href="#local-6989586621681469324"><span class="hs-identifier hs-var hs-var">tree</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">$WTransactionTree :: BlockTransactionsHash -&gt; MerkleTree SHA512t_256 -&gt; TransactionTree
</span><a href="Chainweb.Payload.html#%24WTransactionTree"><span class="hs-identifier hs-type hs-type">TransactionTree</span></a></span><span>
</span><span id="line-630"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_transactionTreeHash :: BlockTransactionsHash
</span><a href="Chainweb.Payload.html#_transactionTreeHash"><span class="hs-identifier hs-var">_transactionTreeHash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockTransactions -&gt; BlockTransactionsHash
</span><a href="Chainweb.Payload.html#_blockTransactionsHash"><span class="hs-identifier hs-var hs-var">_blockTransactionsHash</span></a></span><span> </span><span class="annot"><span class="annottext">BlockTransactions
</span><a href="#local-6989586621681469323"><span class="hs-identifier hs-var">blockTxs</span></a></span><span>
</span><span id="line-631"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_transactionTree :: MerkleTree SHA512t_256
</span><a href="Chainweb.Payload.html#_transactionTree"><span class="hs-identifier hs-var">_transactionTree</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MerkleLog ChainwebHashTag '[MinerData] Transaction
-&gt; MerkleTree (HashAlg ChainwebHashTag)
forall u (h :: [*]) b. MerkleLog u h b -&gt; MerkleTree (HashAlg u)
</span><a href="Chainweb.Crypto.MerkleLog.html#_merkleLogTree"><span class="hs-identifier hs-var hs-var">_merkleLogTree</span></a></span><span> </span><span class="annot"><span class="annottext">MerkleLog ChainwebHashTag '[MinerData] Transaction
MerkleLog
  ChainwebHashTag
  (MerkleLogHeader BlockTransactions)
  (MerkleLogBody BlockTransactions)
</span><a href="#local-6989586621681469322"><span class="hs-identifier hs-var">mlog</span></a></span><span>
</span><span id="line-632"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-633"></span><span>
</span><span id="line-634"></span><span class="hs-comment">-- | Create a MerkleLog from a 'BlockTransactions' and a cached</span><span>
</span><span id="line-635"></span><span class="hs-comment">-- 'TransactionTree'.</span><span>
</span><span id="line-636"></span><span class="hs-comment">--</span><span>
</span><span id="line-637"></span><span class="hs-comment">-- It is an error if the 'TransactionTree' doesn't match the</span><span>
</span><span id="line-638"></span><span class="hs-comment">-- 'BlockTransactions'.</span><span>
</span><span id="line-639"></span><span class="hs-comment">--</span><span>
</span><span id="line-640"></span><span class="hs-comment">-- If you only have the 'BlockTransactions' you can use 'toLog' in which case</span><span>
</span><span id="line-641"></span><span class="hs-comment">-- the '_merkleLogTree' will be instantiated lazily.</span><span>
</span><span id="line-642"></span><span class="hs-comment">--</span><span>
</span><span id="line-643"></span><span class="annot"><a href="Chainweb.Payload.html#transactionLog"><span class="hs-identifier hs-type">transactionLog</span></a></span><span>
</span><span id="line-644"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockTransactions"><span class="hs-identifier hs-type">BlockTransactions</span></a></span><span>
</span><span id="line-645"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#TransactionTree"><span class="hs-identifier hs-type">TransactionTree</span></a></span><span>
</span><span id="line-646"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockTransactionsLog"><span class="hs-identifier hs-type">BlockTransactionsLog</span></a></span><span>
</span><span id="line-647"></span><span id="transactionLog"><span class="annot"><span class="annottext">transactionLog :: BlockTransactions
-&gt; TransactionTree
-&gt; MerkleLog
     ChainwebHashTag
     (MerkleLogHeader BlockTransactions)
     (MerkleLogBody BlockTransactions)
</span><a href="Chainweb.Payload.html#transactionLog"><span class="hs-identifier hs-var hs-var">transactionLog</span></a></span></span><span> </span><span id="local-6989586621681469319"><span class="annot"><span class="annottext">txs :: BlockTransactions
</span><a href="#local-6989586621681469319"><span class="hs-identifier hs-var">txs</span></a></span></span><span> </span><span id="local-6989586621681469318"><span class="annot"><span class="annottext">tree :: TransactionTree
</span><a href="#local-6989586621681469318"><span class="hs-identifier hs-var">tree</span></a></span></span><span>
</span><span id="line-648"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">BlockTransactions -&gt; BlockTransactionsHash
</span><a href="Chainweb.Payload.html#_blockTransactionsHash"><span class="hs-identifier hs-var hs-var">_blockTransactionsHash</span></a></span><span> </span><span class="annot"><span class="annottext">BlockTransactions
</span><a href="#local-6989586621681469319"><span class="hs-identifier hs-var">txs</span></a></span><span> </span><span class="annot"><span class="annottext">BlockTransactionsHash -&gt; BlockTransactionsHash -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TransactionTree -&gt; BlockTransactionsHash
</span><a href="Chainweb.Payload.html#_transactionTreeHash"><span class="hs-identifier hs-var hs-var">_transactionTreeHash</span></a></span><span> </span><span class="annot"><span class="annottext">TransactionTree
</span><a href="#local-6989586621681469318"><span class="hs-identifier hs-var">tree</span></a></span><span>
</span><span id="line-649"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BlockTransactions
-&gt; MerkleLog
     ChainwebHashTag
     (MerkleLogHeader BlockTransactions)
     (MerkleLogBody BlockTransactions)
forall u b.
HasMerkleLog u b =&gt;
b -&gt; MerkleLog u (MerkleLogHeader b) (MerkleLogBody b)
</span><a href="Chainweb.Crypto.MerkleLog.html#toLog"><span class="hs-identifier hs-var">toLog</span></a></span><span> </span><span class="annot"><span class="annottext">BlockTransactions
</span><a href="#local-6989586621681469319"><span class="hs-identifier hs-var">txs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_merkleLogTree :: MerkleTree (HashAlg ChainwebHashTag)
</span><a href="Chainweb.Crypto.MerkleLog.html#_merkleLogTree"><span class="hs-identifier hs-var">_merkleLogTree</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TransactionTree -&gt; MerkleTree SHA512t_256
</span><a href="Chainweb.Payload.html#_transactionTree"><span class="hs-identifier hs-var hs-var">_transactionTree</span></a></span><span> </span><span class="annot"><span class="annottext">TransactionTree
</span><a href="#local-6989586621681469318"><span class="hs-identifier hs-var">tree</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-650"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; MerkleLog ChainwebHashTag '[MinerData] Transaction
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="hs-string">&quot;Transaction tree and block transactions don't match&quot;</span></span><span>
</span><span id="line-651"></span><span>
</span><span id="line-652"></span><span class="hs-comment">-- | This forces the 'MerkleTree' which can be an expensive operation.</span><span>
</span><span id="line-653"></span><span class="hs-comment">--</span><span>
</span><span id="line-654"></span><span class="annot"><a href="Chainweb.Payload.html#newBlockOutputLog"><span class="hs-identifier hs-type">newBlockOutputLog</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#CoinbaseOutput"><span class="hs-identifier hs-type">CoinbaseOutput</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">V.Vector</span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#TransactionOutput"><span class="hs-identifier hs-type">TransactionOutput</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockOutputsLog"><span class="hs-identifier hs-type">BlockOutputsLog</span></a></span><span>
</span><span id="line-655"></span><span id="newBlockOutputLog"><span class="annot"><span class="annottext">newBlockOutputLog :: CoinbaseOutput
-&gt; Vector TransactionOutput
-&gt; MerkleLog
     ChainwebHashTag
     (MerkleLogHeader BlockOutputs)
     (MerkleLogBody BlockOutputs)
</span><a href="Chainweb.Payload.html#newBlockOutputLog"><span class="hs-identifier hs-var hs-var">newBlockOutputLog</span></a></span></span><span> </span><span id="local-6989586621681469316"><span class="annot"><span class="annottext">co :: CoinbaseOutput
</span><a href="#local-6989586621681469316"><span class="hs-identifier hs-var">co</span></a></span></span><span> </span><span id="local-6989586621681469315"><span class="annot"><span class="annottext">tos :: Vector TransactionOutput
</span><a href="#local-6989586621681469315"><span class="hs-identifier hs-var">tos</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MerkleLogEntries
  ChainwebHashTag '[CoinbaseOutput] TransactionOutput
-&gt; MerkleLog
     ChainwebHashTag
     (MerkleLogHeader BlockOutputs)
     (MerkleLogBody BlockOutputs)
forall u (h :: [*]) b.
MerkleUniverse u =&gt;
MerkleLogEntries u h b -&gt; MerkleLog u h b
</span><a href="Chainweb.Crypto.MerkleLog.html#newMerkleLog"><span class="hs-identifier hs-var">newMerkleLog</span></a></span><span> </span><span class="annot"><span class="annottext">(MerkleLogEntries
   ChainwebHashTag '[CoinbaseOutput] TransactionOutput
 -&gt; MerkleLog
      ChainwebHashTag
      (MerkleLogHeader BlockOutputs)
      (MerkleLogBody BlockOutputs))
-&gt; MerkleLogEntries
     ChainwebHashTag '[CoinbaseOutput] TransactionOutput
-&gt; MerkleLog
     ChainwebHashTag
     (MerkleLogHeader BlockOutputs)
     (MerkleLogBody BlockOutputs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CoinbaseOutput
</span><a href="#local-6989586621681469316"><span class="hs-identifier hs-var">co</span></a></span><span> </span><span class="annot"><span class="annottext">CoinbaseOutput
-&gt; MerkleLogEntries ChainwebHashTag '[] TransactionOutput
-&gt; MerkleLogEntries
     ChainwebHashTag '[CoinbaseOutput] TransactionOutput
forall u h (t :: [*]) b.
IsMerkleLogEntry u h =&gt;
h -&gt; MerkleLogEntries u t b -&gt; MerkleLogEntries u (h : t) b
</span><a href="Chainweb.Crypto.MerkleLog.html#%3A%2B%3A"><span class="hs-operator hs-var">:+:</span></a></span><span> </span><span class="annot"><span class="annottext">Vector TransactionOutput
-&gt; MerkleLogEntries ChainwebHashTag '[] TransactionOutput
forall u b.
IsMerkleLogEntry u b =&gt;
Vector b -&gt; MerkleLogEntries u '[] b
</span><a href="Chainweb.Crypto.MerkleLog.html#MerkleLogBody"><span class="hs-identifier hs-var">MerkleLogBody</span></a></span><span> </span><span class="annot"><span class="annottext">Vector TransactionOutput
</span><a href="#local-6989586621681469315"><span class="hs-identifier hs-var">tos</span></a></span><span>
</span><span id="line-656"></span><span>
</span><span id="line-657"></span><span class="hs-comment">-- | This forces the 'MerkleTree' which can be an expensive operation.</span><span>
</span><span id="line-658"></span><span class="hs-comment">--</span><span>
</span><span id="line-659"></span><span class="annot"><a href="Chainweb.Payload.html#newBlockOutputs"><span class="hs-identifier hs-type">newBlockOutputs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#CoinbaseOutput"><span class="hs-identifier hs-type">CoinbaseOutput</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">V.Vector</span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#TransactionOutput"><span class="hs-identifier hs-type">TransactionOutput</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Chainweb.Payload.html#OutputTree"><span class="hs-identifier hs-type">OutputTree</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockOutputs"><span class="hs-identifier hs-type">BlockOutputs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-660"></span><span id="newBlockOutputs"><span class="annot"><span class="annottext">newBlockOutputs :: CoinbaseOutput
-&gt; Vector TransactionOutput -&gt; (OutputTree, BlockOutputs)
</span><a href="Chainweb.Payload.html#newBlockOutputs"><span class="hs-identifier hs-var hs-var">newBlockOutputs</span></a></span></span><span> </span><span id="local-6989586621681469314"><span class="annot"><span class="annottext">co :: CoinbaseOutput
</span><a href="#local-6989586621681469314"><span class="hs-identifier hs-var">co</span></a></span></span><span> </span><span id="local-6989586621681469313"><span class="annot"><span class="annottext">outs :: Vector TransactionOutput
</span><a href="#local-6989586621681469313"><span class="hs-identifier hs-var">outs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OutputTree
</span><a href="#local-6989586621681469312"><span class="hs-identifier hs-var">tree</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">BlockOutputs
</span><a href="#local-6989586621681469311"><span class="hs-identifier hs-var">blkOuts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-661"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-662"></span><span>    </span><span id="local-6989586621681469310"><span class="annot"><span class="annottext">mlog :: MerkleLog
  ChainwebHashTag
  (MerkleLogHeader BlockOutputs)
  (MerkleLogBody BlockOutputs)
</span><a href="#local-6989586621681469310"><span class="hs-identifier hs-var hs-var">mlog</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoinbaseOutput
-&gt; Vector TransactionOutput
-&gt; MerkleLog
     ChainwebHashTag
     (MerkleLogHeader BlockOutputs)
     (MerkleLogBody BlockOutputs)
</span><a href="Chainweb.Payload.html#newBlockOutputLog"><span class="hs-identifier hs-var">newBlockOutputLog</span></a></span><span> </span><span class="annot"><span class="annottext">CoinbaseOutput
</span><a href="#local-6989586621681469314"><span class="hs-identifier hs-var">co</span></a></span><span> </span><span class="annot"><span class="annottext">Vector TransactionOutput
</span><a href="#local-6989586621681469313"><span class="hs-identifier hs-var">outs</span></a></span><span>
</span><span id="line-663"></span><span>    </span><span id="local-6989586621681469311"><span class="annot"><span class="annottext">blkOuts :: BlockOutputs
</span><a href="#local-6989586621681469311"><span class="hs-identifier hs-var hs-var">blkOuts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MerkleLog
  ChainwebHashTag
  (MerkleLogHeader BlockOutputs)
  (MerkleLogBody BlockOutputs)
-&gt; BlockOutputs
forall u b.
HasMerkleLog u b =&gt;
MerkleLog u (MerkleLogHeader b) (MerkleLogBody b) -&gt; b
</span><a href="Chainweb.Crypto.MerkleLog.html#fromLog"><span class="hs-identifier hs-var">fromLog</span></a></span><span> </span><span class="annot"><span class="annottext">MerkleLog
  ChainwebHashTag
  (MerkleLogHeader BlockOutputs)
  (MerkleLogBody BlockOutputs)
</span><a href="#local-6989586621681469310"><span class="hs-identifier hs-var">mlog</span></a></span><span>
</span><span id="line-664"></span><span>    </span><span id="local-6989586621681469312"><span class="annot"><span class="annottext">tree :: OutputTree
</span><a href="#local-6989586621681469312"><span class="hs-identifier hs-var hs-var">tree</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">$WOutputTree :: BlockOutputsHash -&gt; MerkleTree SHA512t_256 -&gt; OutputTree
</span><a href="Chainweb.Payload.html#%24WOutputTree"><span class="hs-identifier hs-type hs-type">OutputTree</span></a></span><span>
</span><span id="line-665"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_outputTreeHash :: BlockOutputsHash
</span><a href="Chainweb.Payload.html#_outputTreeHash"><span class="hs-identifier hs-var">_outputTreeHash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockOutputs -&gt; BlockOutputsHash
</span><a href="Chainweb.Payload.html#_blockOutputsHash"><span class="hs-identifier hs-var hs-var">_blockOutputsHash</span></a></span><span> </span><span class="annot"><span class="annottext">BlockOutputs
</span><a href="#local-6989586621681469311"><span class="hs-identifier hs-var">blkOuts</span></a></span><span>
</span><span id="line-666"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_outputTree :: MerkleTree SHA512t_256
</span><a href="Chainweb.Payload.html#_outputTree"><span class="hs-identifier hs-var">_outputTree</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MerkleLog ChainwebHashTag '[CoinbaseOutput] TransactionOutput
-&gt; MerkleTree (HashAlg ChainwebHashTag)
forall u (h :: [*]) b. MerkleLog u h b -&gt; MerkleTree (HashAlg u)
</span><a href="Chainweb.Crypto.MerkleLog.html#_merkleLogTree"><span class="hs-identifier hs-var hs-var">_merkleLogTree</span></a></span><span> </span><span class="annot"><span class="annottext">MerkleLog ChainwebHashTag '[CoinbaseOutput] TransactionOutput
MerkleLog
  ChainwebHashTag
  (MerkleLogHeader BlockOutputs)
  (MerkleLogBody BlockOutputs)
</span><a href="#local-6989586621681469310"><span class="hs-identifier hs-var">mlog</span></a></span><span>
</span><span id="line-667"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-668"></span><span>
</span><span id="line-669"></span><span class="hs-comment">-- | Create a MerkleLog from 'BlockOutputs' and a cached 'OutputTree'.</span><span>
</span><span id="line-670"></span><span class="hs-comment">--</span><span>
</span><span id="line-671"></span><span class="hs-comment">-- It is an error if the 'OutputTree' doesn't match the 'BlockOutputs'.</span><span>
</span><span id="line-672"></span><span class="hs-comment">--</span><span>
</span><span id="line-673"></span><span class="hs-comment">-- If you only have the 'BlockOutputs' you can use 'toLog' in which case the</span><span>
</span><span id="line-674"></span><span class="hs-comment">-- '_merkleLogTree' will be instantiated lazily.</span><span>
</span><span id="line-675"></span><span class="hs-comment">--</span><span>
</span><span id="line-676"></span><span class="annot"><a href="Chainweb.Payload.html#blockOutputLog"><span class="hs-identifier hs-type">blockOutputLog</span></a></span><span>
</span><span id="line-677"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockOutputs"><span class="hs-identifier hs-type">BlockOutputs</span></a></span><span>
</span><span id="line-678"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#OutputTree"><span class="hs-identifier hs-type">OutputTree</span></a></span><span>
</span><span id="line-679"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockOutputsLog"><span class="hs-identifier hs-type">BlockOutputsLog</span></a></span><span>
</span><span id="line-680"></span><span id="blockOutputLog"><span class="annot"><span class="annottext">blockOutputLog :: BlockOutputs
-&gt; OutputTree
-&gt; MerkleLog
     ChainwebHashTag
     (MerkleLogHeader BlockOutputs)
     (MerkleLogBody BlockOutputs)
</span><a href="Chainweb.Payload.html#blockOutputLog"><span class="hs-identifier hs-var hs-var">blockOutputLog</span></a></span></span><span> </span><span id="local-6989586621681469308"><span class="annot"><span class="annottext">outs :: BlockOutputs
</span><a href="#local-6989586621681469308"><span class="hs-identifier hs-var">outs</span></a></span></span><span> </span><span id="local-6989586621681469307"><span class="annot"><span class="annottext">tree :: OutputTree
</span><a href="#local-6989586621681469307"><span class="hs-identifier hs-var">tree</span></a></span></span><span>
</span><span id="line-681"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">BlockOutputs -&gt; BlockOutputsHash
</span><a href="Chainweb.Payload.html#_blockOutputsHash"><span class="hs-identifier hs-var hs-var">_blockOutputsHash</span></a></span><span> </span><span class="annot"><span class="annottext">BlockOutputs
</span><a href="#local-6989586621681469308"><span class="hs-identifier hs-var">outs</span></a></span><span> </span><span class="annot"><span class="annottext">BlockOutputsHash -&gt; BlockOutputsHash -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">OutputTree -&gt; BlockOutputsHash
</span><a href="Chainweb.Payload.html#_outputTreeHash"><span class="hs-identifier hs-var hs-var">_outputTreeHash</span></a></span><span> </span><span class="annot"><span class="annottext">OutputTree
</span><a href="#local-6989586621681469307"><span class="hs-identifier hs-var">tree</span></a></span><span>
</span><span id="line-682"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BlockOutputs
-&gt; MerkleLog
     ChainwebHashTag
     (MerkleLogHeader BlockOutputs)
     (MerkleLogBody BlockOutputs)
forall u b.
HasMerkleLog u b =&gt;
b -&gt; MerkleLog u (MerkleLogHeader b) (MerkleLogBody b)
</span><a href="Chainweb.Crypto.MerkleLog.html#toLog"><span class="hs-identifier hs-var">toLog</span></a></span><span> </span><span class="annot"><span class="annottext">BlockOutputs
</span><a href="#local-6989586621681469308"><span class="hs-identifier hs-var">outs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_merkleLogTree :: MerkleTree (HashAlg ChainwebHashTag)
</span><a href="Chainweb.Crypto.MerkleLog.html#_merkleLogTree"><span class="hs-identifier hs-var">_merkleLogTree</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OutputTree -&gt; MerkleTree SHA512t_256
</span><a href="Chainweb.Payload.html#_outputTree"><span class="hs-identifier hs-var hs-var">_outputTree</span></a></span><span> </span><span class="annot"><span class="annottext">OutputTree
</span><a href="#local-6989586621681469307"><span class="hs-identifier hs-var">tree</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-683"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; MerkleLog ChainwebHashTag '[CoinbaseOutput] TransactionOutput
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="hs-string">&quot;Output tree and block outputs don't match&quot;</span></span><span>
</span><span id="line-684"></span><span>
</span><span id="line-685"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-686"></span><span class="hs-comment">--</span><span>
</span><span id="line-687"></span><span class="hs-comment">-- Note, that forcing the 'MerkleTree' is cheap for 'BlockPayload'.</span><span>
</span><span id="line-688"></span><span class="hs-comment">--</span><span>
</span><span id="line-689"></span><span class="annot"><a href="Chainweb.Payload.html#blockPayload"><span class="hs-identifier hs-type">blockPayload</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockTransactions"><span class="hs-identifier hs-type">BlockTransactions</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockOutputs"><span class="hs-identifier hs-type">BlockOutputs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockPayload"><span class="hs-identifier hs-type">BlockPayload</span></a></span><span>
</span><span id="line-690"></span><span id="blockPayload"><span class="annot"><span class="annottext">blockPayload :: BlockTransactions -&gt; BlockOutputs -&gt; BlockPayload
</span><a href="Chainweb.Payload.html#blockPayload"><span class="hs-identifier hs-var hs-var">blockPayload</span></a></span></span><span> </span><span id="local-6989586621681469306"><span class="annot"><span class="annottext">txs :: BlockTransactions
</span><a href="#local-6989586621681469306"><span class="hs-identifier hs-var">txs</span></a></span></span><span> </span><span id="local-6989586621681469305"><span class="annot"><span class="annottext">outs :: BlockOutputs
</span><a href="#local-6989586621681469305"><span class="hs-identifier hs-var">outs</span></a></span></span><span>
</span><span id="line-691"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MerkleLog
  ChainwebHashTag '[BlockTransactionsHash, BlockOutputsHash] Void
-&gt; BlockPayload
forall u b.
HasMerkleLog u b =&gt;
MerkleLog u (MerkleLogHeader b) (MerkleLogBody b) -&gt; b
</span><a href="Chainweb.Crypto.MerkleLog.html#fromLog"><span class="hs-identifier hs-var">fromLog</span></a></span><span> </span><span class="annot"><span class="annottext">(MerkleLog
   ChainwebHashTag '[BlockTransactionsHash, BlockOutputsHash] Void
 -&gt; BlockPayload)
-&gt; MerkleLog
     ChainwebHashTag '[BlockTransactionsHash, BlockOutputsHash] Void
-&gt; BlockPayload
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">forall (h :: [*]) b.
MerkleUniverse ChainwebHashTag =&gt;
MerkleLogEntries ChainwebHashTag h b
-&gt; MerkleLog ChainwebHashTag h b
forall u (h :: [*]) b.
MerkleUniverse u =&gt;
MerkleLogEntries u h b -&gt; MerkleLog u h b
</span><a href="Chainweb.Crypto.MerkleLog.html#newMerkleLog"><span class="hs-identifier hs-var">newMerkleLog</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Chainweb.MerkleUniverse.html#ChainwebHashTag"><span class="hs-identifier hs-type">ChainwebHashTag</span></a></span><span>
</span><span id="line-692"></span><span>        </span><span class="annot"><span class="annottext">(MerkleLogEntries
   ChainwebHashTag '[BlockTransactionsHash, BlockOutputsHash] Void
 -&gt; MerkleLog
      ChainwebHashTag '[BlockTransactionsHash, BlockOutputsHash] Void)
-&gt; MerkleLogEntries
     ChainwebHashTag '[BlockTransactionsHash, BlockOutputsHash] Void
-&gt; MerkleLog
     ChainwebHashTag '[BlockTransactionsHash, BlockOutputsHash] Void
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">BlockTransactions -&gt; BlockTransactionsHash
</span><a href="Chainweb.Payload.html#_blockTransactionsHash"><span class="hs-identifier hs-var hs-var">_blockTransactionsHash</span></a></span><span> </span><span class="annot"><span class="annottext">BlockTransactions
</span><a href="#local-6989586621681469306"><span class="hs-identifier hs-var">txs</span></a></span><span>
</span><span id="line-693"></span><span>        </span><span class="annot"><span class="annottext">BlockTransactionsHash
-&gt; MerkleLogEntries ChainwebHashTag '[BlockOutputsHash] Void
-&gt; MerkleLogEntries
     ChainwebHashTag '[BlockTransactionsHash, BlockOutputsHash] Void
forall u h (t :: [*]) b.
IsMerkleLogEntry u h =&gt;
h -&gt; MerkleLogEntries u t b -&gt; MerkleLogEntries u (h : t) b
</span><a href="Chainweb.Crypto.MerkleLog.html#%3A%2B%3A"><span class="hs-operator hs-var">:+:</span></a></span><span> </span><span class="annot"><span class="annottext">BlockOutputs -&gt; BlockOutputsHash
</span><a href="Chainweb.Payload.html#_blockOutputsHash"><span class="hs-identifier hs-var hs-var">_blockOutputsHash</span></a></span><span> </span><span class="annot"><span class="annottext">BlockOutputs
</span><a href="#local-6989586621681469305"><span class="hs-identifier hs-var">outs</span></a></span><span>
</span><span id="line-694"></span><span>        </span><span class="annot"><span class="annottext">BlockOutputsHash
-&gt; MerkleLogEntries ChainwebHashTag '[] Void
-&gt; MerkleLogEntries ChainwebHashTag '[BlockOutputsHash] Void
forall u h (t :: [*]) b.
IsMerkleLogEntry u h =&gt;
h -&gt; MerkleLogEntries u t b -&gt; MerkleLogEntries u (h : t) b
</span><a href="Chainweb.Crypto.MerkleLog.html#%3A%2B%3A"><span class="hs-operator hs-var">:+:</span></a></span><span> </span><span class="annot"><span class="annottext">MerkleLogEntries ChainwebHashTag '[] Void
forall u b. IsMerkleLogEntry u b =&gt; MerkleLogEntries u '[] b
</span><a href="Chainweb.Crypto.MerkleLog.html#emptyBody"><span class="hs-identifier hs-var">emptyBody</span></a></span><span>
</span><span id="line-695"></span><span>
</span><span id="line-696"></span><span class="annot"><a href="Chainweb.Payload.html#newBlockPayload"><span class="hs-identifier hs-type">newBlockPayload</span></a></span><span>
</span><span id="line-697"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#MinerData"><span class="hs-identifier hs-type">MinerData</span></a></span><span>
</span><span id="line-698"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#CoinbaseOutput"><span class="hs-identifier hs-type">CoinbaseOutput</span></a></span><span>
</span><span id="line-699"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">V.Vector</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Chainweb.Payload.html#Transaction"><span class="hs-identifier hs-type">Transaction</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#TransactionOutput"><span class="hs-identifier hs-type">TransactionOutput</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-700"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockPayload"><span class="hs-identifier hs-type">BlockPayload</span></a></span><span>
</span><span id="line-701"></span><span id="newBlockPayload"><span class="annot"><span class="annottext">newBlockPayload :: MinerData
-&gt; CoinbaseOutput
-&gt; Vector (Transaction, TransactionOutput)
-&gt; BlockPayload
</span><a href="Chainweb.Payload.html#newBlockPayload"><span class="hs-identifier hs-var hs-var">newBlockPayload</span></a></span></span><span> </span><span id="local-6989586621681469304"><span class="annot"><span class="annottext">mi :: MinerData
</span><a href="#local-6989586621681469304"><span class="hs-identifier hs-var">mi</span></a></span></span><span> </span><span id="local-6989586621681469303"><span class="annot"><span class="annottext">co :: CoinbaseOutput
</span><a href="#local-6989586621681469303"><span class="hs-identifier hs-var">co</span></a></span></span><span> </span><span id="local-6989586621681469302"><span class="annot"><span class="annottext">s :: Vector (Transaction, TransactionOutput)
</span><a href="#local-6989586621681469302"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockTransactions -&gt; BlockOutputs -&gt; BlockPayload
</span><a href="Chainweb.Payload.html#blockPayload"><span class="hs-identifier hs-var">blockPayload</span></a></span><span> </span><span class="annot"><span class="annottext">BlockTransactions
</span><a href="#local-6989586621681469301"><span class="hs-identifier hs-var">txs</span></a></span><span> </span><span class="annot"><span class="annottext">BlockOutputs
</span><a href="#local-6989586621681469300"><span class="hs-identifier hs-var">outs</span></a></span><span>
</span><span id="line-702"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-703"></span><span>    </span><span class="hs-special">(</span><span class="hs-identifier">_</span><span class="hs-special">,</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621681469301"><span class="annot"><span class="annottext">BlockTransactions
</span><a href="#local-6989586621681469301"><span class="hs-identifier hs-var">txs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MinerData
-&gt; Vector Transaction -&gt; (TransactionTree, BlockTransactions)
</span><a href="Chainweb.Payload.html#newBlockTransactions"><span class="hs-identifier hs-var">newBlockTransactions</span></a></span><span> </span><span class="annot"><span class="annottext">MinerData
</span><a href="#local-6989586621681469304"><span class="hs-identifier hs-var">mi</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Transaction, TransactionOutput) -&gt; Transaction
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">((Transaction, TransactionOutput) -&gt; Transaction)
-&gt; Vector (Transaction, TransactionOutput) -&gt; Vector Transaction
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">&lt;$!&gt;</span></span><span> </span><span class="annot"><span class="annottext">Vector (Transaction, TransactionOutput)
</span><a href="#local-6989586621681469302"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-704"></span><span>    </span><span class="hs-special">(</span><span class="hs-identifier">_</span><span class="hs-special">,</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621681469300"><span class="annot"><span class="annottext">BlockOutputs
</span><a href="#local-6989586621681469300"><span class="hs-identifier hs-var">outs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoinbaseOutput
-&gt; Vector TransactionOutput -&gt; (OutputTree, BlockOutputs)
</span><a href="Chainweb.Payload.html#newBlockOutputs"><span class="hs-identifier hs-var">newBlockOutputs</span></a></span><span> </span><span class="annot"><span class="annottext">CoinbaseOutput
</span><a href="#local-6989586621681469303"><span class="hs-identifier hs-var">co</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Transaction, TransactionOutput) -&gt; TransactionOutput
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">((Transaction, TransactionOutput) -&gt; TransactionOutput)
-&gt; Vector (Transaction, TransactionOutput)
-&gt; Vector TransactionOutput
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">&lt;$!&gt;</span></span><span> </span><span class="annot"><span class="annottext">Vector (Transaction, TransactionOutput)
</span><a href="#local-6989586621681469302"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-705"></span><span>
</span><span id="line-706"></span><span class="hs-comment">-- -------------------------------------------------------------------------- --</span><span>
</span><span id="line-707"></span><span class="hs-comment">-- Payload Data</span><span>
</span><span id="line-708"></span><span>
</span><span id="line-709"></span><span class="hs-comment">-- | This contains all non-redundant payload data for a block. It doesn't</span><span>
</span><span id="line-710"></span><span class="hs-comment">-- contain any data that can be recomputed.</span><span>
</span><span id="line-711"></span><span class="hs-comment">--</span><span>
</span><span id="line-712"></span><span class="hs-comment">-- This data structure is used maintly to transfer payloads over the wire.</span><span>
</span><span id="line-713"></span><span class="hs-comment">--</span><span>
</span><span id="line-714"></span><span id="local-6989586621681469298"><span id="local-6989586621681469299"></span></span><span class="hs-keyword">data</span><span> </span><span id="PayloadData"><span class="annot"><a href="Chainweb.Payload.html#PayloadData"><span class="hs-identifier hs-var">PayloadData</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PayloadData"><span class="annot"><a href="Chainweb.Payload.html#PayloadData"><span class="hs-identifier hs-var">PayloadData</span></a></span></span><span>
</span><span id="line-715"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="_payloadDataTransactions"><span class="annot"><span class="annottext">PayloadData -&gt; Vector Transaction
</span><a href="Chainweb.Payload.html#_payloadDataTransactions"><span class="hs-identifier hs-var hs-var">_payloadDataTransactions</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">V.Vector</span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#Transaction"><span class="hs-identifier hs-type">Transaction</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-716"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="_payloadDataMiner"><span class="annot"><span class="annottext">PayloadData -&gt; MinerData
</span><a href="Chainweb.Payload.html#_payloadDataMiner"><span class="hs-identifier hs-var hs-var">_payloadDataMiner</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Chainweb.Payload.html#MinerData"><span class="hs-identifier hs-type">MinerData</span></a></span><span>
</span><span id="line-717"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="_payloadDataPayloadHash"><span class="annot"><span class="annottext">PayloadData -&gt; BlockPayloadHash
</span><a href="Chainweb.Payload.html#_payloadDataPayloadHash"><span class="hs-identifier hs-var hs-var">_payloadDataPayloadHash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Chainweb.Payload.html#BlockPayloadHash"><span class="hs-identifier hs-type">BlockPayloadHash</span></a></span><span>
</span><span id="line-718"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="_payloadDataTransactionsHash"><span class="annot"><span class="annottext">PayloadData -&gt; BlockTransactionsHash
</span><a href="Chainweb.Payload.html#_payloadDataTransactionsHash"><span class="hs-identifier hs-var hs-var">_payloadDataTransactionsHash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Chainweb.Payload.html#BlockTransactionsHash"><span class="hs-identifier hs-type">BlockTransactionsHash</span></a></span><span>
</span><span id="line-719"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="_payloadDataOutputsHash"><span class="annot"><span class="annottext">PayloadData -&gt; BlockOutputsHash
</span><a href="Chainweb.Payload.html#_payloadDataOutputsHash"><span class="hs-identifier hs-var hs-var">_payloadDataOutputsHash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Chainweb.Payload.html#BlockOutputsHash"><span class="hs-identifier hs-type">BlockOutputsHash</span></a></span><span>
</span><span id="line-720"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-721"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681469288"><span id="local-6989586621681469290"><span class="annot"><span class="annottext">PayloadData -&gt; PayloadData -&gt; Bool
(PayloadData -&gt; PayloadData -&gt; Bool)
-&gt; (PayloadData -&gt; PayloadData -&gt; Bool) -&gt; Eq PayloadData
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: PayloadData -&gt; PayloadData -&gt; Bool
$c/= :: PayloadData -&gt; PayloadData -&gt; Bool
== :: PayloadData -&gt; PayloadData -&gt; Bool
$c== :: PayloadData -&gt; PayloadData -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681469282"><span id="local-6989586621681469284"><span id="local-6989586621681469286"><span class="annot"><span class="annottext">Int -&gt; PayloadData -&gt; ShowS
[PayloadData] -&gt; ShowS
PayloadData -&gt; String
(Int -&gt; PayloadData -&gt; ShowS)
-&gt; (PayloadData -&gt; String)
-&gt; ([PayloadData] -&gt; ShowS)
-&gt; Show PayloadData
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [PayloadData] -&gt; ShowS
$cshowList :: [PayloadData] -&gt; ShowS
show :: PayloadData -&gt; String
$cshow :: PayloadData -&gt; String
showsPrec :: Int -&gt; PayloadData -&gt; ShowS
$cshowsPrec :: Int -&gt; PayloadData -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. PayloadData -&gt; Rep PayloadData x)
-&gt; (forall x. Rep PayloadData x -&gt; PayloadData)
-&gt; Generic PayloadData
forall x. Rep PayloadData x -&gt; PayloadData
forall x. PayloadData -&gt; Rep PayloadData x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep PayloadData x -&gt; PayloadData
$cfrom :: forall x. PayloadData -&gt; Rep PayloadData x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-722"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681469278"><span class="annot"><span class="annottext">PayloadData -&gt; ()
(PayloadData -&gt; ()) -&gt; NFData PayloadData
forall a. (a -&gt; ()) -&gt; NFData a
rnf :: PayloadData -&gt; ()
$crnf :: PayloadData -&gt; ()
</span><a href="#local-6989586621681469278"><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-723"></span><span>
</span><span id="line-724"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681469271"><span id="local-6989586621681469273"><span id="local-6989586621681469275"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#PayloadData"><span class="hs-identifier hs-type">PayloadData</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-725"></span><span>    </span><span id="local-6989586621681469270"><span class="annot"><span class="annottext">toJSON :: PayloadData -&gt; Value
</span><a href="#local-6989586621681469270"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span id="local-6989586621681469269"><span class="annot"><span class="annottext">o :: PayloadData
</span><a href="#local-6989586621681469269"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-726"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="hs-string">&quot;transactions&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Vector Transaction -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">PayloadData -&gt; Vector Transaction
</span><a href="Chainweb.Payload.html#_payloadDataTransactions"><span class="hs-identifier hs-var hs-var">_payloadDataTransactions</span></a></span><span> </span><span class="annot"><span class="annottext">PayloadData
</span><a href="#local-6989586621681469269"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-727"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-string">&quot;minerData&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; MinerData -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">PayloadData -&gt; MinerData
</span><a href="Chainweb.Payload.html#_payloadDataMiner"><span class="hs-identifier hs-var hs-var">_payloadDataMiner</span></a></span><span> </span><span class="annot"><span class="annottext">PayloadData
</span><a href="#local-6989586621681469269"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-728"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-string">&quot;payloadHash&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; BlockPayloadHash -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">PayloadData -&gt; BlockPayloadHash
</span><a href="Chainweb.Payload.html#_payloadDataPayloadHash"><span class="hs-identifier hs-var hs-var">_payloadDataPayloadHash</span></a></span><span> </span><span class="annot"><span class="annottext">PayloadData
</span><a href="#local-6989586621681469269"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-729"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-string">&quot;transactionsHash&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; BlockTransactionsHash -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">PayloadData -&gt; BlockTransactionsHash
</span><a href="Chainweb.Payload.html#_payloadDataTransactionsHash"><span class="hs-identifier hs-var hs-var">_payloadDataTransactionsHash</span></a></span><span> </span><span class="annot"><span class="annottext">PayloadData
</span><a href="#local-6989586621681469269"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-730"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-string">&quot;outputsHash&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; BlockOutputsHash -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">PayloadData -&gt; BlockOutputsHash
</span><a href="Chainweb.Payload.html#_payloadDataOutputsHash"><span class="hs-identifier hs-var hs-var">_payloadDataOutputsHash</span></a></span><span> </span><span class="annot"><span class="annottext">PayloadData
</span><a href="#local-6989586621681469269"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-731"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-732"></span><span>
</span><span id="line-733"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681469266"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#PayloadData"><span class="hs-identifier hs-type">PayloadData</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-734"></span><span>    </span><span id="local-6989586621681469265"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser PayloadData
</span><a href="#local-6989586621681469265"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser PayloadData) -&gt; Value -&gt; Parser PayloadData
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">withObject</span></span><span> </span><span class="annot"><span class="hs-string">&quot;PayloadData&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Object -&gt; Parser PayloadData) -&gt; Value -&gt; Parser PayloadData)
-&gt; (Object -&gt; Parser PayloadData) -&gt; Value -&gt; Parser PayloadData
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681469264"><span class="annot"><span class="annottext">o :: Object
</span><a href="#local-6989586621681469264"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Vector Transaction
-&gt; MinerData
-&gt; BlockPayloadHash
-&gt; BlockTransactionsHash
-&gt; BlockOutputsHash
-&gt; PayloadData
</span><a href="Chainweb.Payload.html#PayloadData"><span class="hs-identifier hs-var">PayloadData</span></a></span><span>
</span><span id="line-735"></span><span>        </span><span class="annot"><span class="annottext">(Vector Transaction
 -&gt; MinerData
 -&gt; BlockPayloadHash
 -&gt; BlockTransactionsHash
 -&gt; BlockOutputsHash
 -&gt; PayloadData)
-&gt; Parser (Vector Transaction)
-&gt; Parser
     (MinerData
      -&gt; BlockPayloadHash
      -&gt; BlockTransactionsHash
      -&gt; BlockOutputsHash
      -&gt; PayloadData)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">&lt;$!&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621681469264"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Vector Transaction)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="hs-string">&quot;transactions&quot;</span></span><span>
</span><span id="line-736"></span><span>        </span><span class="annot"><span class="annottext">Parser
  (MinerData
   -&gt; BlockPayloadHash
   -&gt; BlockTransactionsHash
   -&gt; BlockOutputsHash
   -&gt; PayloadData)
-&gt; Parser MinerData
-&gt; Parser
     (BlockPayloadHash
      -&gt; BlockTransactionsHash -&gt; BlockOutputsHash -&gt; PayloadData)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621681469264"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser MinerData
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="hs-string">&quot;minerData&quot;</span></span><span>
</span><span id="line-737"></span><span>        </span><span class="annot"><span class="annottext">Parser
  (BlockPayloadHash
   -&gt; BlockTransactionsHash -&gt; BlockOutputsHash -&gt; PayloadData)
-&gt; Parser BlockPayloadHash
-&gt; Parser
     (BlockTransactionsHash -&gt; BlockOutputsHash -&gt; PayloadData)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621681469264"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser BlockPayloadHash
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="hs-string">&quot;payloadHash&quot;</span></span><span>
</span><span id="line-738"></span><span>        </span><span class="annot"><span class="annottext">Parser (BlockTransactionsHash -&gt; BlockOutputsHash -&gt; PayloadData)
-&gt; Parser BlockTransactionsHash
-&gt; Parser (BlockOutputsHash -&gt; PayloadData)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621681469264"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser BlockTransactionsHash
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="hs-string">&quot;transactionsHash&quot;</span></span><span>
</span><span id="line-739"></span><span>        </span><span class="annot"><span class="annottext">Parser (BlockOutputsHash -&gt; PayloadData)
-&gt; Parser BlockOutputsHash -&gt; Parser PayloadData
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621681469264"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser BlockOutputsHash
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="hs-string">&quot;outputsHash&quot;</span></span><span>
</span><span id="line-740"></span><span>
</span><span id="line-741"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsCasValue</span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#PayloadData"><span class="hs-identifier hs-type">PayloadData</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-742"></span><span>    </span><span class="hs-keyword">type</span><span> </span><span id="CasKeyType"><span class="annot"><span class="hs-identifier hs-var">CasKeyType</span></span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#PayloadData"><span class="hs-identifier hs-type">PayloadData</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockPayloadHash"><span class="hs-identifier hs-type">BlockPayloadHash</span></a></span><span>
</span><span id="line-743"></span><span>    </span><span id="local-6989586621681469261"><span class="annot"><span class="annottext">casKey :: PayloadData -&gt; CasKeyType PayloadData
</span><a href="#local-6989586621681469261"><span class="hs-identifier hs-var hs-var hs-var hs-var">casKey</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PayloadData -&gt; CasKeyType PayloadData
PayloadData -&gt; BlockPayloadHash
</span><a href="Chainweb.Payload.html#_payloadDataPayloadHash"><span class="hs-identifier hs-var hs-var">_payloadDataPayloadHash</span></a></span><span>
</span><span id="line-744"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">casKey</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-745"></span><span>
</span><span id="line-746"></span><span class="annot"><a href="Chainweb.Payload.html#payloadData"><span class="hs-identifier hs-type">payloadData</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockTransactions"><span class="hs-identifier hs-type">BlockTransactions</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockPayload"><span class="hs-identifier hs-type">BlockPayload</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#PayloadData"><span class="hs-identifier hs-type">PayloadData</span></a></span><span>
</span><span id="line-747"></span><span id="payloadData"><span class="annot"><span class="annottext">payloadData :: BlockTransactions -&gt; BlockPayload -&gt; PayloadData
</span><a href="Chainweb.Payload.html#payloadData"><span class="hs-identifier hs-var hs-var">payloadData</span></a></span></span><span> </span><span id="local-6989586621681469260"><span class="annot"><span class="annottext">txs :: BlockTransactions
</span><a href="#local-6989586621681469260"><span class="hs-identifier hs-var">txs</span></a></span></span><span> </span><span id="local-6989586621681469259"><span class="annot"><span class="annottext">payload :: BlockPayload
</span><a href="#local-6989586621681469259"><span class="hs-identifier hs-var">payload</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">$WPayloadData :: Vector Transaction
-&gt; MinerData
-&gt; BlockPayloadHash
-&gt; BlockTransactionsHash
-&gt; BlockOutputsHash
-&gt; PayloadData
</span><a href="Chainweb.Payload.html#%24WPayloadData"><span class="hs-identifier hs-type hs-type">PayloadData</span></a></span><span>
</span><span id="line-748"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_payloadDataTransactions :: Vector Transaction
</span><a href="Chainweb.Payload.html#_payloadDataTransactions"><span class="hs-identifier hs-var">_payloadDataTransactions</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockTransactions -&gt; Vector Transaction
</span><a href="Chainweb.Payload.html#_blockTransactions"><span class="hs-identifier hs-var hs-var">_blockTransactions</span></a></span><span> </span><span class="annot"><span class="annottext">BlockTransactions
</span><a href="#local-6989586621681469260"><span class="hs-identifier hs-var">txs</span></a></span><span>
</span><span id="line-749"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_payloadDataMiner :: MinerData
</span><a href="Chainweb.Payload.html#_payloadDataMiner"><span class="hs-identifier hs-var">_payloadDataMiner</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockTransactions -&gt; MinerData
</span><a href="Chainweb.Payload.html#_blockMinerData"><span class="hs-identifier hs-var hs-var">_blockMinerData</span></a></span><span> </span><span class="annot"><span class="annottext">BlockTransactions
</span><a href="#local-6989586621681469260"><span class="hs-identifier hs-var">txs</span></a></span><span>
</span><span id="line-750"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_payloadDataPayloadHash :: BlockPayloadHash
</span><a href="Chainweb.Payload.html#_payloadDataPayloadHash"><span class="hs-identifier hs-var">_payloadDataPayloadHash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockPayload -&gt; BlockPayloadHash
</span><a href="Chainweb.Payload.html#_blockPayloadPayloadHash"><span class="hs-identifier hs-var hs-var">_blockPayloadPayloadHash</span></a></span><span> </span><span class="annot"><span class="annottext">BlockPayload
</span><a href="#local-6989586621681469259"><span class="hs-identifier hs-var">payload</span></a></span><span>
</span><span id="line-751"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_payloadDataTransactionsHash :: BlockTransactionsHash
</span><a href="Chainweb.Payload.html#_payloadDataTransactionsHash"><span class="hs-identifier hs-var">_payloadDataTransactionsHash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockPayload -&gt; BlockTransactionsHash
</span><a href="Chainweb.Payload.html#_blockPayloadTransactionsHash"><span class="hs-identifier hs-var hs-var">_blockPayloadTransactionsHash</span></a></span><span> </span><span class="annot"><span class="annottext">BlockPayload
</span><a href="#local-6989586621681469259"><span class="hs-identifier hs-var">payload</span></a></span><span>
</span><span id="line-752"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_payloadDataOutputsHash :: BlockOutputsHash
</span><a href="Chainweb.Payload.html#_payloadDataOutputsHash"><span class="hs-identifier hs-var">_payloadDataOutputsHash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockPayload -&gt; BlockOutputsHash
</span><a href="Chainweb.Payload.html#_blockPayloadOutputsHash"><span class="hs-identifier hs-var hs-var">_blockPayloadOutputsHash</span></a></span><span> </span><span class="annot"><span class="annottext">BlockPayload
</span><a href="#local-6989586621681469259"><span class="hs-identifier hs-var">payload</span></a></span><span>
</span><span id="line-753"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-754"></span><span>
</span><span id="line-755"></span><span class="annot"><a href="Chainweb.Payload.html#newPayloadData"><span class="hs-identifier hs-type">newPayloadData</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockTransactions"><span class="hs-identifier hs-type">BlockTransactions</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockOutputs"><span class="hs-identifier hs-type">BlockOutputs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#PayloadData"><span class="hs-identifier hs-type">PayloadData</span></a></span><span>
</span><span id="line-756"></span><span id="newPayloadData"><span class="annot"><span class="annottext">newPayloadData :: BlockTransactions -&gt; BlockOutputs -&gt; PayloadData
</span><a href="Chainweb.Payload.html#newPayloadData"><span class="hs-identifier hs-var hs-var">newPayloadData</span></a></span></span><span> </span><span id="local-6989586621681469257"><span class="annot"><span class="annottext">txs :: BlockTransactions
</span><a href="#local-6989586621681469257"><span class="hs-identifier hs-var">txs</span></a></span></span><span> </span><span id="local-6989586621681469256"><span class="annot"><span class="annottext">outputs :: BlockOutputs
</span><a href="#local-6989586621681469256"><span class="hs-identifier hs-var">outputs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockTransactions -&gt; BlockPayload -&gt; PayloadData
</span><a href="Chainweb.Payload.html#payloadData"><span class="hs-identifier hs-var">payloadData</span></a></span><span> </span><span class="annot"><span class="annottext">BlockTransactions
</span><a href="#local-6989586621681469257"><span class="hs-identifier hs-var">txs</span></a></span><span> </span><span class="annot"><span class="annottext">(BlockPayload -&gt; PayloadData) -&gt; BlockPayload -&gt; PayloadData
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">BlockTransactions -&gt; BlockOutputs -&gt; BlockPayload
</span><a href="Chainweb.Payload.html#blockPayload"><span class="hs-identifier hs-var">blockPayload</span></a></span><span> </span><span class="annot"><span class="annottext">BlockTransactions
</span><a href="#local-6989586621681469257"><span class="hs-identifier hs-var">txs</span></a></span><span> </span><span class="annot"><span class="annottext">BlockOutputs
</span><a href="#local-6989586621681469256"><span class="hs-identifier hs-var">outputs</span></a></span><span>
</span><span id="line-757"></span><span>
</span><span id="line-758"></span><span class="hs-keyword">type</span><span> </span><span id="PayloadDataCas"><span class="annot"><a href="Chainweb.Payload.html#PayloadDataCas"><span class="hs-identifier hs-var">PayloadDataCas</span></a></span></span><span> </span><span id="local-6989586621681469255"><span class="annot"><a href="#local-6989586621681469255"><span class="hs-identifier hs-type">cas</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CasConstraint</span></span><span> </span><span class="annot"><a href="#local-6989586621681469255"><span class="hs-identifier hs-type">cas</span></a></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#PayloadData"><span class="hs-identifier hs-type">PayloadData</span></a></span><span>
</span><span id="line-759"></span><span>
</span><span id="line-760"></span><span class="hs-comment">-- -------------------------------------------------------------------------- --</span><span>
</span><span id="line-761"></span><span class="hs-comment">-- All Payload Data in a Single Structure</span><span>
</span><span id="line-762"></span><span>
</span><span id="line-763"></span><span class="hs-keyword">data</span><span> </span><span id="PayloadWithOutputs"><span class="annot"><a href="Chainweb.Payload.html#PayloadWithOutputs"><span class="hs-identifier hs-var">PayloadWithOutputs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PayloadWithOutputs"><span class="annot"><a href="Chainweb.Payload.html#PayloadWithOutputs"><span class="hs-identifier hs-var">PayloadWithOutputs</span></a></span></span><span>
</span><span id="line-764"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="_payloadWithOutputsTransactions"><span class="annot"><span class="annottext">PayloadWithOutputs -&gt; Vector (Transaction, TransactionOutput)
</span><a href="Chainweb.Payload.html#_payloadWithOutputsTransactions"><span class="hs-identifier hs-var hs-var">_payloadWithOutputsTransactions</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">V.Vector</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Chainweb.Payload.html#Transaction"><span class="hs-identifier hs-type">Transaction</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#TransactionOutput"><span class="hs-identifier hs-type">TransactionOutput</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-765"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="_payloadWithOutputsMiner"><span class="annot"><span class="annottext">PayloadWithOutputs -&gt; MinerData
</span><a href="Chainweb.Payload.html#_payloadWithOutputsMiner"><span class="hs-identifier hs-var hs-var">_payloadWithOutputsMiner</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Chainweb.Payload.html#MinerData"><span class="hs-identifier hs-type">MinerData</span></a></span><span>
</span><span id="line-766"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="_payloadWithOutputsCoinbase"><span class="annot"><span class="annottext">PayloadWithOutputs -&gt; CoinbaseOutput
</span><a href="Chainweb.Payload.html#_payloadWithOutputsCoinbase"><span class="hs-identifier hs-var hs-var">_payloadWithOutputsCoinbase</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Chainweb.Payload.html#CoinbaseOutput"><span class="hs-identifier hs-type">CoinbaseOutput</span></a></span><span>
</span><span id="line-767"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="_payloadWithOutputsPayloadHash"><span class="annot"><span class="annottext">PayloadWithOutputs -&gt; BlockPayloadHash
</span><a href="Chainweb.Payload.html#_payloadWithOutputsPayloadHash"><span class="hs-identifier hs-var hs-var">_payloadWithOutputsPayloadHash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Chainweb.Payload.html#BlockPayloadHash"><span class="hs-identifier hs-type">BlockPayloadHash</span></a></span><span>
</span><span id="line-768"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="_payloadWithOutputsTransactionsHash"><span class="annot"><span class="annottext">PayloadWithOutputs -&gt; BlockTransactionsHash
</span><a href="Chainweb.Payload.html#_payloadWithOutputsTransactionsHash"><span class="hs-identifier hs-var hs-var">_payloadWithOutputsTransactionsHash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Chainweb.Payload.html#BlockTransactionsHash"><span class="hs-identifier hs-type">BlockTransactionsHash</span></a></span><span>
</span><span id="line-769"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="_payloadWithOutputsOutputsHash"><span class="annot"><span class="annottext">PayloadWithOutputs -&gt; BlockOutputsHash
</span><a href="Chainweb.Payload.html#_payloadWithOutputsOutputsHash"><span class="hs-identifier hs-var hs-var">_payloadWithOutputsOutputsHash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Chainweb.Payload.html#BlockOutputsHash"><span class="hs-identifier hs-type">BlockOutputsHash</span></a></span><span>
</span><span id="line-770"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681469241"><span id="local-6989586621681469243"><span id="local-6989586621681469245"><span class="annot"><span class="annottext">Int -&gt; PayloadWithOutputs -&gt; ShowS
[PayloadWithOutputs] -&gt; ShowS
PayloadWithOutputs -&gt; String
(Int -&gt; PayloadWithOutputs -&gt; ShowS)
-&gt; (PayloadWithOutputs -&gt; String)
-&gt; ([PayloadWithOutputs] -&gt; ShowS)
-&gt; Show PayloadWithOutputs
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [PayloadWithOutputs] -&gt; ShowS
$cshowList :: [PayloadWithOutputs] -&gt; ShowS
show :: PayloadWithOutputs -&gt; String
$cshow :: PayloadWithOutputs -&gt; String
showsPrec :: Int -&gt; PayloadWithOutputs -&gt; ShowS
$cshowsPrec :: Int -&gt; PayloadWithOutputs -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-771"></span><span>
</span><span id="line-772"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsCasValue</span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#PayloadWithOutputs"><span class="hs-identifier hs-type">PayloadWithOutputs</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-773"></span><span>    </span><span class="hs-keyword">type</span><span> </span><span id="CasKeyType"><span class="annot"><span class="hs-identifier hs-var">CasKeyType</span></span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#PayloadWithOutputs"><span class="hs-identifier hs-type">PayloadWithOutputs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockPayloadHash"><span class="hs-identifier hs-type">BlockPayloadHash</span></a></span><span>
</span><span id="line-774"></span><span>    </span><span id="local-6989586621681469238"><span class="annot"><span class="annottext">casKey :: PayloadWithOutputs -&gt; CasKeyType PayloadWithOutputs
</span><a href="#local-6989586621681469238"><span class="hs-identifier hs-var hs-var hs-var hs-var">casKey</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PayloadWithOutputs -&gt; CasKeyType PayloadWithOutputs
PayloadWithOutputs -&gt; BlockPayloadHash
</span><a href="Chainweb.Payload.html#_payloadWithOutputsPayloadHash"><span class="hs-identifier hs-var hs-var">_payloadWithOutputsPayloadHash</span></a></span><span>
</span><span id="line-775"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">casKey</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-776"></span><span>
</span><span id="line-777"></span><span class="hs-comment">-- | Smart constructor for 'PayloadWithOutputs'.</span><span>
</span><span id="line-778"></span><span class="hs-comment">--</span><span>
</span><span id="line-779"></span><span class="hs-comment">-- Precondition: the vector of transaction output has the same length (and is</span><span>
</span><span id="line-780"></span><span class="hs-comment">-- in the same order, i.e. the two vectors will be zipped) as the list of input</span><span>
</span><span id="line-781"></span><span class="hs-comment">-- transactions inside the 'PayloadData'.</span><span>
</span><span id="line-782"></span><span class="annot"><a href="Chainweb.Payload.html#payloadWithOutputs"><span class="hs-identifier hs-type">payloadWithOutputs</span></a></span><span>
</span><span id="line-783"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span>
</span><span id="line-784"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#PayloadData"><span class="hs-identifier hs-type">PayloadData</span></a></span><span>
</span><span id="line-785"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#CoinbaseOutput"><span class="hs-identifier hs-type">CoinbaseOutput</span></a></span><span>
</span><span id="line-786"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">V.Vector</span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#TransactionOutput"><span class="hs-identifier hs-type">TransactionOutput</span></a></span><span>
</span><span id="line-787"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#PayloadWithOutputs"><span class="hs-identifier hs-type">PayloadWithOutputs</span></a></span><span>
</span><span id="line-788"></span><span id="payloadWithOutputs"><span class="annot"><span class="annottext">payloadWithOutputs :: PayloadData
-&gt; CoinbaseOutput -&gt; Vector TransactionOutput -&gt; PayloadWithOutputs
</span><a href="Chainweb.Payload.html#payloadWithOutputs"><span class="hs-identifier hs-var hs-var">payloadWithOutputs</span></a></span></span><span> </span><span id="local-6989586621681469237"><span class="annot"><span class="annottext">d :: PayloadData
</span><a href="#local-6989586621681469237"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621681469236"><span class="annot"><span class="annottext">co :: CoinbaseOutput
</span><a href="#local-6989586621681469236"><span class="hs-identifier hs-var">co</span></a></span></span><span> </span><span id="local-6989586621681469235"><span class="annot"><span class="annottext">outputs :: Vector TransactionOutput
</span><a href="#local-6989586621681469235"><span class="hs-identifier hs-var">outputs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-789"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Vector Transaction -&gt; Int
forall a. Vector a -&gt; Int
</span><span class="hs-identifier hs-var">V.length</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PayloadData -&gt; Vector Transaction
</span><a href="Chainweb.Payload.html#_payloadDataTransactions"><span class="hs-identifier hs-var hs-var">_payloadDataTransactions</span></a></span><span> </span><span class="annot"><span class="annottext">PayloadData
</span><a href="#local-6989586621681469237"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">Vector TransactionOutput -&gt; Int
forall a. Vector a -&gt; Int
</span><span class="hs-identifier hs-var">V.length</span></span><span> </span><span class="annot"><span class="annottext">Vector TransactionOutput
</span><a href="#local-6989586621681469235"><span class="hs-identifier hs-var">outputs</span></a></span><span>
</span><span id="line-790"></span><span>    </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681469232"><span class="annot"><span class="annottext">msg :: String
</span><a href="#local-6989586621681469232"><span class="hs-identifier hs-var hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><span class="hs-identifier hs-var">concat</span></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-791"></span><span>               </span><span class="annot"><span class="hs-string">&quot;Internal code invariant violation: &quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-792"></span><span>               </span><span class="annot"><span class="hs-string">&quot;PAYLOAD ERROR: MISMATCHED # OF TRANSACTIONS AND OUTPUTS: \n&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-793"></span><span>               </span><span class="annot"><span class="hs-string">&quot;PayloadData=&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-794"></span><span>               </span><span class="annot"><span class="annottext">PayloadData -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">PayloadData
</span><a href="#local-6989586621681469237"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-795"></span><span>               </span><span class="annot"><span class="hs-string">&quot;\nTransactionOutputs=&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-796"></span><span>               </span><span class="annot"><span class="annottext">Vector TransactionOutput -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Vector TransactionOutput
</span><a href="#local-6989586621681469235"><span class="hs-identifier hs-var">outputs</span></a></span><span>
</span><span id="line-797"></span><span>               </span><span class="hs-special">]</span><span>
</span><span id="line-798"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">String -&gt; PayloadWithOutputs
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681469232"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-799"></span><span>    </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">$WPayloadWithOutputs :: Vector (Transaction, TransactionOutput)
-&gt; MinerData
-&gt; CoinbaseOutput
-&gt; BlockPayloadHash
-&gt; BlockTransactionsHash
-&gt; BlockOutputsHash
-&gt; PayloadWithOutputs
</span><a href="Chainweb.Payload.html#%24WPayloadWithOutputs"><span class="hs-identifier hs-type hs-type">PayloadWithOutputs</span></a></span><span>
</span><span id="line-800"></span><span>           </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_payloadWithOutputsTransactions :: Vector (Transaction, TransactionOutput)
</span><a href="Chainweb.Payload.html#_payloadWithOutputsTransactions"><span class="hs-identifier hs-var">_payloadWithOutputsTransactions</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Vector Transaction
-&gt; Vector TransactionOutput
-&gt; Vector (Transaction, TransactionOutput)
forall a b. Vector a -&gt; Vector b -&gt; Vector (a, b)
</span><span class="hs-identifier hs-var">V.zip</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PayloadData -&gt; Vector Transaction
</span><a href="Chainweb.Payload.html#_payloadDataTransactions"><span class="hs-identifier hs-var hs-var">_payloadDataTransactions</span></a></span><span> </span><span class="annot"><span class="annottext">PayloadData
</span><a href="#local-6989586621681469237"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Vector TransactionOutput
</span><a href="#local-6989586621681469235"><span class="hs-identifier hs-var">outputs</span></a></span><span>
</span><span id="line-801"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_payloadWithOutputsMiner :: MinerData
</span><a href="Chainweb.Payload.html#_payloadWithOutputsMiner"><span class="hs-identifier hs-var">_payloadWithOutputsMiner</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PayloadData -&gt; MinerData
</span><a href="Chainweb.Payload.html#_payloadDataMiner"><span class="hs-identifier hs-var hs-var">_payloadDataMiner</span></a></span><span> </span><span class="annot"><span class="annottext">PayloadData
</span><a href="#local-6989586621681469237"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-802"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_payloadWithOutputsCoinbase :: CoinbaseOutput
</span><a href="Chainweb.Payload.html#_payloadWithOutputsCoinbase"><span class="hs-identifier hs-var">_payloadWithOutputsCoinbase</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoinbaseOutput
</span><a href="#local-6989586621681469236"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-803"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_payloadWithOutputsPayloadHash :: BlockPayloadHash
</span><a href="Chainweb.Payload.html#_payloadWithOutputsPayloadHash"><span class="hs-identifier hs-var">_payloadWithOutputsPayloadHash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PayloadData -&gt; BlockPayloadHash
</span><a href="Chainweb.Payload.html#_payloadDataPayloadHash"><span class="hs-identifier hs-var hs-var">_payloadDataPayloadHash</span></a></span><span> </span><span class="annot"><span class="annottext">PayloadData
</span><a href="#local-6989586621681469237"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-804"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_payloadWithOutputsTransactionsHash :: BlockTransactionsHash
</span><a href="Chainweb.Payload.html#_payloadWithOutputsTransactionsHash"><span class="hs-identifier hs-var">_payloadWithOutputsTransactionsHash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PayloadData -&gt; BlockTransactionsHash
</span><a href="Chainweb.Payload.html#_payloadDataTransactionsHash"><span class="hs-identifier hs-var hs-var">_payloadDataTransactionsHash</span></a></span><span> </span><span class="annot"><span class="annottext">PayloadData
</span><a href="#local-6989586621681469237"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-805"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_payloadWithOutputsOutputsHash :: BlockOutputsHash
</span><a href="Chainweb.Payload.html#_payloadWithOutputsOutputsHash"><span class="hs-identifier hs-var">_payloadWithOutputsOutputsHash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PayloadData -&gt; BlockOutputsHash
</span><a href="Chainweb.Payload.html#_payloadDataOutputsHash"><span class="hs-identifier hs-var hs-var">_payloadDataOutputsHash</span></a></span><span> </span><span class="annot"><span class="annottext">PayloadData
</span><a href="#local-6989586621681469237"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-806"></span><span>           </span><span class="hs-special">}</span><span>
</span><span id="line-807"></span><span>
</span><span id="line-808"></span><span class="annot"><a href="Chainweb.Payload.html#newPayloadWithOutputs"><span class="hs-identifier hs-type">newPayloadWithOutputs</span></a></span><span>
</span><span id="line-809"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#MinerData"><span class="hs-identifier hs-type">MinerData</span></a></span><span>
</span><span id="line-810"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#CoinbaseOutput"><span class="hs-identifier hs-type">CoinbaseOutput</span></a></span><span>
</span><span id="line-811"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">V.Vector</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Chainweb.Payload.html#Transaction"><span class="hs-identifier hs-type">Transaction</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#TransactionOutput"><span class="hs-identifier hs-type">TransactionOutput</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-812"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#PayloadWithOutputs"><span class="hs-identifier hs-type">PayloadWithOutputs</span></a></span><span>
</span><span id="line-813"></span><span id="newPayloadWithOutputs"><span class="annot"><span class="annottext">newPayloadWithOutputs :: MinerData
-&gt; CoinbaseOutput
-&gt; Vector (Transaction, TransactionOutput)
-&gt; PayloadWithOutputs
</span><a href="Chainweb.Payload.html#newPayloadWithOutputs"><span class="hs-identifier hs-var hs-var">newPayloadWithOutputs</span></a></span></span><span> </span><span id="local-6989586621681469228"><span class="annot"><span class="annottext">mi :: MinerData
</span><a href="#local-6989586621681469228"><span class="hs-identifier hs-var">mi</span></a></span></span><span> </span><span id="local-6989586621681469227"><span class="annot"><span class="annottext">co :: CoinbaseOutput
</span><a href="#local-6989586621681469227"><span class="hs-identifier hs-var">co</span></a></span></span><span> </span><span id="local-6989586621681469226"><span class="annot"><span class="annottext">s :: Vector (Transaction, TransactionOutput)
</span><a href="#local-6989586621681469226"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">$WPayloadWithOutputs :: Vector (Transaction, TransactionOutput)
-&gt; MinerData
-&gt; CoinbaseOutput
-&gt; BlockPayloadHash
-&gt; BlockTransactionsHash
-&gt; BlockOutputsHash
-&gt; PayloadWithOutputs
</span><a href="Chainweb.Payload.html#%24WPayloadWithOutputs"><span class="hs-identifier hs-type hs-type">PayloadWithOutputs</span></a></span><span>
</span><span id="line-814"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_payloadWithOutputsTransactions :: Vector (Transaction, TransactionOutput)
</span><a href="Chainweb.Payload.html#_payloadWithOutputsTransactions"><span class="hs-identifier hs-var">_payloadWithOutputsTransactions</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Vector (Transaction, TransactionOutput)
</span><a href="#local-6989586621681469226"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-815"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_payloadWithOutputsMiner :: MinerData
</span><a href="Chainweb.Payload.html#_payloadWithOutputsMiner"><span class="hs-identifier hs-var">_payloadWithOutputsMiner</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MinerData
</span><a href="#local-6989586621681469228"><span class="hs-identifier hs-var">mi</span></a></span><span>
</span><span id="line-816"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_payloadWithOutputsCoinbase :: CoinbaseOutput
</span><a href="Chainweb.Payload.html#_payloadWithOutputsCoinbase"><span class="hs-identifier hs-var">_payloadWithOutputsCoinbase</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoinbaseOutput
</span><a href="#local-6989586621681469227"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-817"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_payloadWithOutputsPayloadHash :: BlockPayloadHash
</span><a href="Chainweb.Payload.html#_payloadWithOutputsPayloadHash"><span class="hs-identifier hs-var">_payloadWithOutputsPayloadHash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockPayload -&gt; BlockPayloadHash
</span><a href="Chainweb.Payload.html#_blockPayloadPayloadHash"><span class="hs-identifier hs-var hs-var">_blockPayloadPayloadHash</span></a></span><span> </span><span class="annot"><span class="annottext">BlockPayload
</span><a href="#local-6989586621681469225"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-818"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_payloadWithOutputsTransactionsHash :: BlockTransactionsHash
</span><a href="Chainweb.Payload.html#_payloadWithOutputsTransactionsHash"><span class="hs-identifier hs-var">_payloadWithOutputsTransactionsHash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockPayload -&gt; BlockTransactionsHash
</span><a href="Chainweb.Payload.html#_blockPayloadTransactionsHash"><span class="hs-identifier hs-var hs-var">_blockPayloadTransactionsHash</span></a></span><span> </span><span class="annot"><span class="annottext">BlockPayload
</span><a href="#local-6989586621681469225"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-819"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_payloadWithOutputsOutputsHash :: BlockOutputsHash
</span><a href="Chainweb.Payload.html#_payloadWithOutputsOutputsHash"><span class="hs-identifier hs-var">_payloadWithOutputsOutputsHash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockPayload -&gt; BlockOutputsHash
</span><a href="Chainweb.Payload.html#_blockPayloadOutputsHash"><span class="hs-identifier hs-var hs-var">_blockPayloadOutputsHash</span></a></span><span> </span><span class="annot"><span class="annottext">BlockPayload
</span><a href="#local-6989586621681469225"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-820"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-821"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-822"></span><span>    </span><span id="local-6989586621681469225"><span class="annot"><span class="annottext">p :: BlockPayload
</span><a href="#local-6989586621681469225"><span class="hs-identifier hs-var hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MinerData
-&gt; CoinbaseOutput
-&gt; Vector (Transaction, TransactionOutput)
-&gt; BlockPayload
</span><a href="Chainweb.Payload.html#newBlockPayload"><span class="hs-identifier hs-var">newBlockPayload</span></a></span><span> </span><span class="annot"><span class="annottext">MinerData
</span><a href="#local-6989586621681469228"><span class="hs-identifier hs-var">mi</span></a></span><span> </span><span class="annot"><span class="annottext">CoinbaseOutput
</span><a href="#local-6989586621681469227"><span class="hs-identifier hs-var">co</span></a></span><span> </span><span class="annot"><span class="annottext">Vector (Transaction, TransactionOutput)
</span><a href="#local-6989586621681469226"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-823"></span><span>
</span><span id="line-824"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681469218"><span id="local-6989586621681469220"><span id="local-6989586621681469222"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#PayloadWithOutputs"><span class="hs-identifier hs-type">PayloadWithOutputs</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-825"></span><span>    </span><span id="local-6989586621681469217"><span class="annot"><span class="annottext">toJSON :: PayloadWithOutputs -&gt; Value
</span><a href="#local-6989586621681469217"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span id="local-6989586621681469216"><span class="annot"><span class="annottext">o :: PayloadWithOutputs
</span><a href="#local-6989586621681469216"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-826"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="hs-string">&quot;transactions&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Vector (Transaction, TransactionOutput) -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">PayloadWithOutputs -&gt; Vector (Transaction, TransactionOutput)
</span><a href="Chainweb.Payload.html#_payloadWithOutputsTransactions"><span class="hs-identifier hs-var hs-var">_payloadWithOutputsTransactions</span></a></span><span> </span><span class="annot"><span class="annottext">PayloadWithOutputs
</span><a href="#local-6989586621681469216"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-827"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-string">&quot;minerData&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; MinerData -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">PayloadWithOutputs -&gt; MinerData
</span><a href="Chainweb.Payload.html#_payloadWithOutputsMiner"><span class="hs-identifier hs-var hs-var">_payloadWithOutputsMiner</span></a></span><span> </span><span class="annot"><span class="annottext">PayloadWithOutputs
</span><a href="#local-6989586621681469216"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-828"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-string">&quot;coinbase&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; CoinbaseOutput -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">PayloadWithOutputs -&gt; CoinbaseOutput
</span><a href="Chainweb.Payload.html#_payloadWithOutputsCoinbase"><span class="hs-identifier hs-var hs-var">_payloadWithOutputsCoinbase</span></a></span><span> </span><span class="annot"><span class="annottext">PayloadWithOutputs
</span><a href="#local-6989586621681469216"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-829"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-string">&quot;payloadHash&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; BlockPayloadHash -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">PayloadWithOutputs -&gt; BlockPayloadHash
</span><a href="Chainweb.Payload.html#_payloadWithOutputsPayloadHash"><span class="hs-identifier hs-var hs-var">_payloadWithOutputsPayloadHash</span></a></span><span> </span><span class="annot"><span class="annottext">PayloadWithOutputs
</span><a href="#local-6989586621681469216"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-830"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-string">&quot;transactionsHash&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; BlockTransactionsHash -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">PayloadWithOutputs -&gt; BlockTransactionsHash
</span><a href="Chainweb.Payload.html#_payloadWithOutputsTransactionsHash"><span class="hs-identifier hs-var hs-var">_payloadWithOutputsTransactionsHash</span></a></span><span> </span><span class="annot"><span class="annottext">PayloadWithOutputs
</span><a href="#local-6989586621681469216"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-831"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-string">&quot;outputsHash&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; BlockOutputsHash -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">PayloadWithOutputs -&gt; BlockOutputsHash
</span><a href="Chainweb.Payload.html#_payloadWithOutputsOutputsHash"><span class="hs-identifier hs-var hs-var">_payloadWithOutputsOutputsHash</span></a></span><span> </span><span class="annot"><span class="annottext">PayloadWithOutputs
</span><a href="#local-6989586621681469216"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-832"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-833"></span><span>
</span><span id="line-834"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681469213"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Chainweb.Payload.html#PayloadWithOutputs"><span class="hs-identifier hs-type">PayloadWithOutputs</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-835"></span><span>    </span><span id="local-6989586621681469212"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser PayloadWithOutputs
</span><a href="#local-6989586621681469212"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser PayloadWithOutputs)
-&gt; Value
-&gt; Parser PayloadWithOutputs
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">withObject</span></span><span> </span><span class="annot"><span class="hs-string">&quot;PayloadWithOutputs&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Object -&gt; Parser PayloadWithOutputs)
 -&gt; Value -&gt; Parser PayloadWithOutputs)
-&gt; (Object -&gt; Parser PayloadWithOutputs)
-&gt; Value
-&gt; Parser PayloadWithOutputs
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681469211"><span class="annot"><span class="annottext">o :: Object
</span><a href="#local-6989586621681469211"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Vector (Transaction, TransactionOutput)
-&gt; MinerData
-&gt; CoinbaseOutput
-&gt; BlockPayloadHash
-&gt; BlockTransactionsHash
-&gt; BlockOutputsHash
-&gt; PayloadWithOutputs
</span><a href="Chainweb.Payload.html#PayloadWithOutputs"><span class="hs-identifier hs-var">PayloadWithOutputs</span></a></span><span>
</span><span id="line-836"></span><span>        </span><span class="annot"><span class="annottext">(Vector (Transaction, TransactionOutput)
 -&gt; MinerData
 -&gt; CoinbaseOutput
 -&gt; BlockPayloadHash
 -&gt; BlockTransactionsHash
 -&gt; BlockOutputsHash
 -&gt; PayloadWithOutputs)
-&gt; Parser (Vector (Transaction, TransactionOutput))
-&gt; Parser
     (MinerData
      -&gt; CoinbaseOutput
      -&gt; BlockPayloadHash
      -&gt; BlockTransactionsHash
      -&gt; BlockOutputsHash
      -&gt; PayloadWithOutputs)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">&lt;$!&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621681469211"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Vector (Transaction, TransactionOutput))
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="hs-string">&quot;transactions&quot;</span></span><span>
</span><span id="line-837"></span><span>        </span><span class="annot"><span class="annottext">Parser
  (MinerData
   -&gt; CoinbaseOutput
   -&gt; BlockPayloadHash
   -&gt; BlockTransactionsHash
   -&gt; BlockOutputsHash
   -&gt; PayloadWithOutputs)
-&gt; Parser MinerData
-&gt; Parser
     (CoinbaseOutput
      -&gt; BlockPayloadHash
      -&gt; BlockTransactionsHash
      -&gt; BlockOutputsHash
      -&gt; PayloadWithOutputs)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621681469211"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser MinerData
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="hs-string">&quot;minerData&quot;</span></span><span>
</span><span id="line-838"></span><span>        </span><span class="annot"><span class="annottext">Parser
  (CoinbaseOutput
   -&gt; BlockPayloadHash
   -&gt; BlockTransactionsHash
   -&gt; BlockOutputsHash
   -&gt; PayloadWithOutputs)
-&gt; Parser CoinbaseOutput
-&gt; Parser
     (BlockPayloadHash
      -&gt; BlockTransactionsHash -&gt; BlockOutputsHash -&gt; PayloadWithOutputs)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621681469211"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser CoinbaseOutput
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="hs-string">&quot;coinbase&quot;</span></span><span>
</span><span id="line-839"></span><span>        </span><span class="annot"><span class="annottext">Parser
  (BlockPayloadHash
   -&gt; BlockTransactionsHash -&gt; BlockOutputsHash -&gt; PayloadWithOutputs)
-&gt; Parser BlockPayloadHash
-&gt; Parser
     (BlockTransactionsHash -&gt; BlockOutputsHash -&gt; PayloadWithOutputs)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621681469211"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser BlockPayloadHash
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="hs-string">&quot;payloadHash&quot;</span></span><span>
</span><span id="line-840"></span><span>        </span><span class="annot"><span class="annottext">Parser
  (BlockTransactionsHash -&gt; BlockOutputsHash -&gt; PayloadWithOutputs)
-&gt; Parser BlockTransactionsHash
-&gt; Parser (BlockOutputsHash -&gt; PayloadWithOutputs)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621681469211"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser BlockTransactionsHash
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="hs-string">&quot;transactionsHash&quot;</span></span><span>
</span><span id="line-841"></span><span>        </span><span class="annot"><span class="annottext">Parser (BlockOutputsHash -&gt; PayloadWithOutputs)
-&gt; Parser BlockOutputsHash -&gt; Parser PayloadWithOutputs
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621681469211"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser BlockOutputsHash
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="hs-string">&quot;outputsHash&quot;</span></span><span>
</span><span id="line-842"></span><span>
</span><span id="line-843"></span><span class="annot"><a href="Chainweb.Payload.html#payloadWithOutputsToBlockObjects"><span class="hs-identifier hs-type">payloadWithOutputsToBlockObjects</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#PayloadWithOutputs"><span class="hs-identifier hs-type">PayloadWithOutputs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Chainweb.Payload.html#BlockTransactions"><span class="hs-identifier hs-type">BlockTransactions</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#BlockOutputs"><span class="hs-identifier hs-type">BlockOutputs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-844"></span><span id="payloadWithOutputsToBlockObjects"><span class="annot"><span class="annottext">payloadWithOutputsToBlockObjects :: PayloadWithOutputs -&gt; (BlockTransactions, BlockOutputs)
</span><a href="Chainweb.Payload.html#payloadWithOutputsToBlockObjects"><span class="hs-identifier hs-var hs-var">payloadWithOutputsToBlockObjects</span></a></span></span><span> </span><span id="local-6989586621681469205"><span id="local-6989586621681469206"><span id="local-6989586621681469207"><span id="local-6989586621681469208"><span id="local-6989586621681469209"><span id="local-6989586621681469210"><span class="annot"><a href="Chainweb.Payload.html#PayloadWithOutputs"><span class="hs-identifier hs-type">PayloadWithOutputs</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-glyph">..</span><span class="hs-special">}</span></span></span></span></span></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-845"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">BlockTransactionsHash
-&gt; Vector Transaction -&gt; MinerData -&gt; BlockTransactions
</span><a href="Chainweb.Payload.html#BlockTransactions"><span class="hs-identifier hs-var">BlockTransactions</span></a></span><span> </span><span class="annot"><span class="annottext">BlockTransactionsHash
</span><a href="#local-6989586621681469206"><span class="hs-identifier hs-var">_payloadWithOutputsTransactionsHash</span></a></span><span> </span><span class="annot"><span class="annottext">Vector Transaction
</span><a href="#local-6989586621681469204"><span class="hs-identifier hs-var">ins</span></a></span><span> </span><span class="annot"><span class="annottext">MinerData
</span><a href="#local-6989586621681469209"><span class="hs-identifier hs-var">_payloadWithOutputsMiner</span></a></span><span>
</span><span id="line-846"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">BlockOutputsHash
-&gt; Vector TransactionOutput -&gt; CoinbaseOutput -&gt; BlockOutputs
</span><a href="Chainweb.Payload.html#BlockOutputs"><span class="hs-identifier hs-var">BlockOutputs</span></a></span><span> </span><span class="annot"><span class="annottext">BlockOutputsHash
</span><a href="#local-6989586621681469205"><span class="hs-identifier hs-var">_payloadWithOutputsOutputsHash</span></a></span><span> </span><span class="annot"><span class="annottext">Vector TransactionOutput
</span><a href="#local-6989586621681469203"><span class="hs-identifier hs-var">outs</span></a></span><span> </span><span class="annot"><span class="annottext">CoinbaseOutput
</span><a href="#local-6989586621681469208"><span class="hs-identifier hs-var">_payloadWithOutputsCoinbase</span></a></span><span>
</span><span id="line-847"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-848"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-849"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681469204"><span class="annot"><span class="annottext">ins :: Vector Transaction
</span><a href="#local-6989586621681469204"><span class="hs-identifier hs-var">ins</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681469203"><span class="annot"><span class="annottext">outs :: Vector TransactionOutput
</span><a href="#local-6989586621681469203"><span class="hs-identifier hs-var">outs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Vector (Transaction, TransactionOutput)
-&gt; (Vector Transaction, Vector TransactionOutput)
forall a b. Vector (a, b) -&gt; (Vector a, Vector b)
</span><span class="hs-identifier hs-var">V.unzip</span></span><span> </span><span class="annot"><span class="annottext">(Vector (Transaction, TransactionOutput)
 -&gt; (Vector Transaction, Vector TransactionOutput))
-&gt; Vector (Transaction, TransactionOutput)
-&gt; (Vector Transaction, Vector TransactionOutput)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Vector (Transaction, TransactionOutput)
</span><a href="#local-6989586621681469210"><span class="hs-identifier hs-var">_payloadWithOutputsTransactions</span></a></span><span>
</span><span id="line-850"></span><span>
</span><span id="line-851"></span><span class="annot"><a href="Chainweb.Payload.html#payloadWithOutputsToPayloadData"><span class="hs-identifier hs-type">payloadWithOutputsToPayloadData</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#PayloadWithOutputs"><span class="hs-identifier hs-type">PayloadWithOutputs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Chainweb.Payload.html#PayloadData"><span class="hs-identifier hs-type">PayloadData</span></a></span><span>
</span><span id="line-852"></span><span id="payloadWithOutputsToPayloadData"><span class="annot"><span class="annottext">payloadWithOutputsToPayloadData :: PayloadWithOutputs -&gt; PayloadData
</span><a href="Chainweb.Payload.html#payloadWithOutputsToPayloadData"><span class="hs-identifier hs-var hs-var">payloadWithOutputsToPayloadData</span></a></span></span><span> </span><span id="local-6989586621681469201"><span class="annot"><span class="annottext">o :: PayloadWithOutputs
</span><a href="#local-6989586621681469201"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">$WPayloadData :: Vector Transaction
-&gt; MinerData
-&gt; BlockPayloadHash
-&gt; BlockTransactionsHash
-&gt; BlockOutputsHash
-&gt; PayloadData
</span><a href="Chainweb.Payload.html#%24WPayloadData"><span class="hs-identifier hs-type hs-type">PayloadData</span></a></span><span>
</span><span id="line-853"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_payloadDataTransactions :: Vector Transaction
</span><a href="Chainweb.Payload.html#_payloadDataTransactions"><span class="hs-identifier hs-var">_payloadDataTransactions</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Transaction, TransactionOutput) -&gt; Transaction
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">((Transaction, TransactionOutput) -&gt; Transaction)
-&gt; Vector (Transaction, TransactionOutput) -&gt; Vector Transaction
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">&lt;$!&gt;</span></span><span> </span><span class="annot"><span class="annottext">PayloadWithOutputs -&gt; Vector (Transaction, TransactionOutput)
</span><a href="Chainweb.Payload.html#_payloadWithOutputsTransactions"><span class="hs-identifier hs-var hs-var">_payloadWithOutputsTransactions</span></a></span><span> </span><span class="annot"><span class="annottext">PayloadWithOutputs
</span><a href="#local-6989586621681469201"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-854"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_payloadDataMiner :: MinerData
</span><a href="Chainweb.Payload.html#_payloadDataMiner"><span class="hs-identifier hs-var">_payloadDataMiner</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PayloadWithOutputs -&gt; MinerData
</span><a href="Chainweb.Payload.html#_payloadWithOutputsMiner"><span class="hs-identifier hs-var hs-var">_payloadWithOutputsMiner</span></a></span><span> </span><span class="annot"><span class="annottext">PayloadWithOutputs
</span><a href="#local-6989586621681469201"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-855"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_payloadDataPayloadHash :: BlockPayloadHash
</span><a href="Chainweb.Payload.html#_payloadDataPayloadHash"><span class="hs-identifier hs-var">_payloadDataPayloadHash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PayloadWithOutputs -&gt; BlockPayloadHash
</span><a href="Chainweb.Payload.html#_payloadWithOutputsPayloadHash"><span class="hs-identifier hs-var hs-var">_payloadWithOutputsPayloadHash</span></a></span><span> </span><span class="annot"><span class="annottext">PayloadWithOutputs
</span><a href="#local-6989586621681469201"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-856"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_payloadDataTransactionsHash :: BlockTransactionsHash
</span><a href="Chainweb.Payload.html#_payloadDataTransactionsHash"><span class="hs-identifier hs-var">_payloadDataTransactionsHash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PayloadWithOutputs -&gt; BlockTransactionsHash
</span><a href="Chainweb.Payload.html#_payloadWithOutputsTransactionsHash"><span class="hs-identifier hs-var hs-var">_payloadWithOutputsTransactionsHash</span></a></span><span> </span><span class="annot"><span class="annottext">PayloadWithOutputs
</span><a href="#local-6989586621681469201"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-857"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_payloadDataOutputsHash :: BlockOutputsHash
</span><a href="Chainweb.Payload.html#_payloadDataOutputsHash"><span class="hs-identifier hs-var">_payloadDataOutputsHash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PayloadWithOutputs -&gt; BlockOutputsHash
</span><a href="Chainweb.Payload.html#_payloadWithOutputsOutputsHash"><span class="hs-identifier hs-var hs-var">_payloadWithOutputsOutputsHash</span></a></span><span> </span><span class="annot"><span class="annottext">PayloadWithOutputs
</span><a href="#local-6989586621681469201"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-858"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-859"></span></pre></body></html>